"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[118],{3118:(Yn,A,l)=>{l.r(A),l.d(A,{BookingModule:()=>Rn});var c=l(9808),d=l(1062),Q=l(978),R=l(5326),x=l(727),n=l(5e3),D=l(9113),M=l(6010),k=l(3640),m=l(1894),v=l(4546),O=l(1047),g=l(3075),P=l(6042),f=l(2683),z=l(2643);function Y(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div")(1,"button",5),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"translate"),n.qZA()(),n.TgZ(5,"button",6),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleOk()}),n._uU(6),n.ALo(7,"translate"),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,3,"ReservationPage.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.hij(" ",n.lcZ(7,5,"ReservationPage.ConfirmBtn")," ")}}let F=(()=>{class o{constructor(t,e,i,s){this.bookingsService=t,this.commonService=e,this.translateService=i,this.modalRef=s,this.reason="",this.loading=!1,this.subscriptions=new x.w0}ngOnInit(){}handleCancel(){this.modalRef.close()}handleOk(){this.reason.length&&(this.loading=!0,this.subscriptions.add(this.bookingsService.cancelBooking(this.bookingId,{cancel_reason:this.reason}).subscribe({next:t=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({canceled:!0})},error:t=>{var e;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)}})))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(D.F),n.Y36(M.v),n.Y36(d.sK),n.Y36(k.Lf))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-cancel-booking"]],inputs:{bookingId:"bookingId"},decls:10,vars:5,consts:[[1,"control-wrapper"],[1,"title"],[3,"nzMaxCharacterCount"],["rows","5","nz-input","",3,"ngModel","ngModelChange"],[4,"nzModalFooter"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,e){1&t&&(n.TgZ(0,"div")(1,"div",0)(2,"p",1),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"nz-form-item")(6,"nz-form-control")(7,"nz-textarea-count",2)(8,"textarea",3),n.NdJ("ngModelChange",function(s){return e.reason=s}),n.qZA()()()()(),n.YNc(9,Y,8,7,"div",4),n.qZA()),2&t&&(n.xp6(3),n.hij(" ",n.lcZ(4,3,"ReservationPage.CancellationReason")," "),n.xp6(4),n.Q6J("nzMaxCharacterCount",500),n.xp6(1),n.Q6J("ngModel",e.reason))},directives:[m.SK,v.Nx,m.t3,v.Fd,O.w,O.Zp,g.Fj,g.JJ,g.On,k.Uh,P.ix,f.w,z.dQ],pipes:[d.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none;width:100%}"]}),o})();var p=l(5439),E=l(3900),j=l(6761);function W(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div")(1,"button",11),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"button",12),n.NdJ("click",function(){return n.CHM(t),n.oxw().onAddReview()}),n._uU(5),n.ALo(6,"translate"),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,3,"General.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.Oqu(n.lcZ(6,5,"General.Send"))}}const u=function(){return{span:24}};let H=(()=>{class o{constructor(t,e,i,s,r){this.fB=t,this.bookingsService=e,this.modalRef=i,this.commonService=s,this.translateService=r,this.tooltips=[this.translateService.instant("PlaceDetails.Terrible"),this.translateService.instant("PlaceDetails.Bad"),this.translateService.instant("PlaceDetails.Normal"),this.translateService.instant("PlaceDetails.Good"),this.translateService.instant("PlaceDetails.Wonderful")],this.rateValue={rate1:0,rate2:0,rate3:0},this.loading=!1,this.subscriptions=new x.w0}ngOnInit(){this.initFeedBackForm()}initFeedBackForm(){this.formFeedBack=this.fB.group({feedback:[null,[g.kI.maxLength(100)]]})}handleCancel(){this.modalRef.close({})}submitRate(){this.loading=!0,this.subscriptions.add(this.bookingsService.addRate({rate:.33*(this.rateValue.rate1+this.rateValue.rate2+this.rateValue.rate3)},this.bookingId).subscribe({next:e=>{console.log(e),this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==e?void 0:e.message),this.modalRef.close({sent:!0})},error:e=>{var i;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)}}))}addFeedBack(){this.formFeedBack.valid&&this.subscriptions.add(this.bookingsService.addFeedBack(this.formFeedBack.value,4).subscribe({next:t=>{console.log(t),this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({sent:!0})},error:t=>{var e;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)}}))}onAddReview(){this.loading=!0,this.subscriptions.add(this.bookingsService.addRate({rate:(.33*(this.rateValue.rate1+this.rateValue.rate2+this.rateValue.rate3)).toFixed(2)},this.bookingId).pipe((0,E.w)(()=>this.bookingsService.addFeedBack(this.bookingId,this.formFeedBack.value))).subscribe({next:e=>{console.log(e),this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==e?void 0:e.message),this.modalRef.close({sent:!0})},error:e=>{var i;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(g.qu),n.Y36(D.F),n.Y36(k.Lf),n.Y36(M.v),n.Y36(d.sK))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-leave-review"]],inputs:{bookingId:"bookingId"},decls:31,vars:41,consts:[["nz-row","","nzJustify","space-between",1,"review-modal"],["nz-col","",1,"mb-3",3,"nzXs","nzLg","nzMd"],[1,"d-flex","align-items-center","justify-content-between","px-2"],[1,"title-rate"],[3,"ngModel","nzTooltips","ngModelChange"],["nz-form","","nzLayout","vertical",1,"p-2",3,"formGroup"],[1,"title-rate","mb-3"],[1,"small","text-black-50"],[3,"nzMaxCharacterCount"],["rows","4","formControlName","feedback","nz-input",""],[4,"nzModalFooter"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,e){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h4",3),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"nz-rate",4),n.NdJ("ngModelChange",function(s){return e.rateValue.rate1=s}),n.qZA()()(),n.TgZ(7,"div",1)(8,"div",2)(9,"h4",3),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.TgZ(12,"nz-rate",4),n.NdJ("ngModelChange",function(s){return e.rateValue.rate2=s}),n.qZA()()(),n.TgZ(13,"div",1)(14,"div",2)(15,"h4",3),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"nz-rate",4),n.NdJ("ngModelChange",function(s){return e.rateValue.rate3=s}),n.qZA()()(),n.TgZ(19,"form",5)(20,"h4",6),n._uU(21),n.ALo(22,"translate"),n.TgZ(23,"span",7),n._uU(24),n.ALo(25,"translate"),n.qZA()(),n.TgZ(26,"nz-form-item")(27,"nz-form-control")(28,"nz-textarea-count",8),n._UZ(29,"textarea",9),n.qZA()()()(),n.YNc(30,W,7,7,"div",10),n.qZA()),2&t&&(n.xp6(1),n.Q6J("nzXs",n.DdM(32,u))("nzLg",n.DdM(33,u))("nzMd",n.DdM(34,u)),n.xp6(3),n.Oqu(n.lcZ(5,22,"PlaceDetails.Cleanness")),n.xp6(2),n.Q6J("ngModel",e.rateValue.rate1)("nzTooltips",e.tooltips),n.xp6(1),n.Q6J("nzXs",n.DdM(35,u))("nzLg",n.DdM(36,u))("nzMd",n.DdM(37,u)),n.xp6(3),n.Oqu(n.lcZ(11,24,"PlaceDetails.Accuracy")),n.xp6(2),n.Q6J("ngModel",e.rateValue.rate2)("nzTooltips",e.tooltips),n.xp6(1),n.Q6J("nzXs",n.DdM(38,u))("nzLg",n.DdM(39,u))("nzMd",n.DdM(40,u)),n.xp6(3),n.Oqu(n.lcZ(17,26,"PlaceDetails.Host")),n.xp6(2),n.Q6J("ngModel",e.rateValue.rate3)("nzTooltips",e.tooltips),n.xp6(1),n.Q6J("formGroup",e.formFeedBack),n.xp6(2),n.Oqu(n.lcZ(22,28,"PlaceDetails.LeaveComment")),n.xp6(3),n.Oqu(n.lcZ(25,30,"PlaceDetails.Optional")),n.xp6(4),n.Q6J("nzMaxCharacterCount",100))},directives:[m.SK,m.t3,j.sn,g.JJ,g.On,g._Y,g.JL,v.Lr,g.sg,v.Nx,v.Fd,O.w,g.Fj,O.Zp,g.u,k.Uh,P.ix,z.dQ,f.w],pipes:[d.X$],styles:[".review-modal[_ngcontent-%COMP%]   .title-rate[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--bs-dark);margin-bottom:0}form[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{resize:none;height:10em!important}  .ant-modal-title{font-weight:600;font-size:18px}"]}),o})();var S=l(2340),h=l(7152),U=l(9592),V=l(1515),Z=l(3087),w=l(7484),L=l(4973),J=l(9590);function X(o,a){1&o&&(n.TgZ(0,"li",14),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"PlaceDetails.ServiceFees")))}function G(o,a){1&o&&(n.TgZ(0,"li",14),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"PlaceDetails.Vat")))}function K(o,a){1&o&&(n.TgZ(0,"li",14),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"PlaceDetails.Insurance")))}function $(o,a){if(1&o&&(n.TgZ(0,"li",14),n._uU(1),n.qZA()),2&o){const t=n.oxw(2);n.xp6(1),n.hij("",((null==t.bookingData?null:t.bookingData.base_price)*(null==t.bookingData?null:t.bookingData.no_of_nights)*(t.serviceFees/100)).toFixed(2)," SAR")}}function nn(o,a){if(1&o&&(n.TgZ(0,"li",14),n._uU(1),n.qZA()),2&o){const t=n.oxw(2);n.xp6(1),n.hij("",((null==t.bookingData?null:t.bookingData.base_price)*(null==t.bookingData?null:t.bookingData.no_of_nights)*(t.vat/100)).toFixed(2)," SAR")}}function tn(o,a){if(1&o&&(n.TgZ(0,"li",14),n._uU(1),n.qZA()),2&o){const t=n.oxw(2);n.xp6(1),n.hij("",null==t.bookingData?null:t.bookingData.insurance," SAR")}}function on(o,a){if(1&o&&(n.TgZ(0,"div",37),n._UZ(1,"img",38),n.qZA()),2&o){const t=a.$implicit;n.xp6(1),n.Q6J("src",null==t?null:t.image_url,n.LSH)}}function en(o,a){1&o&&(n.TgZ(0,"span"),n._uU(1,"..."),n.qZA())}function an(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"button",39),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).cancelBooking()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&o&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.CancelBooking")," "))}function ln(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"button",39),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onLeaveReview()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&o&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.LeaveReview")," "))}const B=function(){return{span:24}},sn=function(){return{span:20}},q=function(){return{span:16}},I=function(){return{span:8}};function rn(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),n._UZ(6,"i",8),n.qZA(),n.TgZ(7,"div",9)(8,"span",10),n._uU(9),n.ALo(10,"translate"),n.qZA()()(),n.TgZ(11,"nz-card")(12,"div",11)(13,"h3"),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.TgZ(16,"div",12)(17,"ul",13)(18,"li",14),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.YNc(21,X,3,3,"li",15),n.YNc(22,G,3,3,"li",15),n.YNc(23,K,3,3,"li",15),n.qZA(),n.TgZ(24,"ul",16)(25,"li",14),n._uU(26),n.qZA(),n.YNc(27,$,2,1,"li",15),n.YNc(28,nn,2,1,"li",15),n.YNc(29,tn,2,1,"li",15),n.qZA()()(),n._UZ(30,"hr"),n.TgZ(31,"div",17)(32,"h3",18),n._uU(33),n.ALo(34,"translate"),n.qZA(),n.TgZ(35,"h3",18),n._uU(36),n.qZA()()(),n.TgZ(37,"nz-card")(38,"div",19)(39,"h3"),n._uU(40),n.ALo(41,"translate"),n.qZA(),n.TgZ(42,"h5",20),n._uU(43),n.qZA(),n.TgZ(44,"span"),n._uU(45),n.ALo(46,"translate"),n.qZA(),n.TgZ(47,"p",21),n._uU(48),n.qZA()(),n._UZ(49,"hr"),n.TgZ(50,"div",22)(51,"div",23)(52,"span"),n._uU(53),n.ALo(54,"translate"),n.qZA(),n.TgZ(55,"p"),n._uU(56),n.ALo(57,"date"),n.qZA()(),n.TgZ(58,"div",24)(59,"span"),n._uU(60),n.ALo(61,"translate"),n.qZA()(),n.TgZ(62,"div",25)(63,"span"),n._uU(64),n.ALo(65,"translate"),n.qZA(),n.TgZ(66,"p"),n._uU(67),n.ALo(68,"date"),n.qZA()()()(),n.TgZ(69,"div",26)(70,"p",27),n._uU(71),n.ALo(72,"translate"),n.TgZ(73,"span",28),n._uU(74),n.qZA()(),n.TgZ(75,"p",27),n._uU(76),n.ALo(77,"translate"),n.TgZ(78,"span",28),n._uU(79),n.qZA()()()(),n.TgZ(80,"div",5)(81,"div",29)(82,"div",30)(83,"nz-carousel",31),n.YNc(84,on,2,1,"div",32),n.qZA()(),n.TgZ(85,"h5"),n._uU(86),n.qZA(),n.TgZ(87,"p"),n._uU(88),n.ALo(89,"slice"),n.YNc(90,en,2,0,"span",33),n.qZA()(),n.TgZ(91,"div",34),n.YNc(92,an,3,3,"button",35),n.YNc(93,ln,3,3,"button",35),n.TgZ(94,"button",36),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return i.onChatClicked(null==i.bookingData?null:i.bookingData.id)}),n._uU(95),n.ALo(96,"translate"),n.qZA()()()()()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("nzXs",n.DdM(82,B))("nzLg",n.DdM(83,sn)),n.xp6(2),n.Q6J("nzXs",n.DdM(84,B))("nzLg",n.DdM(85,q))("nzLg",n.DdM(86,q)),n.xp6(6),n.lnq("",n.lcZ(10,48,"PlaceDetails.Hello")," ",null==t.userData?null:t.userData.first_name," ",null==t.userData?null:t.userData.last_name,""),n.xp6(5),n.Oqu(n.lcZ(15,50,"PlaceDetails.PriceDetails")),n.xp6(5),n.lnq("",null==t.bookingData?null:t.bookingData.base_price," x ",null==t.bookingData?null:t.bookingData.no_of_nights," ",n.lcZ(20,52,"PlaceDetails.Night"),""),n.xp6(2),n.Q6J("ngIf",t.serviceFees),n.xp6(1),n.Q6J("ngIf",t.vat),n.xp6(1),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.insurance),n.xp6(3),n.hij("",((null==t.bookingData?null:t.bookingData.base_price)*(null==t.bookingData?null:t.bookingData.no_of_nights)).toFixed(2)," SAR"),n.xp6(1),n.Q6J("ngIf",t.serviceFees),n.xp6(1),n.Q6J("ngIf",t.vat),n.xp6(1),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.insurance),n.xp6(4),n.Oqu(n.lcZ(34,54,"PlaceDetails.TotalPrice")),n.xp6(3),n.hij("",null==t.bookingData?null:t.bookingData.price_total," SAR"),n.xp6(4),n.Oqu(n.lcZ(41,56,"PlaceDetails.BookingDetails")),n.xp6(3),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(2),n.AsE("\xb7 ",null==t.bookingData?null:t.bookingData.no_of_beds," ",n.lcZ(46,58,"PlaceDetails.Beds"),""),n.xp6(3),n.Oqu(null==t.bookingData?null:t.bookingData.location),n.xp6(5),n.Oqu(n.lcZ(54,60,"PlaceDetails.CheckIn")),n.xp6(3),n.Oqu(n.xi3(57,62,null==t.bookingData?null:t.bookingData.booked_from,"medium")),n.xp6(4),n.AsE(" ",null==t.bookingData?null:t.bookingData.no_of_nights," ",n.lcZ(61,65,"PlaceDetails.Night")," "),n.xp6(4),n.Oqu(n.lcZ(65,67,"PlaceDetails.CheckOut")),n.xp6(3),n.Oqu(n.xi3(68,69,null==t.bookingData?null:t.bookingData.booked_to,"medium")),n.xp6(4),n.hij("",n.lcZ(72,72,"PlaceDetails.HostedBy")," : "),n.xp6(3),n.AsE("",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.first_name," ",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.last_name,""),n.xp6(2),n.hij("",n.lcZ(77,74,"PlaceDetails.Traveller")," : "),n.xp6(3),n.AsE(" ",null==t.userData?null:t.userData.first_name," ",null==t.userData?null:t.userData.last_name,""),n.xp6(1),n.Q6J("nzXs",n.DdM(87,B))("nzLg",n.DdM(88,I))("nzLg",n.DdM(89,I)),n.xp6(4),n.Q6J("ngForOf",null==t.bookingData?null:t.bookingData.images),n.xp6(2),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(2),n.hij("",n.Dn7(89,76,null==t.bookingData?null:t.bookingData.description,0,200)," "),n.xp6(2),n.Q6J("ngIf",(null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.length)>200),n.xp6(2),n.Q6J("ngIf","coming"===t.bookingStatus),n.xp6(1),n.Q6J("ngIf","previous"===t.bookingStatus),n.xp6(2),n.hij(" ",n.lcZ(96,80,"HOST"===t.userRole?"ReservationPage.ChatWithTraveller":"ReservationPage.ChatWithHost")," ")}}function gn(o,a){1&o&&n._UZ(0,"span",43)}function cn(o,a){if(1&o&&(n.TgZ(0,"div",40),n.YNc(1,gn,1,0,"ng-template",null,41,n.W1O),n._UZ(3,"nz-spin",42),n.qZA()),2&o){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}let dn=(()=>{class o{constructor(t,e,i,s,r,_,C,b){this.bookingsService=t,this.commonService=e,this.route=i,this.cookieService=s,this.propertyBookingService=r,this.modal=_,this.translateService=C,this.router=b,this.userRole=S.N.userRole,this.subscriptions=new x.w0,this.getBookingId()}ngOnInit(){this.getUserData(),this.fetchVatDetails(),this.getUserRole()}getBookingId(){this.route.paramMap.subscribe(t=>{var e,i;(null===(e=null==t?void 0:t.params)||void 0===e?void 0:e.id)&&(this.bookingId=null===(i=null==t?void 0:t.params)||void 0===i?void 0:i.id,this.fetchBookingData())})}getUserData(){this.cookieService.get("userData")&&(this.userData=JSON.parse(this.cookieService.get("userData")))}getUserRole(){this.commonService.userRole.subscribe(t=>{this.userRole=t})}fetchVatDetails(){this.loading=!0,this.subscriptions.add(this.propertyBookingService.fetchVatDetails().subscribe(t=>{var e,i;console.log(t),(null==t?void 0:t.successful)&&(this.serviceFees=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.service_fee,this.vat=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.vat),this.loading=!1}))}fetchBookingData(){this.loading=!0;const t="HOST"===this.userRole?this.bookingsService.getHostBookingDetails(this.bookingId):this.bookingsService.getBookingDetails(this.bookingId);this.subscriptions.add(t.subscribe(e=>{var i;this.bookingData=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.booking,this.handleBookingStatus(),this.loading=!1}))}handleBookingStatus(){let t=p(this.bookingData.booked_from),e=p(this.bookingData.booked_to),i=p(new Date);console.log(t.isBefore(i)),console.log(e.isBefore(i)),console.log(i),t.isAfter(i)&&e.isAfter(i)?this.bookingStatus="coming":t.isBefore(i)&&e.isAfter(i)?this.bookingStatus="current":t.isBefore(i)&&e.isBefore(i)&&(this.bookingStatus="previous"),console.log(this.bookingStatus)}onLeaveReview(){this.modal.create({nzTitle:this.translateService.instant("ReservationPage.LeaveReview"),nzContent:H,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1,nzComponentParams:{bookingId:this.bookingData.id}})}cancelBooking(){this.modal.create({nzTitle:this.translateService.instant("ReservationPage.CancelBooking"),nzContent:F,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1,nzComponentParams:{bookingId:this.bookingData.id}}).afterClose.subscribe(e=>{console.log(e),(null==e?void 0:e.canceled)&&this.fetchBookingData()})}onChatClicked(t){this.router.navigateByUrl(`/chat/${t}`)}calculateTotal(){var t,e;let i=0;return i=this.bookingData.base_price*this.bookingData.no_of_nights,this.serviceFees&&(i+=(null===(t=this.bookingData)||void 0===t?void 0:t.base_price)*(this.serviceFees/100)),this.vat&&(i+=(null===(e=this.bookingData)||void 0===e?void 0:e.base_price)*(this.vat/100)),this.bookingData.insurance&&(i+=this.bookingData.insurance),i.toFixed(2)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(D.F),n.Y36(M.v),n.Y36(h.gz),n.Y36(U.N_),n.Y36(V.v),n.Y36(k.Sf),n.Y36(d.sK),n.Y36(h.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-booking-details"]],decls:2,vars:2,consts:[["nz-row","","id","booking-details",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-row","","id","booking-details"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],["nz-row","",1,"layout"],["nz-col","",3,"nzXs","nzLg"],[1,"isConfirm","d-flex","justify-content-start","align-items-center","mb-3"],[1,"like-confirm"],["nz-icon","","nzType","like","nzTheme","fill"],[1,"desc"],[1,"one"],[1,"price-detail"],[1,"d-flex","justify-content-between","align-items-center"],[1,"list-price","first-list","list-unstyled"],[1,"item"],["class","item",4,"ngIf"],[1,"list-price","second-list","list-unstyled"],[1,"total","d-flex","justify-content-between","align-items-center"],[1,"my-0"],[1,"booking-details"],[1,"name-booking"],[1,"address"],[1,"time-booking","d-flex","justify-content-between","align-items-center"],[1,"chech-in"],[1,"nights"],[1,"chech-out"],[1,"more-details"],[1,"info"],[1,"details-info"],[1,"img-booking"],[1,"carousel-wrapper"],["nzAutoPlay","true","nzEffect","scrollx","nzAutoPlaySpeed","4000"],["nz-carousel-content","",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btns-wrapper"],["nz-button","","class","cancel-btn",3,"click",4,"ngIf"],["nz-button","",1,"chat-btn",3,"click"],["nz-carousel-content",""],["alt","",1,"carousel-img",3,"src"],["nz-button","",1,"cancel-btn",3,"click"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,e){1&t&&(n.YNc(0,rn,97,90,"section",0),n.YNc(1,cn,4,1,"div",1)),2&t&&(n.Q6J("ngIf",!e.loading),n.xp6(1),n.Q6J("ngIf",e.loading))},directives:[c.O5,m.SK,m.t3,f.w,Z.Ls,w.bd,L.QZ,c.sg,L.pA,P.ix,z.dQ,J.W],pipes:[d.X$,c.uU,c.OU],styles:['#booking-details[_ngcontent-%COMP%]{padding:30px 24px 20px;margin-bottom:2em}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]{width:250px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .like-confirm[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50px;background-color:#06c800;margin-inline-end:12px;display:flex;justify-content:center;align-items:center}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .like-confirm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-white)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:var(--bs-dark);display:block}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-gray-600);display:block}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px;color:var(--bs-dark);margin-block-end:3px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:12px;line-height:15px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;font-size:24px;color:var(--bs-primary)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:22px;margin-block-end:15px;text-align:start;color:var(--bs-dark)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.first-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{text-decoration:underline}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.second-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{text-align:end;font-weight:600}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.second-list[_ngcontent-%COMP%]   .item.discount[_ngcontent-%COMP%]{color:#3ba400}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .name-booking[_ngcontent-%COMP%]{font-size:14px;margin-block-end:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{font-size:12px;line-height:15px;color:var(--bs-blue);font-weight:600;padding-inline-end:8px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-weight:400;padding-inline-start:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-weight:400;font-size:15px;line-height:15px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-block:0;text-align:center}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]{position:relative;z-index:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f6f8f8;color:var(--bs-dark);border-radius:5px;padding:8px 11px;border:1px solid #dadada}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]:before{content:"";width:1px;background-color:#73868e;height:50px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--bs-gray-600);line-height:18px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:700}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details-info.code[_ngcontent-%COMP%]{color:var(--bs-blue)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{height:15em;border-radius:5px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;margin-block:20px 10px;font-weight:700;color:var(--bs-dark)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--bs-gray-600);line-height:18px}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{border-color:var(--bs-gray-600)!important;font-size:14px;color:var(--bs-gray-600)!important;background-color:var(--bs-white)!important;margin-top:2em;width:48%;height:3em}@media (max-width: 1024px){#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding-right:1em;padding-left:1em;margin-inline-end:10px}}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .chat-btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:14px;color:var(--bs-white)!important;background-color:var(--bs-primary)!important;margin-top:2em;width:48%;height:3em}@media (max-width: 1024px){#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .chat-btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding-right:1em;padding-left:1em}}  #booking-details .ant-card{width:80%;margin-block-end:25px}@media (max-width: 1024px){  #booking-details .ant-card{width:95%}}@media (max-width: 768px){  #booking-details .ant-card{width:100%}}  #booking-details .ant-card hr{margin-block:20px;background-color:#73868e;opacity:.5;display:block}  #booking-details .ant-card h3,   #booking-details .ant-card h5,   #booking-details .ant-card .time-booking p{font-size:20px;color:var(--bs-dark);line-height:20px;font-weight:600;margin-bottom:1em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}']}),o})();var N=l(868);function pn(o,a){if(1&o&&n._UZ(0,"img",23),2&o){const t=n.oxw(2);n.Q6J("src",null==t.bookingData?null:t.bookingData.cover_photo,n.LSH)}}function un(o,a){1&o&&n._UZ(0,"img",24)}function _n(o,a){1&o&&(n.TgZ(0,"span",25),n._uU(1,"Cancelled"),n.qZA())}function mn(o,a){1&o&&(n.TgZ(0,"span"),n._uU(1,"....."),n.qZA())}function bn(o,a){1&o&&(n.TgZ(0,"button",26),n._uU(1,"Book again"),n.qZA())}function hn(o,a){1&o&&(n.TgZ(0,"button",26),n._uU(1,"Chat with host"),n.qZA())}function kn(o,a){1&o&&(n.TgZ(0,"button",26),n._UZ(1,"i",27),n._uU(2," Leave a review"),n.qZA())}function vn(o,a){if(1&o&&(n.TgZ(0,"div",3)(1,"div",4),n.YNc(2,pn,1,1,"img",5),n.YNc(3,un,1,0,"img",6),n.qZA(),n.TgZ(4,"div",7)(5,"div",8)(6,"h6",9),n._uU(7),n.qZA(),n.YNc(8,_n,2,0,"span",10),n.TgZ(9,"button",11),n._UZ(10,"i",12),n._uU(11," help? "),n.qZA()(),n.TgZ(12,"p",13)(13,"span",14),n._uU(14),n.ALo(15,"date"),n.qZA(),n._uU(16," - "),n.TgZ(17,"span",15),n._uU(18),n.ALo(19,"date"),n.qZA(),n._uU(20," : "),n.TgZ(21,"span",16),n._uU(22),n.qZA(),n._uU(23," guests "),n.qZA(),n.TgZ(24,"p",17),n._uU(25),n.YNc(26,mn,2,0,"span",18),n.qZA(),n.TgZ(27,"div",19)(28,"div",20)(29,"p"),n._uU(30,"Amount Paid: "),n.TgZ(31,"span",21),n._uU(32),n.qZA()()(),n.YNc(33,bn,2,0,"button",22),n.YNc(34,hn,2,0,"button",22),n.YNc(35,kn,3,0,"button",22),n.qZA()()()),2&o){const t=n.oxw();n.xp6(2),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.cover_photo),n.xp6(1),n.Q6J("ngIf",!(null!=t.bookingData&&t.bookingData.cover_photo)),n.xp6(4),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(1),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.cancel),n.xp6(6),n.hij(" ",n.xi3(15,13,null==t.bookingData?null:t.bookingData.booked_from,"dd-MM-YYYY"),""),n.xp6(4),n.Oqu(n.xi3(19,16,null==t.bookingData?null:t.bookingData.booked_to,"dd-MM-YYYY")),n.xp6(4),n.hij(" ",null==t.bookingData?null:t.bookingData.no_of_guests," "),n.xp6(3),n.hij(" ",null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.slice(0,50)," "),n.xp6(1),n.Q6J("ngIf",(null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.length)>50),n.xp6(6),n.hij("",null==t.bookingData?null:t.bookingData.price_total," SAR"),n.xp6(1),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.cancel),n.xp6(1),n.Q6J("ngIf","Current"===(null==t.bookingData?null:t.bookingData.status)&&!1===(null==t.bookingData?null:t.bookingData.cancel)),n.xp6(1),n.Q6J("ngIf","Previous"===(null==t.bookingData?null:t.bookingData.status)&&!1===(null==t.bookingData?null:t.bookingData.cancel))}}let fn=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-booking-card"]],inputs:{bookingData:"bookingData"},decls:4,vars:1,consts:[[1,"booking-card"],[3,"nzDescription"],["descriptionTemplate",""],[1,"body-wrapper"],[1,"img-wrapper"],["class","booking-img","alt","example",3,"src",4,"ngIf"],["class","booking-img","alt","example","src","assets/imgs/booking-card-placeholder.png",4,"ngIf"],[1,"content-wrapper"],[1,"name-row"],[1,"booking-name"],["class","status",4,"ngIf"],["nz-button","","nzType","link",1,"help-btn"],["nz-icon","","nzType","question-circle","nzTheme","outline"],[1,"meta-info"],[1,"from"],[1,"to"],[1,"guests"],[1,"description"],[4,"ngIf"],[1,"booking-card-footer"],[1,"amount-part"],[1,"amount"],["nz-button","","class","book-btn",4,"ngIf"],["alt","example",1,"booking-img",3,"src"],["alt","example","src","assets/imgs/booking-card-placeholder.png",1,"booking-img"],[1,"status"],["nz-button","",1,"book-btn"],[1,"fa-solid","fa-thumbs-up",2,"padding-inline-end","10px"]],template:function(t,e){if(1&t&&(n.TgZ(0,"nz-card",0),n._UZ(1,"nz-card-meta",1),n.qZA(),n.YNc(2,vn,36,19,"ng-template",null,2,n.W1O)),2&t){const i=n.MAs(3);n.xp6(1),n.Q6J("nzDescription",i)}},directives:[w.bd,w.l7,c.O5,P.ix,f.w,Z.Ls,z.dQ],pipes:[c.uU],styles:[".booking-card[_ngcontent-%COMP%]{padding:15px;border-radius:5px;margin-block-end:20px;width:600px;cursor:pointer}@media (max-width: 768px){.booking-card[_ngcontent-%COMP%]{width:96%;margin-inline:auto}}@media (max-width: 575px){.booking-card[_ngcontent-%COMP%]{width:100%;margin-inline:0;padding:8px}}  .booking-card .ant-card-body{padding:0!important}.booking-img-wrapper[_ngcontent-%COMP%]{position:relative}.booking-img-wrapper[_ngcontent-%COMP%]   .booking-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.booking-img-wrapper[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]{position:absolute;z-index:1;inset-block-start:5%;inset-inline-end:5%;width:36px;height:36px;border-radius:50%;border-color:var(--bs-primary);background-color:var(--bs-white)}.booking-img-wrapper[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)}.name-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5em}.name-row[_ngcontent-%COMP%]   .booking-name[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:700;margin-top:.5em;margin-bottom:.5em}.name-row[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{background-color:#ff3b30;color:var(--bs-white);padding:3px 5px;border-radius:5px;font-size:12px;height:25px}@media (max-width: 575px){.name-row[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{inset-inline-start:10px;inset-block-start:10px;position:absolute}}.name-row[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]{color:#0473f2;display:flex;justify-content:space-between;align-items:center}.name-row[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:text-bottom}.meta-info[_ngcontent-%COMP%]{margin:0 0 .5em;color:var(--bs-blue)}.description[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-gray-700)}@media (max-width: 575px){.description[_ngcontent-%COMP%]{margin:0}}.booking-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--bs-dark);margin:0}.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-inline-start:2px;color:var(--bs-primary);font-weight:600}@media (max-width: 575px){.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}}.booking-card-footer[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{background-color:var(--bs-primary);border-color:var(--bs-primary);color:var(--bs-white)}@media (max-width: 575px){.booking-card-footer[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{padding:4px}}.body-wrapper[_ngcontent-%COMP%]{width:100%;display:block}.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{width:30%;display:inline-block;height:10em;vertical-align:bottom}@media (max-width: 575px){.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{position:relative}}.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   .booking-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.body-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:70%;display:inline-block;height:10em;padding-inline-start:12px}"]}),o})();var Cn=l(1711),xn=l(5181);const T=function(o){return[o]};function Dn(o,a){if(1&o&&n._UZ(0,"app-booking-card",12),2&o){const t=a.$implicit;n.Q6J("bookingData",t)("routerLink",n.VKq(2,T,"/booking/booking-details/"+(null==t?null:t.id)))}}function Mn(o,a){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Dn,1,4,"app-booking-card",9),n.TgZ(5,"div",10)(6,"nz-pagination",11),n.NdJ("nzPageIndexChange",function(i){return n.CHM(t),n.oxw().pageChanged(i)}),n.qZA()(),n.BQk()}if(2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,5,"Booking.Previous")),n.xp6(2),n.Q6J("ngForOf",t.previousBookingsData),n.xp6(2),n.Q6J("nzPageIndex",t.previousFilterCriteria.page)("nzTotal",t.totalPreviousBookings)("nzPageSize",10)}}function On(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Pn(o,a){1&o&&n._UZ(0,"span",18)}function zn(o,a){if(1&o&&(n.TgZ(0,"div",15),n.YNc(1,Pn,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&o){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function Zn(o,a){if(1&o&&n._UZ(0,"app-booking-card",12),2&o){const t=a.$implicit;n.Q6J("bookingData",t)("routerLink",n.VKq(2,T,"/booking/booking-details/"+(null==t?null:t.id)))}}function wn(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Zn,1,4,"app-booking-card",9),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Ongoing")),n.xp6(2),n.Q6J("ngForOf",t.ongoingBookingsData)}}function Bn(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Tn(o,a){1&o&&n._UZ(0,"span",18)}function yn(o,a){if(1&o&&(n.TgZ(0,"div",15),n.YNc(1,Tn,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&o){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function An(o,a){if(1&o&&n._UZ(0,"app-booking-card",12),2&o){const t=a.$implicit;n.Q6J("bookingData",t)("routerLink",n.VKq(2,T,"/booking/booking-details/"+(null==t?null:t.id)))}}function Sn(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,An,1,4,"app-booking-card",9),n.BQk()),2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Coming")),n.xp6(2),n.Q6J("ngForOf",t.comingBookingsData)}}function Un(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Ln(o,a){1&o&&n._UZ(0,"span",18)}function Jn(o,a){if(1&o&&(n.TgZ(0,"div",15),n.YNc(1,Ln,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&o){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}const qn=function(){return{span:22}},In=function(){return{span:20}},y=function(){return{span:24}},Nn=[{path:"",component:(()=>{class o{constructor(t,e,i,s,r){this.bookingsService=t,this.commonService=e,this.translateService=i,this.router=s,this.cookieService=r,this.previousFilterCriteria={page:1,pageSize:10},this.previousBookingsData=[],this.ongoingBookingsData=[],this.comingBookingsData=[],this.loading=!1,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.userRole=S.N.userRole,this.subscriptions=new x.w0}ngOnInit(){this.getUserData(),this.getUserRole()}getUserData(){this.cookieService.get("userData")?(this.userData=JSON.parse(this.cookieService.get("userData")),this.selectTab("previous")):this.handleNotAuthorized()}getUserRole(){this.commonService.userRole.subscribe(t=>{this.userRole=t})}selectTab(t){var e,i,s;"previous"===t?(null===(e=this.userData)||void 0===e?void 0:e.id)&&this.fetchPreviousBookingsData():"ongoing"===t?(null===(i=this.userData)||void 0===i?void 0:i.id)&&("TRAVELLER"===this.userRole?this.fetchOngoingBookingsData():this.fetchHostBookings("ongoing")):(null===(s=this.userData)||void 0===s?void 0:s.id)&&("TRAVELLER"===this.userRole?this.fetchComingBookingsData():this.fetchHostBookings("coming"))}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.BookingBrowse"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.Browse")}}handleNotAuthorized(){this.emptyData={title:this.translateService.instant("General.NotLoggedIn"),text:this.translateService.instant("General.PleaseLogin"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.LoginOrSignup")}}fetchHostBookings(t){this.loading=!0,this.subscriptions.add(this.bookingsService.getHostBookingsData().subscribe(e=>{var i;this.loading=!1,this.handleHostBookings(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.bookings,t)},e=>{this.loading=!1}))}handleHostBookings(t,e){var i,s;"ongoing"===e?this.ongoingBookingsData=t.filter(r=>{let _=p(r.booked_from),C=p(r.booked_to),b=p(new Date);return _.isBefore(b)&&C.isAfter(b)}):this.comingBookingsData=t.filter(r=>{let _=p(r.booked_from),C=p(r.booked_to),b=p(new Date);return _.isAfter(b)&&C.isAfter(b)}),(!(null===(i=this.comingBookingsData)||void 0===i?void 0:i.length)||!(null===(s=this.ongoingBookingsData)||void 0===s?void 0:s.length))&&this.handleEmptyData()}fetchPreviousBookingsData(){this.loading=!0;const t="HOST"===this.userRole?this.bookingsService.getHostPreviousBookingsData(this.previousFilterCriteria):this.bookingsService.getPreviousBookingsData(this.previousFilterCriteria);this.subscriptions.add(t.subscribe(e=>{var i,s,r,_;(null==e?void 0:e.successful)&&(this.loading=!1,this.previousBookingsData=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.data,this.totalPreviousBookings=null===(r=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.meta)||void 0===r?void 0:r.total,(null===(_=this.previousBookingsData)||void 0===_?void 0:_.length)||this.handleEmptyData())},e=>{this.loading=!1,this.handleEmptyData()}))}pageChanged(t){this.previousFilterCriteria.page=t,this.fetchPreviousBookingsData()}fetchOngoingBookingsData(){this.loading=!0,this.subscriptions.add(this.bookingsService.getOngoingBookingsData().subscribe(t=>{var e;(null==t?void 0:t.successful)&&(this.loading=!1,this.ongoingBookingsData=null==t?void 0:t.data,console.log(this.ongoingBookingsData),(null===(e=this.ongoingBookingsData)||void 0===e?void 0:e.length)||this.handleEmptyData())},t=>{this.loading=!1,this.handleEmptyData()}))}fetchComingBookingsData(){this.loading=!0,this.subscriptions.add(this.bookingsService.getComingBookingsData().subscribe(t=>{var e;(null==t?void 0:t.successful)&&(this.loading=!1,this.comingBookingsData=null==t?void 0:t.data,(null===(e=this.comingBookingsData)||void 0===e?void 0:e.length)||this.handleEmptyData())},t=>{this.loading=!1,this.handleEmptyData()}))}onBrowseBtnClicked(){var t;(null===(t=this.userData)||void 0===t?void 0:t.id)?this.router.navigateByUrl("/"):this.router.navigateByUrl("auth/sign-up")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(D.F),n.Y36(M.v),n.Y36(d.sK),n.Y36(h.F0),n.Y36(U.N_))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-booking-wrapper"]],decls:19,vars:25,consts:[["nz-row","","id","booking"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[1,"title","mb-5"],["nz-row",""],["nz-col","",3,"nzSm","nzTitle","nzClick"],[4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[1,"name"],[3,"bookingData","routerLink",4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],[3,"bookingData","routerLink"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,e){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),n._uU(4),n.ALo(5,"translate"),n.qZA()(),n.TgZ(6,"nz-tabset",3)(7,"nz-tab",4),n.NdJ("nzClick",function(){return e.selectTab("previous")}),n.YNc(8,Mn,7,7,"ng-container",5),n.YNc(9,On,2,5,"div",6),n.YNc(10,zn,4,1,"div",7),n.qZA(),n.TgZ(11,"nz-tab",4),n.NdJ("nzClick",function(){return e.selectTab("ongoing")}),n.YNc(12,wn,5,4,"ng-container",5),n.YNc(13,Bn,2,5,"div",6),n.YNc(14,yn,4,1,"div",7),n.qZA(),n.TgZ(15,"nz-tab",4),n.NdJ("nzClick",function(){return e.selectTab("coming")}),n.YNc(16,Sn,5,4,"ng-container",5),n.YNc(17,Un,2,5,"div",6),n.YNc(18,Jn,4,1,"div",7),n.qZA()()()()),2&t&&(n.xp6(1),n.Q6J("nzXs",n.DdM(20,qn))("nzLg",n.DdM(21,In)),n.xp6(3),n.Oqu(n.lcZ(5,18,"Booking.Booking")),n.xp6(3),n.Q6J("nzSm",n.DdM(22,y))("nzTitle","Previous Booking"),n.xp6(1),n.Q6J("ngIf",(null==e.previousBookingsData?null:e.previousBookingsData.length)&&!e.loading),n.xp6(1),n.Q6J("ngIf",!(null!=e.previousBookingsData&&e.previousBookingsData.length||e.loading)),n.xp6(1),n.Q6J("ngIf",e.loading),n.xp6(1),n.Q6J("nzSm",n.DdM(23,y))("nzTitle","Ongoing Booking"),n.xp6(1),n.Q6J("ngIf",(null==e.ongoingBookingsData?null:e.ongoingBookingsData.length)&&!e.loading),n.xp6(1),n.Q6J("ngIf",!(null!=e.ongoingBookingsData&&e.ongoingBookingsData.length||e.loading)),n.xp6(1),n.Q6J("ngIf",e.loading),n.xp6(1),n.Q6J("nzSm",n.DdM(24,y))("nzTitle","Coming Booking"),n.xp6(1),n.Q6J("ngIf",(null==e.comingBookingsData?null:e.comingBookingsData.length)&&!e.loading),n.xp6(1),n.Q6J("ngIf",!(null!=e.comingBookingsData&&e.comingBookingsData.length||e.loading)),n.xp6(1),n.Q6J("ngIf",e.loading))},directives:[m.SK,m.t3,N.xH,N.xw,c.O5,c.sg,fn,h.rH,Cn.dE,xn.s,f.w,Z.Ls,J.W],pipes:[d.X$],styles:["#booking[_ngcontent-%COMP%]{padding:50px 24px 20px}@media (max-width: 575px){#booking[_ngcontent-%COMP%]{padding-inline:0}}#booking[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--bs-dark)}#booking[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#5e676a;margin-top:20px}  #booking .ant-tabs-tab{padding:12px 45px;font-size:16px}@media (max-width: 575px){  #booking .ant-tabs-tab{padding:12px;width:50%}}@media (max-width: 575px){  #booking .ant-tabs>.ant-tabs-nav .ant-tabs-nav-list{width:100%}}  #booking .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:var(--bs-blue)}  #booking .ant-tabs-ink-bar{background:var(--bs-blue)}  #booking .ant-tabs-tab:hover{color:var(--bs-blue)}  #booking .ant-pagination-next .ant-pagination-item-link,   #booking .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #booking .ant-pagination-item a,   #booking .ant-pagination-item:focus-visible a,   #booking .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}"]}),o})()},{path:"booking-details/:id",component:dn}];let Qn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[h.Bz.forChild(Nn)],h.Bz]}),o})(),Rn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[c.ez,Qn,Q.P,R.m,d.aw,g.u5,g.UX]]}),o})()}}]);