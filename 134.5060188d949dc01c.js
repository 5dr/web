"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[134],{134:(tt,M,o)=>{o.r(M),o.d(M,{ListingModule:()=>K});var c=o(3075),P=o(8190),d=o(9808),p=o(1062),m=o(4239),y=o(141),b=o(5861),t=o(5e3),g=o(3640),v=o(2683),u=o(1047),f=o(4546),h=o(1894),T=o(5052),L=o(3087),z=o(6042),C=o(2643);const O=function(){return{width:"100%"}};function A(e,a){if(1&e&&t._UZ(0,"img",16),2&e){const n=t.oxw();t.Q6J("src",n.previewImage,t.LSH)("ngStyle",t.DdM(2,O))}}function w(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeModal()}),t._uU(2," Claim insurance "),t.qZA()()}}function U(e,a){1&e&&(t._uU(0),t.ALo(1,"translate")),2&e&&t.Oqu(t.lcZ(1,1,"ListingPage.SAR"))}let D=(()=>{class e{constructor(n,i){var r=this;this.fb=n,this.activeModal=i,this.fileList=[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],this.previewImage="",this.previewVisible=!1,this.nameInfo=new t.vpe,this.handlePreview=function(){var s=(0,b.Z)(function*(l){!l.url&&!l.preview&&(l.preview=yield r.getBase64(l.originFileObj)),r.previewImage=l.url||l.preview,r.previewVisible=!0});return function(l){return s.apply(this,arguments)}}()}ngOnInit(){this.initForm()}initForm(){this.form=this.fb.group({name:[null,[c.kI.maxLength(500)]]})}closeModal(){this.activeModal.close()}getBase64(n){return new Promise((i,r)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>i(s.result),s.onerror=l=>r(l)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(g.Lf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-enter-amount-modal"]],outputs:{nameInfo:"nameInfo"},decls:30,vars:21,consts:[[1,"content-modal"],[3,"nzPrefix"],["type","text","nz-input","","placeholder",""],[1,"alert-price"],[1,"header-title","mt-3"],["nz-form","","nzLayout","vertical",3,"formGroup"],[3,"nzMaxCharacterCount"],["rows","5","formControlName","name","nz-input",""],[1,"clearfix"],["nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76","nzListType","picture-card",3,"nzFileList","nzShowButton","nzPreview","nzFileListChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],["class","d-flex justify-content-center align-items-center",4,"nzModalFooter"],["prefixTemplateUser",""],[3,"src","ngStyle"],[1,"d-flex","justify-content-center","align-items-center"],["nz-button","","nzType","primary",1,"btn-submit","mt-3",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"nz-input-group",1),t._UZ(2,"input",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"h5",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"form",5)(10,"nz-form-item")(11,"nz-form-control")(12,"nz-textarea-count",6),t._UZ(13,"textarea",7),t.qZA()()()(),t.TgZ(14,"h5",4),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",8)(18,"nz-upload",9),t.NdJ("nzFileListChange",function(s){return i.fileList=s}),t.TgZ(19,"div"),t._UZ(20,"i",10),t.TgZ(21,"div",11),t._uU(22),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"nz-modal",12),t.NdJ("nzOnCancel",function(){return i.previewVisible=!1}),t.YNc(25,A,1,3,"ng-template",null,13,t.W1O),t.qZA()()(),t.YNc(27,w,3,0,"div",14),t.YNc(28,U,2,3,"ng-template",null,15,t.W1O)),2&n){const r=t.MAs(26),s=t.MAs(29);t.xp6(1),t.Q6J("nzPrefix",s),t.xp6(3),t.Oqu(t.lcZ(5,13,"ListingPage.MaxAmount")),t.xp6(3),t.Oqu(t.lcZ(8,15,"ListingPage.InsuranceJustification")),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("nzMaxCharacterCount",500),t.xp6(3),t.Oqu(t.lcZ(16,17,"ListingPage.AddPictures")),t.xp6(3),t.Q6J("nzFileList",i.fileList)("nzShowButton",i.fileList.length<8)("nzPreview",i.handlePreview),t.xp6(4),t.Oqu(t.lcZ(23,19,"ListingPage.Upload")),t.xp6(2),t.Q6J("nzVisible",i.previewVisible)("nzContent",r)("nzFooter",null)}},directives:[v.w,u.gB,u.ke,u.Zp,c._Y,c.JL,f.Lr,c.sg,h.SK,f.Nx,h.t3,f.Fd,u.w,c.Fj,c.JJ,c.u,T.FY,L.Ls,g.du,d.PC,g.Uh,z.ix,C.dQ],pipes:[p.X$],styles:[".content-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.content-modal[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{border:1px dashed #babdbe;padding:20px 15px}.content-modal[_ngcontent-%COMP%]   .alert-price[_ngcontent-%COMP%]{margin-block-start:10px;color:var(--bs-primary);font-size:12px}.content-modal[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:16px;line-height:38px;color:var(--bs-dark);font-weight:600}.btn-submit[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}"]}),e})();function I(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",8)(1,"button",9),t.NdJ("click",function(){return t.CHM(n),t.oxw().claim()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeModal()}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"ListingPage.ClaimInsurance")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"ListingPage.ReleaseInsurance")," "))}let S=(()=>{class e{constructor(n,i){this.modal=n,this.activeModal=i}ngOnInit(){}closeModal(){this.activeModal.destroy()}claim(){this.closeModal(),this.modal.create({nzTitle:"Enter the amount you want to claim",nzContent:D,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!1,nzMaskClosable:!1,nzWidth:"45%",nzOkDisabled:!1})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.Sf),t.Y36(g.Lf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-insurance-modal"]],decls:39,vars:27,consts:[[1,"content-modal"],[1,"desc-insurance"],[1,"mb-3"],[1,"d-flex","align-items-center","details"],[1,"me-4"],[1,"ps-3"],[1,"details"],["class","d-flex justify-content-center align-items-center pb-2",4,"nzModalFooter"],[1,"d-flex","justify-content-center","align-items-center","pb-2"],["nz-button","","nzType","primary",1,"list-btn","mt-3",3,"click"],["nz-button","","nzType","primary",1,"btn-submit","mt-3",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span"),t._uU(5,'" Name "'),t.qZA(),t._uU(6),t.ALo(7,"translate"),t.TgZ(8,"span"),t._uU(9,'" property name "'),t.qZA(),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"h6",2),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",3)(16,"p",4),t._uU(17),t.ALo(18,"translate"),t.TgZ(19,"span",5),t._uU(20,"12 may 2022"),t.qZA()(),t.TgZ(21,"p",4),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"span",5),t._uU(25,"15 may 2022"),t.qZA()()(),t.TgZ(26,"div",6)(27,"p",4),t._uU(28),t.ALo(29,"translate"),t.TgZ(30,"span",5),t._uU(31,"Villa"),t.qZA()(),t.TgZ(32,"p",4),t._uU(33),t.ALo(34,"translate"),t.TgZ(35,"span",5),t._uU(36),t.ALo(37,"translate"),t.qZA()()()(),t.YNc(38,I,7,6,"div",7)),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,9,"ListingPage.DescInsuranceOne")," "),t.xp6(4),t.hij(" ",t.lcZ(7,11,"ListingPage.foryour")," "),t.xp6(4),t.hij(" ",t.lcZ(11,13,"ListingPage.DescInsuranceTwo")," "),t.xp6(3),t.Oqu(t.lcZ(14,15,"ListingPage.Details")),t.xp6(4),t.hij("",t.lcZ(18,17,"ListingPage.From")," "),t.xp6(5),t.hij("",t.lcZ(23,19,"ListingPage.To")," "),t.xp6(6),t.Oqu(t.lcZ(29,21,"ListingPage.Property")),t.xp6(5),t.hij("",t.lcZ(34,23,"ListingPage.InsurancePrice")," "),t.xp6(3),t.hij("",t.lcZ(37,25,"ListingPage.SAR")," 500"))},directives:[g.Uh,z.ix,C.dQ,v.w],pipes:[p.X$],styles:[".btn-submit[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}.list-btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-primary)!important;background-color:var(--bs-white)!important}.content-modal[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.content-modal[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.content-modal[_ngcontent-%COMP%]   .desc-insurance[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);line-height:18px}.content-modal[_ngcontent-%COMP%]   .desc-insurance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}"]}),e})();var J=o(727),Z=o(2340),F=o(6010),j=o(3501),N=o(9592),Q=o(1107),Y=o(1711),E=o(5181),B=o(9590);function k(e,a){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-properties-wrapper",12),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("propertyData",n)}}const x=function(){return{span:24}},_=function(){return{span:20}};function X(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",8),t.YNc(2,k,2,1,"div",9),t.TgZ(3,"div",10)(4,"nz-pagination",11),t.NdJ("nzPageIndexChange",function(r){return t.CHM(n),t.oxw().onPageChanged(r)}),t.qZA()()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("nzXs",t.DdM(8,x))("nzLg",t.DdM(9,_)),t.xp6(1),t.Q6J("ngForOf",n.listingData),t.xp6(2),t.ekj("ant-pagination-rtl","ar"==n.lang),t.Q6J("nzPageIndex",n.filterCriteria.page)("nzTotal",n.totalItems)("nzPageSize",10)}}function R(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",13)(1,"app-empty-state",14),t.NdJ("btnClicked",function(){return t.CHM(n),t.oxw().onCreateListingClicked()}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("title",n.emptyData.title)("text",n.emptyData.text)("icon",n.emptyData.icon)("withBtn",n.emptyData.withBtn)("btnText",n.emptyData.btnText)}}function H(e,a){1&e&&t._UZ(0,"span",18)}function V(e,a){if(1&e&&(t.TgZ(0,"div",15),t.YNc(1,H,1,0,"ng-template",null,16,t.W1O),t._UZ(3,"nz-spin",17),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}const q=[{path:"",component:(()=>{class e{constructor(n,i,r,s,l,$){this.modal=n,this.commonService=i,this.translateService=r,this.listingService=s,this.router=l,this.cookieService=$,this.loading=!1,this.listingData=[],this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.filterCriteria={page:1,pageSize:5},this.subscriptions=new J.w0,this.userRole=Z.N.userRole,this.lang=Z.N.lang,this.commonService.handleHostPage()}ngOnInit(){this.handleUserPermission()}handleUserPermission(){this.cookieService.get("userData")&&("HOST"!==this.userRole?this.router.navigateByUrl("/"):this.fetchListingData())}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.NoListings"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("ListingPage.CreateListing")}}fetchListingData(){this.loading=!0,this.subscriptions.add(this.listingService.getListings(this.filterCriteria).subscribe(n=>{var i,r,s,l;(null==n?void 0:n.successful)&&(this.loading=!1,this.listingData=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.data,this.totalItems=null===(s=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.meta)||void 0===s?void 0:s.total,console.log(this.totalItems),(null===(l=this.listingData)||void 0===l?void 0:l.length)||this.handleEmptyData())},n=>{this.loading=!1,this.handleEmptyData()}))}onSizeChanged(n){this.filterCriteria.pageSize=n,this.fetchListingData()}onPageChanged(n){this.filterCriteria.page=n,this.fetchListingData()}getUserData(){return this.cookieService.get("userData"),!0}onCreateListingClicked(){this.router.navigateByUrl("/host/create-listing")}createInsuranceModal(){this.modal.create({nzTitle:"Insurance",nzContent:S,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.Sf),t.Y36(F.v),t.Y36(p.sK),t.Y36(j.o),t.Y36(m.F0),t.Y36(N.N_))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-listing"]],decls:13,vars:17,consts:[["nz-row","","id","listing"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[1,"head","mb-5"],["nz-button","","routerLink","/host/create-listing",1,"btn"],["nz-col","",1,"content-wrapper","m-auto",3,"nzXs","nzLg"],[4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],["type","property",3,"propertyData"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,i){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"div",4),t.YNc(10,X,5,10,"ng-container",5),t.YNc(11,R,2,5,"div",6),t.YNc(12,V,4,1,"div",7),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("nzXs",t.DdM(13,x))("nzLg",t.DdM(14,_)),t.xp6(3),t.Oqu(t.lcZ(5,9,"ListingPage.Listing")),t.xp6(3),t.hij(" + ",t.lcZ(8,11,"ListingPage.CreateListing")," "),t.xp6(2),t.Q6J("nzXs",t.DdM(15,x))("nzLg",t.DdM(16,_)),t.xp6(1),t.Q6J("ngIf",!i.loading&&(null==i.listingData?null:i.listingData.length)),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.listingData.length<=0),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[h.SK,h.t3,z.ix,C.dQ,v.w,m.rH,d.O5,d.sg,Q.Z,Y.dE,E.s,L.Ls,B.W],pipes:[p.X$],styles:["#listing[_ngcontent-%COMP%]{padding:50px 24px 20px}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:30px;color:var(--bs-dark)}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}#listing[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{min-height:70vh}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}.loader-wrapper[_ngcontent-%COMP%]{width:100%;justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.empty-state[_ngcontent-%COMP%]{width:100%}  #listing .ant-pagination-next .ant-pagination-item-link,   #listing .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #listing .ant-pagination-item a,   #listing .ant-pagination-item:focus-visible a,   #listing .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}"]}),e})()},{path:"view/:id",component:y.f}];let W=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),e})();var G=o(5326);let K=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,G.m,W,P.P,p.aw,c.u5,c.UX]]}),e})()}}]);