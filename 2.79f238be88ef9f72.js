"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[2],{2002:(ue,b,s)=>{s.r(b),s.d(b,{SearchResultModule:()=>ge});var p=s(3075),d=s(9808),h=s(1062),S=s(5858),T=s(5326),g=s(4239),z=s(727),x=s(2340),e=s(5e3),M=s(6010),D=s(5001),Z=s(6952),A=s(9592),F=s(9439),m=s(1894),w=s(5439),k=s(279),R=s(4767),y=s(8054),O=s(2905),_=s(3640),J=s(8957),I=s(6042),L=s(2643),f=s(2683),C=s(3087),U=s(6462);function Y(i,o){if(1&i&&e._UZ(0,"nz-option",12),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("nzValue",t[n.lang])("nzLabel",t[n.lang])}}function N(i,o){if(1&i&&e._UZ(0,"nz-option",12),2&i){const t=o.$implicit;e.Q6J("nzValue",null==t?null:t.id)("nzLabel",t.property_type)}}function Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",33),e.NdJ("change",function(a){const l=e.CHM(t).$implicit;return e.oxw(2).onAmenitiesChange(a,l,l.id)}),e.qZA(),e.TgZ(2,"label",34),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.checked)("value",t.id)("id",t.name),e.xp6(1),e.Q6J("for",t.name),e.xp6(1),e.Oqu(t.name)}}function H(i,o){1&i&&e._UZ(0,"i",35)}function j(i,o){1&i&&e._UZ(0,"i",36)}function V(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",33),e.NdJ("change",function(a){const l=e.CHM(t).$implicit;return e.oxw(2).onRulesChange(a,l,l.id)}),e.qZA(),e.TgZ(2,"label",34),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.checked)("value",t.id)("id",t.rule),e.xp6(1),e.Q6J("for",t.rule),e.xp6(1),e.Oqu(t.rule)}}function B(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"p",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"nz-slider",15),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().rangSlider=a}),e.qZA()(),e.TgZ(6,"div",16)(7,"p",17),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Q,4,5,"div",18),e.qZA(),e.TgZ(11,"div",19)(12,"div",20)(13,"p",21),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",22)(17,"button",23)(18,"i",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().counter("minus")}),e.qZA()(),e.TgZ(19,"span"),e._uU(20),e.qZA(),e.TgZ(21,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().counter("add")}),e._UZ(22,"i",26),e.qZA()()()(),e.TgZ(23,"div",27)(24,"p",14),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",28)(28,"div",29)(29,"nz-switch",30),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().flexibility=a}),e.qZA(),e.YNc(30,H,1,0,"ng-template",null,31,e.W1O),e.YNc(32,j,1,0,"ng-template",null,32,e.W1O),e.qZA()()(),e.TgZ(34,"div",16)(35,"p",17),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,V,4,5,"div",18),e.qZA(),e.BQk()}if(2&i){const t=e.MAs(31),n=e.MAs(33),a=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,15,"SearchResultsPage.Budget")),e.xp6(2),e.Q6J("ngModel",a.rangSlider)("nzMarks",a.marks)("nzMax",8e3),e.xp6(3),e.hij(" ",e.lcZ(9,17,"SearchResultsPage.Amenities")," "),e.xp6(2),e.Q6J("ngForOf",a.amenitiesData),e.xp6(4),e.Oqu(e.lcZ(15,19,"SearchResultsPage.Guests")),e.xp6(3),e.Q6J("disabled",0==a.countGuests),e.xp6(3),e.Oqu(a.countGuests),e.xp6(5),e.hij(" ",e.lcZ(26,21,"SearchResultsPage.CancellationFlexibility")," "),e.xp6(4),e.Q6J("ngModel",a.flexibility)("nzCheckedChildren",t)("nzUnCheckedChildren",n),e.xp6(7),e.hij(" ",e.lcZ(37,23,"SearchResultsPage.Rules")," "),e.xp6(2),e.Q6J("ngForOf",a.houseRulesData)}}function E(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleClear()}),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleOk()}),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"SearchResultsPage.ClearAll")),e.xp6(2),e.Q6J("nzLoading",t.isConfirmLoading),e.xp6(1),e.hij(" ",e.lcZ(7,5,"SearchResultsPage.Apply")," ")}}const $=function(i,o){return[i,o]};let W=(()=>{class i{constructor(t,n,a,r,l,c){this.translateService=t,this.commonService=n,this.amenitiesService=a,this.houseRulesService=r,this.router=l,this.route=c,this.filter={city:void 0,property_type:void 0,start_date:"",end_date:"",page:1,pageSize:10},this.date=null,this.isVisible=!1,this.isConfirmLoading=!1,this.rangSlider=0,this.marks={0:"0",500:"500",2e3:{label:"<span>500-1000</span>"},5e3:{label:"<span>1000-5000</span>"},8e3:{label:"<strong>5000<</strong>"}},this.adultsCount=1,this.childrenCount=1,this.startDatePlaceholder="",this.endDatePlaceholder="",this.citiesData=[],this.amenitiesData=[],this.amenitiesId=[],this.rulesHouseId=[],this.houseRulesData=[],this.citiesDataClone=[],this.flexibility=!1,this.countGuests=0,this.lang=x.N.lang,this.propertyTypesData=[],this.filterChanged=new e.vpe,this.subscriptions=new z.w0,this.dateFormControl=new p.NI,this.disabledDate=v=>v<new Date}ngOnInit(){this.updateFilter(),this.handleDatePlaceholder(),this.fetchAllCities(),this.fetchAllPropertyTypes(),this.fetchAllAmenities(),this.fetchAllHouseRules(),this.handleDateChange()}updateFilter(){if(this.filter=Object.assign(Object.assign({},this.filter),this.route.snapshot.queryParams),this.filter.start_date&&this.filter.end_date){const[t,n,a]=this.filter.start_date.split("-"),[r,l,c]=this.filter.end_date.split("-");this.selectedDate=[new Date(`${n}-${t}-${a}`),new Date(`${l}-${r}-${c}`)],this.dateFormControl.setValue(this.selectedDate)}}handleDatePlaceholder(){this.startDatePlaceholder=this.translateService.instant("HomePage.StartDate"),this.endDatePlaceholder=this.translateService.instant("HomePage.EndDate")}handleDateChange(){this.dateFormControl.valueChanges.subscribe(t=>{var n;this.selectedDate=t,(null===(n=this.selectedDate)||void 0===n?void 0:n.length)?(this.filter.start_date=w(this.selectedDate[0]).format("DD-MM-YYYY"),this.filter.end_date=w(this.selectedDate[1]).format("DD-MM-YYYY"),this.emitFilterValue()):null!=this.selectedDate&&(this.filter.start_date="",this.filter.end_date="",this.emitFilterValue())})}fetchAllCities(){this.subscriptions.add(this.commonService.fetchAllCities().subscribe(t=>{var n;t.successful&&(this.citiesData=null===(n=null==t?void 0:t.cities)||void 0===n?void 0:n.filter(a=>(null==a?void 0:a.count)>0),this.citiesDataClone=[...this.citiesData])},t=>{var n;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}fetchAllAmenities(){this.subscriptions.add(this.amenitiesService.getAmenities().subscribe({next:t=>{this.amenitiesData=t.data,this.prepareAmenitiesData()}}))}prepareAmenitiesData(){this.amenitiesData=this.amenitiesData.map(t=>Object.assign(Object.assign({},t),{checked:!1}))}fetchAllHouseRules(){this.subscriptions.add(this.houseRulesService.getRulesHouse().subscribe({next:t=>{this.houseRulesData=t.data,this.prepareRulesData()}}))}prepareRulesData(){this.houseRulesData=this.houseRulesData.map(t=>Object.assign(Object.assign({},t),{checked:!1}))}onSearchInCities(t){var n;this.citiesData=this.citiesDataClone,(null===(n=null==t?void 0:t.trim())||void 0===n?void 0:n.length)>1&&(this.citiesData=this.citiesData.filter(a=>{var r,l;return(null===(r=null==a?void 0:a.ar)||void 0===r?void 0:r.toLowerCase().includes(t.toLowerCase()))||(null===(l=null==a?void 0:a.en)||void 0===l?void 0:l.toLowerCase().includes(t.toLowerCase()))}))}fetchAllPropertyTypes(){this.subscriptions.add(this.commonService.fetchAllPropertyTypes().subscribe(t=>{(null==t?void 0:t.successful)&&(this.propertyTypesData=t.data)},t=>{var n;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}ngOnChanges(t){}onChange(t){console.log("onChange: ",t)}showModal(){this.isVisible=!0}handleOk(){}handleClear(){this.prepareAmenitiesData(),this.prepareRulesData(),this.amenitiesId=[],this.countGuests=0,this.rulesHouseId=[],this.flexibility=!1,this.rangSlider=0}handleCancel(){this.isVisible=!1}onAmenitiesChange(t,n,a){if(1==t.target.checked)n.checked=!0,this.amenitiesId.push(a);else{const r=this.amenitiesId.findIndex(l=>l===a);n.checked=!1,this.amenitiesId.splice(r,1)}}onRulesChange(t,n,a){if(1==t.target.checked)n.checked=!0,this.rulesHouseId.push(a);else{const r=this.amenitiesId.findIndex(l=>l===a);n.checked=!1,this.rulesHouseId.splice(r,1)}}counter(t){"add"===t?this.countGuests++:this.countGuests--}cityCompareWith(t,n){return t===n}typeCompareWith(t,n){return t==n}emitFilterValue(){this.router.navigate(["/search-result"],{queryParams:this.filter}),this.filterChanged.emit(this.filter)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.sK),e.Y36(M.v),e.Y36(k.c),e.Y36(R._),e.Y36(g.F0),e.Y36(g.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-filter"]],outputs:{filterChanged:"filterChanged"},features:[e.TTD],decls:23,vars:39,consts:[[1,"filter-wrapper","row","align-items-center","mt-3","g-md-0"],[1,"col-lg-3","col-md-6","mb-3"],["nzAllowClear","","nzShowSearch","","nzServerSearch","","nzAllowClear","",1,"city-select",3,"ngModel","compareWith","nzPlaceHolder","ngModelChange","nzOnSearch"],["nzValue","",3,"nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"mb-3","col-lg-3","col-md-6"],["nzBorderless","","nzAllowClear","",1,"type-select",3,"ngModel","compareWith","nzPlaceHolder","ngModelChange"],["nzBorderless","","nzFormat","dd-MM-YYYY",1,"date-picker",3,"nzDisabledDate","formControl","nzPlaceHolder"],[1,"filter-icon","col-lg-3","col-md-6"],["nzWidth","700px",3,"nzVisible","nzOkText","nzTitle","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["class","modal-footer",4,"nzModalFooter"],[3,"nzValue","nzLabel"],[1,"group"],[1,"label"],["nzIncluded","",3,"ngModel","nzMarks","nzMax","ngModelChange"],[1,"group","selector"],[1,"label","d-block","mb-3","w-100"],[4,"ngFor","ngForOf"],[1,"group","guests-group"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"label","mb-0"],[1,"input-wrapper"],["nz-button","","nzType","primary","nzShape","circle",1,"me-3","d-inline-block",3,"disabled"],["nz-icon","","nzType","minus","nzTheme","outline",3,"click"],["nz-button","","nzType","primary","nzShape","circle",1,"ms-3","me-0","d-inline-block",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"group","switch-group"],[1,"switch-wrapper"],[1,"switch"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","ngModelChange"],["checkedTemplate",""],["unCheckedTemplate",""],["type","checkbox",1,"label",3,"checked","value","id","change"],[3,"for"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"],[1,"modal-footer"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nz-select",2),e.NdJ("ngModelChange",function(r){return n.filter.city=r})("nzOnSearch",function(r){return n.onSearchInCities(r)})("ngModelChange",function(){return n.emitFilterValue()}),e.ALo(3,"translate"),e._UZ(4,"nz-option",3),e.ALo(5,"translate"),e.YNc(6,Y,1,2,"nz-option",4),e.qZA()(),e.TgZ(7,"div",5)(8,"nz-select",6),e.NdJ("ngModelChange",function(r){return n.filter.property_type=r})("ngModelChange",function(){return n.emitFilterValue()}),e.ALo(9,"translate"),e._UZ(10,"nz-option",3),e.ALo(11,"translate"),e.YNc(12,N,1,2,"nz-option",4),e.qZA()(),e.TgZ(13,"div",5),e._UZ(14,"nz-range-picker",7),e.ALo(15,"translate"),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"div",8),e.qZA(),e.TgZ(18,"nz-modal",9),e.NdJ("nzVisibleChange",function(r){return n.isVisible=r})("nzOnCancel",function(){return n.handleCancel()}),e.ALo(19,"translate"),e.ALo(20,"translate"),e.YNc(21,B,39,25,"ng-container",10),e.YNc(22,E,8,7,"div",11),e.qZA()),2&t&&(e.xp6(2),e.ekj("ant-select-rtl","ar"==n.lang),e.s9C("nzPlaceHolder",e.lcZ(3,20,"HomePage.ChooseCity")),e.Q6J("ngModel",n.filter.city)("compareWith",n.cityCompareWith),e.xp6(2),e.s9C("nzLabel",e.lcZ(5,22,"HomePage.AllCities")),e.xp6(2),e.Q6J("ngForOf",n.citiesData),e.xp6(2),e.ekj("ant-select-rtl","ar"==n.lang),e.s9C("nzPlaceHolder",e.lcZ(9,24,"HomePage.PropertyType")),e.Q6J("ngModel",n.filter.property_type)("compareWith",n.typeCompareWith),e.xp6(2),e.s9C("nzLabel",e.lcZ(11,26,"HomePage.AllTypes")),e.xp6(2),e.Q6J("ngForOf",n.propertyTypesData),e.xp6(2),e.Q6J("nzDisabledDate",n.disabledDate)("formControl",n.dateFormControl)("nzPlaceHolder",e.WLB(36,$,e.lcZ(15,28,"HomePage.CheckIn"),e.lcZ(16,30,"HomePage.CheckOut"))),e.xp6(4),e.s9C("nzOkText",e.lcZ(19,32,"SearchResultsPage.Apply")),e.s9C("nzTitle",e.lcZ(20,34,"SearchResultsPage.MoreFilters")),e.Q6J("nzVisible",n.isVisible))},directives:[y.Vq,p.JJ,p.On,y.Ip,d.sg,O.uw,O.wS,p.oH,_.du,_.Hf,J.jS,I.ix,L.dQ,f.w,C.Ls,U.i,_.Uh],pipes:[h.X$],styles:[".city-select[_ngcontent-%COMP%], .type-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{width:90%;background-color:#eee!important}@media (max-width: 991px){.city-select[_ngcontent-%COMP%], .type-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{margin-inline:auto;display:flex}}@media (max-width: 991px){.filter-wrapper[_ngcontent-%COMP%]{justify-content:space-around!important}}.filter-icon[_ngcontent-%COMP%]{text-align:end}.filter-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:transparent!important;color:var(--bs-primary)!important}.filter-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.group[_ngcontent-%COMP%]{padding-bottom:3em;margin-bottom:2em;border-bottom:2px solid var(--bs-gray-300)}.group.selector[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin-inline-end:10px;margin-block-end:10px;height:32px;justify-content:center;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{color:var(--bs-primary)}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;height:0;width:0}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);border-color:transparent}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #d9d9d9;padding:5px 15px;width:100%;height:100%;font-size:14px;cursor:pointer;transition:color .3s,background-color .3s,border-color .3s,box-shadow .3s}.group[_ngcontent-%COMP%]:last-of-type{border-bottom:0;margin-bottom:0;padding-bottom:1em}.group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:var(--bs-dark);margin-bottom:2em}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-inline-end:1em;margin-bottom:1em;border-radius:2px}.switch-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-bottom:0}.switch-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .switch-group[_ngcontent-%COMP%]   .switch-wrapper[_ngcontent-%COMP%]{display:inline-block}.guests-group[_ngcontent-%COMP%]{padding-bottom:1em;margin-bottom:2em}.guests-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:19px}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]{padding-right:1em;padding-left:1em;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:1em}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;margin-bottom:0}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:15%}@media (max-width: 1024px){.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:25%}}@media (max-width: 576px){.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:45%}}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.modal-footer[_ngcontent-%COMP%]{justify-content:space-between}.modal-footer[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-dark);border-bottom:2px solid var(--bs-dark)}  .filter-wrapper [lang=ar] nz-option-item{text-align:end}  .filter-wrapper .city-select .ant-select-selector,   .filter-wrapper .type-select .ant-select-selector{border-color:#eee!important;background-color:#eee!important}  .filter-wrapper .ant-slider-dot-active,   .filter-wrapper .ant-slider-handle{border-color:var(--bs-primary)!important}  .filter-wrapper .ant-slider-track{background-color:var(--bs-primary)!important}  .filter-wrapper .radio-group .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled){color:var(--bs-white)!important;background-color:var(--bs-primary)!important;border-color:var(--bs-primary)!important}  .filter-wrapper .radio-group .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):before{background-color:var(--bs-primary)!important}  .filter-wrapper .radio-group .ant-radio-button-wrapper:hover{color:var(--bs-primary)!important}  .filter-wrapper .switch-group .ant-switch-inner{line-height:.5em}  .filter-wrapper .switch-group .ant-switch-checked{background-color:var(--bs-primary)!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}"]}),i})();var u=s(9576);function G(i,o){if(1&i&&(e.TgZ(0,"span",13),e._uU(1),e._UZ(2,"span",14),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.rate," ")}}function q(i,o){if(1&i&&(e.TgZ(0,"agm-marker",3)(1,"agm-info-window",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"span",8),e._uU(6),e.qZA(),e.TgZ(7,"div",9),e.YNc(8,G,3,1,"span",10),e.TgZ(9,"span",11),e._uU(10),e.TgZ(11,"span",12),e._uU(12),e.ALo(13,"translate"),e.ALo(14,"translate"),e.qZA()()()()()()()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("iconUrl",n.marker.icon)("agmFitBounds",!0)("latitude",t.latitude)("longitude",t.longitude),e.xp6(1),e.Q6J("isOpen",!0),e.xp6(5),e.Oqu(null==t?null:t.name),e.xp6(2),e.Q6J("ngIf",null==t?null:t.rate),e.xp6(2),e.hij("",null==t?null:t.base_price," "),e.xp6(2),e.AsE(" ",e.lcZ(13,10,"CreateListing.SAR"),"/",e.lcZ(14,12,"PlaceDetails.Night")," ")}}let X=(()=>{class i{constructor(){this.zoom=16,this.minZoom=16,this.maxZoom=16,this.marker={icon:"../../../../../../assets/imgs/383170_caret_down_icon.svg"},this.icon="assets/imgs/map-pin.svg"}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-map"]],inputs:{placesData:"placesData"},decls:3,vars:6,consts:[["nz-row","",1,"filter-wrapper","mt-3","mb-5"],["zoomControl","true",3,"fitBounds","latitude","longitude","zoom","disableDefaultUI"],[3,"iconUrl","agmFitBounds","latitude","longitude",4,"ngFor","ngForOf"],[3,"iconUrl","agmFitBounds","latitude","longitude"],[3,"isOpen"],[1,"info-window","d-flex","flex-column","align-items-center"],[1,"d-flex","align-items-center"],[1,"px-1","place"],[1,"title-place"],[1,"w-100","rate-price-wrapper"],["class","number-rate",4,"ngIf"],[1,"title-place-2"],[1,"text"],[1,"number-rate"],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"agm-map",1),e.YNc(2,q,15,14,"agm-marker",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("fitBounds",!0)("latitude",n.placesData[0].latitude)("longitude",n.placesData[0].longitude)("zoom",n.zoom)("disableDefaultUI",!1),e.xp6(1),e.Q6J("ngForOf",n.placesData))},directives:[m.SK,u.SA,d.sg,u.pt,u.NC,u.d,d.O5,f.w,C.Ls],pipes:[h.X$],styles:["agm-map[_ngcontent-%COMP%]{width:100%;height:25em;border-radius:5px}  .gm-style .gm-ui-hover-effect{display:none!important}  .gm-style .gm-style-iw{padding:0}  .gm-style .gm-style-iw-d{overflow:auto!important;padding:5px}  .ant-rate-disabled .ant-rate-star{font-size:16px}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]{width:110px}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .rate-price-wrapper[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:10px}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .number-rate[_ngcontent-%COMP%]{padding-block:5px;font-weight:500;color:var(--bs-dark);font-size:12px;display:inline-block}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .number-rate[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{color:var(--font-rate);font-size:12px;padding-inline-start:3px;vertical-align:baseline}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .title-place[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:var(--bs-dark);text-align:start;display:block;text-overflow:ellipsis;width:100px;overflow:hidden;white-space:nowrap}.info-window[_ngcontent-%COMP%]   .place[_ngcontent-%COMP%]   .title-place-2[_ngcontent-%COMP%]{padding:5px 0;font-weight:500;color:var(--bs-dark);font-size:12px;display:block}"]}),i})();var K=s(7413),ee=s(1711),te=s(5181),ne=s(9590);const P=function(){return{span:24}},ie=function(){return{span:6}};function ae(i,o){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"app-place-card",12),e.qZA()),2&i){const t=o.$implicit;e.Q6J("nzXs",e.DdM(3,P))("nzLg",e.DdM(4,ie)),e.xp6(1),e.Q6J("cardData",t)}}function re(i,o){if(1&i){const t=e.EpF();e.ynx(0),e._UZ(1,"app-search-map",6),e.TgZ(2,"div",7),e.YNc(3,ae,2,5,"div",8),e.qZA(),e.TgZ(4,"div",9)(5,"nz-pagination",10),e.NdJ("nzPageIndexChange",function(a){return e.CHM(t),e.oxw().pageChanged(a)}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placesData",t.resultData),e.xp6(2),e.Q6J("ngForOf",t.resultData),e.xp6(2),e.ekj("ant-pagination-rtl","ar"==t.lang),e.Q6J("nzPageIndex",t.filterCriteria.page)("nzTotal",t.totalResults)("nzPageSize",10)}}function oe(i,o){if(1&i&&e._UZ(0,"app-empty-state",13),2&i){const t=e.oxw();e.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function se(i,o){1&i&&e._UZ(0,"span",17)}function le(i,o){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,se,1,0,"ng-template",null,15,e.W1O),e._UZ(3,"nz-spin",16),e.qZA()),2&i){const t=e.MAs(2);e.xp6(3),e.Q6J("nzIndicator",t)}}const ce=function(){return{span:20}},pe=[{path:"",component:(()=>{class i{constructor(t,n,a,r,l,c,v,he){this.commonService=t,this.searchResultService=n,this.route=a,this.router=r,this.authService=l,this.translateService=c,this.cookieService=v,this.configService=he,this.lang=x.N.lang,this.filterCriteria={city:void 0,property_type:void 0,start_date:void 0,end_date:void 0,page:1,pageSize:10},this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.resultData=[],this.loading=!1,this.markersData=[],this.subscriptions=new z.w0,this.commonService.handleTravellerPage()}ngOnInit(){this.getUserData(),this.checkIfUserIsLoggedIn(),this.filterCriteria=Object.assign(Object.assign({},this.filterCriteria),this.route.snapshot.queryParams),this.handleEmptyData()}checkIfUserIsLoggedIn(){this.authService.userLoggedIn.subscribe(t=>{t&&this.getUserData()})}getUserData(){this.cookieService.get("userData")&&(this.userData=JSON.parse(this.cookieService.get("userData"))),this.fetchSearchResults()}prepareFilterCriteria(){const t={page:this.filterCriteria.page,pageSize:this.filterCriteria.pageSize};return this.filterCriteria.city&&(t.city=this.filterCriteria.city),this.filterCriteria.property_type&&(t.property_type=this.filterCriteria.property_type),this.filterCriteria.start_date&&(t.start_date=this.filterCriteria.start_date),this.filterCriteria.end_date&&(t.end_date=this.filterCriteria.end_date),t}fetchSearchResults(){var t;const n=(null===(t=this.userData)||void 0===t?void 0:t.id)?this.searchResultService.fetchLoggedInSearchResults(this.prepareFilterCriteria()):this.searchResultService.fetchSearchResults(this.prepareFilterCriteria());this.loading=!0,this.subscriptions.add(n.subscribe(a=>{var r,l,c;(null==a?void 0:a.successful)&&(this.resultData=null===(r=null==a?void 0:a.properties)||void 0===r?void 0:r.data,this.totalResults=null===(c=null===(l=null==a?void 0:a.properties)||void 0===l?void 0:l.meta)||void 0===c?void 0:c.total),this.loading=!1},a=>{var r;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message)}))}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.NoResultData"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:""}}pageChanged(t){this.filterCriteria.page=t,this.fetchSearchResults()}onChange(t){console.log("onChange: ",t)}onFilterChanged(t){this.filterCriteria=t,this.fetchSearchResults()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.v),e.Y36(D.J),e.Y36(g.gz),e.Y36(g.F0),e.Y36(Z.e),e.Y36(h.sK),e.Y36(A.N_),e.Y36(F.jY))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-result"]],decls:6,vars:7,consts:[["nz-row","",1,"search-result-wrapper","mt-4","mb-5"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[3,"filterChanged"],[4,"ngIf"],[3,"title","text","icon","withBtn","btnText",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[3,"placesData"],["nz-row","",1,"result-cards-wrapper","mt-3"],["class","mb-3","nz-col","",3,"nzXs","nzLg",4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],["nz-col","",1,"mb-3",3,"nzXs","nzLg"],[3,"cardData"],[3,"title","text","icon","withBtn","btnText"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"app-search-filter",2),e.NdJ("filterChanged",function(r){return n.onFilterChanged(r)}),e.qZA(),e.YNc(3,re,6,7,"ng-container",3),e.YNc(4,oe,1,5,"app-empty-state",4),e.YNc(5,le,4,1,"div",5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("nzXs",e.DdM(5,P))("nzLg",e.DdM(6,ce)),e.xp6(2),e.Q6J("ngIf",!n.loading&&(null==n.resultData?null:n.resultData.length)),e.xp6(1),e.Q6J("ngIf",!(n.loading||null!=n.resultData&&n.resultData.length)),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[m.SK,m.t3,W,d.O5,X,d.sg,K.$,ee.dE,te.s,f.w,C.Ls,ne.W],styles:[".search-result-wrapper[_ngcontent-%COMP%]{min-height:70vh}.search-result-wrapper[_ngcontent-%COMP%]   .filter-wrapper[_ngcontent-%COMP%]   app-search-filter[_ngcontent-%COMP%]{width:100%}.result-cards-wrapper[_ngcontent-%COMP%]{justify-content:start;text-align:start}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}  .search-result-wrapper .ant-pagination-next .ant-pagination-item-link,   .search-result-wrapper .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  .search-result-wrapper .ant-pagination-item a,   .search-result-wrapper .ant-pagination-item:focus-visible a,   .search-result-wrapper .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}"]}),i})()}];let de=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.Bz.forChild(pe)],g.Bz]}),i})(),ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,de,S.P,T.m,h.aw,p.u5,p.UX,u.su]]}),i})()}}]);