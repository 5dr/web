"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[2],{2002:(de,C,s)=>{s.r(C),s.d(C,{SearchResultModule:()=>pe});var p=s(3075),g=s(9808),u=s(1062),P=s(978),w=s(5326),d=s(7152),v=s(727),e=s(5e3),z=s(6010),D=s(5001),T=s(6952),Z=s(9592),m=s(1894),A=s(2340),b=s(5439),F=s(279),k=s(4767),x=s(8054),y=s(2905),_=s(3640),R=s(8957),J=s(6042),I=s(2643),M=s(2683),O=s(3087),L=s(6462);function Y(i,r){if(1&i&&e._UZ(0,"nz-option",12),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("nzValue",t[n.lang])("nzLabel",t[n.lang])}}function N(i,r){if(1&i&&e._UZ(0,"nz-option",12),2&i){const t=r.$implicit;e.Q6J("nzValue",null==t?null:t.id)("nzLabel",t.property_type)}}function Q(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",33),e.NdJ("change",function(a){const l=e.CHM(t).$implicit;return e.oxw(2).onAmenitiesChange(a,l,l.id)}),e.qZA(),e.TgZ(2,"label",34),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("checked",t.checked)("value",t.id)("id",t.name),e.xp6(1),e.Q6J("for",t.name),e.xp6(1),e.Oqu(t.name)}}function U(i,r){1&i&&e._UZ(0,"i",35)}function H(i,r){1&i&&e._UZ(0,"i",36)}function j(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",33),e.NdJ("change",function(a){const l=e.CHM(t).$implicit;return e.oxw(2).onRulesChange(a,l,l.id)}),e.qZA(),e.TgZ(2,"label",34),e._uU(3),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("checked",t.checked)("value",t.id)("id",t.rule),e.xp6(1),e.Q6J("for",t.rule),e.xp6(1),e.Oqu(t.rule)}}function V(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"p",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"nz-slider",15),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().rangSlider=a}),e.qZA()(),e.TgZ(6,"div",16)(7,"p",17),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Q,4,5,"div",18),e.qZA(),e.TgZ(11,"div",19)(12,"div",20)(13,"p",21),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",22)(17,"button",23)(18,"i",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().counter("minus")}),e.qZA()(),e.TgZ(19,"span"),e._uU(20),e.qZA(),e.TgZ(21,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().counter("add")}),e._UZ(22,"i",26),e.qZA()()()(),e.TgZ(23,"div",27)(24,"p",14),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",28)(28,"div",29)(29,"nz-switch",30),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().flexibility=a}),e.qZA(),e.YNc(30,U,1,0,"ng-template",null,31,e.W1O),e.YNc(32,H,1,0,"ng-template",null,32,e.W1O),e.qZA()()(),e.TgZ(34,"div",16)(35,"p",17),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,j,4,5,"div",18),e.qZA(),e.BQk()}if(2&i){const t=e.MAs(31),n=e.MAs(33),a=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,15,"SearchResultsPage.Budget")),e.xp6(2),e.Q6J("ngModel",a.rangSlider)("nzMarks",a.marks)("nzMax",8e3),e.xp6(3),e.hij(" ",e.lcZ(9,17,"SearchResultsPage.Amenities")," "),e.xp6(2),e.Q6J("ngForOf",a.amenitiesData),e.xp6(4),e.Oqu(e.lcZ(15,19,"SearchResultsPage.Guests")),e.xp6(3),e.Q6J("disabled",0==a.countGuests),e.xp6(3),e.Oqu(a.countGuests),e.xp6(5),e.hij(" ",e.lcZ(26,21,"SearchResultsPage.CancellationFlexibility")," "),e.xp6(4),e.Q6J("ngModel",a.flexibility)("nzCheckedChildren",t)("nzUnCheckedChildren",n),e.xp6(7),e.hij(" ",e.lcZ(37,23,"SearchResultsPage.Rules")," "),e.xp6(2),e.Q6J("ngForOf",a.houseRulesData)}}function $(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleClear()}),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleOk()}),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"SearchResultsPage.ClearAll")),e.xp6(2),e.Q6J("nzLoading",t.isConfirmLoading),e.xp6(1),e.hij(" ",e.lcZ(7,5,"SearchResultsPage.Apply")," ")}}const B=function(i,r){return[i,r]};let E=(()=>{class i{constructor(t,n,a,o,l,c){this.translateService=t,this.commonService=n,this.amenitiesService=a,this.houseRulesService=o,this.router=l,this.route=c,this.filter={city:void 0,property_type:void 0,start_date:"",end_date:"",page:1,pageSize:10},this.date=null,this.isVisible=!1,this.isConfirmLoading=!1,this.rangSlider=0,this.marks={0:"0",500:"500",2e3:{label:"<span>500-1000</span>"},5e3:{label:"<span>1000-5000</span>"},8e3:{label:"<strong>5000<</strong>"}},this.adultsCount=1,this.childrenCount=1,this.startDatePlaceholder="",this.endDatePlaceholder="",this.citiesData=[],this.amenitiesData=[],this.amenitiesId=[],this.rulesHouseId=[],this.houseRulesData=[],this.citiesDataClone=[],this.flexibility=!1,this.countGuests=0,this.lang=A.N.lang,this.propertyTypesData=[],this.filterChanged=new e.vpe,this.subscriptions=new v.w0,this.dateFormControl=new p.NI,this.disabledDate=f=>f<new Date}ngOnInit(){this.updateFilter(),this.handleDatePlaceholder(),this.fetchAllCities(),this.fetchAllPropertyTypes(),this.fetchAllAmenities(),this.fetchAllHouseRules(),this.handleDateChange()}updateFilter(){if(this.filter=Object.assign(Object.assign({},this.filter),this.route.snapshot.queryParams),console.log(this.filter.end_date),this.filter.start_date&&this.filter.end_date){const[t,n,a]=this.filter.start_date.split("-"),[o,l,c]=this.filter.end_date.split("-");console.log(o),console.log(l),console.log(new Date(`${n}-${t}-${a}`)),console.log(new Date(`${l}-${o}-${c}`)),this.selectedDate=[new Date(`${n}-${t}-${a}`),new Date(`${l}-${o}-${c}`)],console.log(this.selectedDate),this.dateFormControl.setValue(this.selectedDate)}}handleDatePlaceholder(){this.startDatePlaceholder=this.translateService.instant("HomePage.StartDate"),this.endDatePlaceholder=this.translateService.instant("HomePage.EndDate")}handleDateChange(){this.dateFormControl.valueChanges.subscribe(t=>{var n;this.selectedDate=t,(null===(n=this.selectedDate)||void 0===n?void 0:n.length)?(this.filter.start_date=b(this.selectedDate[0]).format("DD-MM-YYYY"),this.filter.end_date=b(this.selectedDate[1]).format("DD-MM-YYYY"),this.emitFilterValue()):null!=this.selectedDate&&(this.filter.start_date="",this.filter.end_date="",this.emitFilterValue())})}fetchAllCities(){this.subscriptions.add(this.commonService.fetchAllCities().subscribe(t=>{t.successful&&(this.citiesData=null==t?void 0:t.cities,this.citiesDataClone=t.cities)},t=>{var n;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}fetchAllAmenities(){this.subscriptions.add(this.amenitiesService.getAmenities().subscribe({next:t=>{this.amenitiesData=t.data,this.prepareAmenitiesData()}}))}prepareAmenitiesData(){this.amenitiesData=this.amenitiesData.map(t=>Object.assign(Object.assign({},t),{checked:!1}))}fetchAllHouseRules(){this.subscriptions.add(this.houseRulesService.getRulesHouse().subscribe({next:t=>{this.houseRulesData=t.data,this.prepareRulesData()}}))}prepareRulesData(){this.houseRulesData=this.houseRulesData.map(t=>Object.assign(Object.assign({},t),{checked:!1}))}onSearchInCities(t){var n;this.citiesData=this.citiesDataClone,(null===(n=null==t?void 0:t.trim())||void 0===n?void 0:n.length)>1&&(this.citiesData=this.citiesData.filter(a=>{var o,l;return(null===(o=null==a?void 0:a.ar)||void 0===o?void 0:o.toLowerCase().includes(t.toLowerCase()))||(null===(l=null==a?void 0:a.en)||void 0===l?void 0:l.toLowerCase().includes(t.toLowerCase()))}))}fetchAllPropertyTypes(){this.subscriptions.add(this.commonService.fetchAllPropertyTypes().subscribe(t=>{(null==t?void 0:t.successful)&&(this.propertyTypesData=t.data)},t=>{var n;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}ngOnChanges(t){}onChange(t){console.log("onChange: ",t)}showModal(){this.isVisible=!0}handleOk(){console.log({range:this.rangSlider,amenities:this.amenitiesId,rulesHouse:this.rulesHouseId,flexibility:this.flexibility,guests:this.countGuests})}handleClear(){this.prepareAmenitiesData(),this.prepareRulesData(),this.amenitiesId=[],this.countGuests=0,this.rulesHouseId=[],this.flexibility=!1,this.rangSlider=0}handleCancel(){this.isVisible=!1}onAmenitiesChange(t,n,a){if(1==t.target.checked)n.checked=!0,this.amenitiesId.push(a);else{const o=this.amenitiesId.findIndex(l=>l===a);n.checked=!1,this.amenitiesId.splice(o,1)}}onRulesChange(t,n,a){if(1==t.target.checked)n.checked=!0,this.rulesHouseId.push(a);else{const o=this.amenitiesId.findIndex(l=>l===a);n.checked=!1,this.rulesHouseId.splice(o,1)}}counter(t){"add"===t?this.countGuests++:this.countGuests--}cityCompareWith(t,n){return t===n}typeCompareWith(t,n){return t==n}emitFilterValue(){this.router.navigate(["/search-result"],{queryParams:this.filter}),this.filterChanged.emit(this.filter)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.sK),e.Y36(z.v),e.Y36(F.c),e.Y36(k._),e.Y36(d.F0),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-filter"]],outputs:{filterChanged:"filterChanged"},features:[e.TTD],decls:23,vars:35,consts:[[1,"filter-wrapper","row","align-items-center","mt-3","g-md-0"],[1,"col-lg-3","col-md-6","mb-3"],["nzAllowClear","","nzShowSearch","","nzServerSearch","","nzAllowClear","",1,"city-select",3,"ngModel","compareWith","nzPlaceHolder","ngModelChange","nzOnSearch"],["nzValue","",3,"nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"mb-3","col-lg-3","col-md-6"],["nzBorderless","","nzAllowClear","",1,"type-select",3,"ngModel","compareWith","nzPlaceHolder","ngModelChange"],["nzBorderless","","nzFormat","dd-MM-YYYY",1,"date-picker",3,"nzDisabledDate","formControl","nzPlaceHolder"],[1,"filter-icon","col-lg-3","col-md-6"],["nzWidth","700px",3,"nzVisible","nzOkText","nzTitle","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["class","modal-footer",4,"nzModalFooter"],[3,"nzValue","nzLabel"],[1,"group"],[1,"label"],["nzIncluded","",3,"ngModel","nzMarks","nzMax","ngModelChange"],[1,"group","selector"],[1,"label","d-block","mb-3","w-100"],[4,"ngFor","ngForOf"],[1,"group","guests-group"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"label","mb-0"],[1,"input-wrapper"],["nz-button","","nzType","primary","nzShape","circle",1,"me-3","d-inline-block",3,"disabled"],["nz-icon","","nzType","minus","nzTheme","outline",3,"click"],["nz-button","","nzType","primary","nzShape","circle",1,"ms-3","me-0","d-inline-block",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"group","switch-group"],[1,"switch-wrapper"],[1,"switch"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","ngModelChange"],["checkedTemplate",""],["unCheckedTemplate",""],["type","checkbox",1,"label",3,"checked","value","id","change"],[3,"for"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"],[1,"modal-footer"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nz-select",2),e.NdJ("ngModelChange",function(o){return n.filter.city=o})("nzOnSearch",function(o){return n.onSearchInCities(o)})("ngModelChange",function(){return n.emitFilterValue()}),e.ALo(3,"translate"),e._UZ(4,"nz-option",3),e.ALo(5,"translate"),e.YNc(6,Y,1,2,"nz-option",4),e.qZA()(),e.TgZ(7,"div",5)(8,"nz-select",6),e.NdJ("ngModelChange",function(o){return n.filter.property_type=o})("ngModelChange",function(){return n.emitFilterValue()}),e.ALo(9,"translate"),e._UZ(10,"nz-option",3),e.ALo(11,"translate"),e.YNc(12,N,1,2,"nz-option",4),e.qZA()(),e.TgZ(13,"div",5),e._UZ(14,"nz-range-picker",7),e.ALo(15,"translate"),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"div",8),e.qZA(),e.TgZ(18,"nz-modal",9),e.NdJ("nzVisibleChange",function(o){return n.isVisible=o})("nzOnCancel",function(){return n.handleCancel()}),e.ALo(19,"translate"),e.ALo(20,"translate"),e.YNc(21,V,39,25,"ng-container",10),e.YNc(22,$,8,7,"div",11),e.qZA()),2&t&&(e.xp6(2),e.s9C("nzPlaceHolder",e.lcZ(3,16,"HomePage.ChooseCity")),e.Q6J("ngModel",n.filter.city)("compareWith",n.cityCompareWith),e.xp6(2),e.s9C("nzLabel",e.lcZ(5,18,"HomePage.AllCities")),e.xp6(2),e.Q6J("ngForOf",n.citiesData),e.xp6(2),e.s9C("nzPlaceHolder",e.lcZ(9,20,"HomePage.PropertyType")),e.Q6J("ngModel",n.filter.property_type)("compareWith",n.typeCompareWith),e.xp6(2),e.s9C("nzLabel",e.lcZ(11,22,"HomePage.AllTypes")),e.xp6(2),e.Q6J("ngForOf",n.propertyTypesData),e.xp6(2),e.Q6J("nzDisabledDate",n.disabledDate)("formControl",n.dateFormControl)("nzPlaceHolder",e.WLB(32,B,e.lcZ(15,24,"HomePage.CheckIn"),e.lcZ(16,26,"HomePage.CheckOut"))),e.xp6(4),e.s9C("nzOkText",e.lcZ(19,28,"SearchResultsPage.Apply")),e.s9C("nzTitle",e.lcZ(20,30,"SearchResultsPage.MoreFilters")),e.Q6J("nzVisible",n.isVisible))},directives:[x.Vq,p.JJ,p.On,x.Ip,g.sg,y.uw,y.wS,p.oH,_.du,_.Hf,R.jS,J.ix,I.dQ,M.w,O.Ls,L.i,_.Uh],pipes:[u.X$],styles:[".city-select[_ngcontent-%COMP%], .type-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{width:90%;background-color:#eee!important}@media (max-width: 991px){.city-select[_ngcontent-%COMP%], .type-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{margin-inline:auto;display:flex}}@media (max-width: 991px){.filter-wrapper[_ngcontent-%COMP%]{justify-content:space-around!important}}.filter-icon[_ngcontent-%COMP%]{text-align:end}.filter-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:transparent!important;color:var(--bs-primary)!important}.filter-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.group[_ngcontent-%COMP%]{padding-bottom:3em;margin-bottom:2em;border-bottom:2px solid var(--bs-gray-300)}.group.selector[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin-inline-end:10px;margin-block-end:10px;height:32px;justify-content:center;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{color:var(--bs-primary)}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;height:0;width:0}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);border-color:transparent}.group.selector[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #d9d9d9;padding:5px 15px;width:100%;height:100%;font-size:14px;cursor:pointer;transition:color .3s,background-color .3s,border-color .3s,box-shadow .3s}.group[_ngcontent-%COMP%]:last-of-type{border-bottom:0;margin-bottom:0;padding-bottom:1em}.group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:var(--bs-dark);margin-bottom:2em}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-inline-end:1em;margin-bottom:1em;border-radius:2px}.switch-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-bottom:0}.switch-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .switch-group[_ngcontent-%COMP%]   .switch-wrapper[_ngcontent-%COMP%]{display:inline-block}.guests-group[_ngcontent-%COMP%]{padding-bottom:1em;margin-bottom:2em}.guests-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:19px}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]{padding-right:1em;padding-left:1em;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:1em}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;margin-bottom:0}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:15%}@media (max-width: 1024px){.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:25%}}@media (max-width: 576px){.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:45%}}.guests-group[_ngcontent-%COMP%]   .guest-type-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.modal-footer[_ngcontent-%COMP%]{justify-content:space-between}.modal-footer[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-dark);border-bottom:2px solid var(--bs-dark)}  [lang=ar] nz-option-item{text-align:end}  .city-select .ant-select-selector,   .type-select .ant-select-selector{border-color:#eee!important;background-color:#eee!important}  .ant-slider-dot-active,   .ant-slider-handle{border-color:var(--bs-primary)!important}  .ant-slider-track{background-color:var(--bs-primary)!important}  .radio-group .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled){color:var(--bs-white)!important;background-color:var(--bs-primary)!important;border-color:var(--bs-primary)!important}  .radio-group .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):before{background-color:var(--bs-primary)!important}  .radio-group .ant-radio-button-wrapper:hover{color:var(--bs-primary)!important}  .switch-group .ant-switch-inner{line-height:.5em}  .switch-group .ant-switch-checked{background-color:var(--bs-primary)!important}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}"]}),i})();var h=s(9576);function W(i,r){if(1&i&&(e.TgZ(0,"agm-marker",3)(1,"agm-info-window",4),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("agmFitBounds",!0)("latitude",t.latitude)("longitude",t.longitude),e.xp6(1),e.Q6J("isOpen",!0),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}let G=(()=>{class i{constructor(){this.zoom=16,this.minZoom=16,this.maxZoom=16,this.icon="assets/imgs/map-pin.svg"}ngOnInit(){}clickedMarker(t,n){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-map"]],inputs:{placesData:"placesData"},decls:3,vars:6,consts:[["nz-row","",1,"filter-wrapper","mt-3","mb-5"],["zoomControl","true",3,"fitBounds","latitude","longitude","zoom","disableDefaultUI"],[3,"agmFitBounds","latitude","longitude",4,"ngFor","ngForOf"],[3,"agmFitBounds","latitude","longitude"],[3,"isOpen"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"agm-map",1),e.YNc(2,W,3,5,"agm-marker",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("fitBounds",!0)("latitude",n.placesData[0].latitude)("longitude",n.placesData[0].longitude)("zoom",n.zoom)("disableDefaultUI",!1),e.xp6(1),e.Q6J("ngForOf",n.placesData))},directives:[m.SK,h.SA,g.sg,h.pt,h.NC,h.d],styles:["agm-map[_ngcontent-%COMP%]{width:100%;height:25em;border-radius:5px}  .gm-style .gm-ui-hover-effect{display:none!important}"]}),i})();var q=s(7413),X=s(1711),K=s(5181),ee=s(9590);const S=function(){return{span:24}},te=function(){return{span:6}};function ne(i,r){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"app-place-card",12),e.qZA()),2&i){const t=r.$implicit;e.Q6J("nzXs",e.DdM(3,S))("nzLg",e.DdM(4,te)),e.xp6(1),e.Q6J("cardData",t)}}function ie(i,r){if(1&i){const t=e.EpF();e.ynx(0),e._UZ(1,"app-search-map",6),e.TgZ(2,"div",7),e.YNc(3,ne,2,5,"div",8),e.qZA(),e.TgZ(4,"div",9)(5,"nz-pagination",10),e.NdJ("nzPageIndexChange",function(a){return e.CHM(t),e.oxw().pageChanged(a)}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("placesData",t.resultData),e.xp6(2),e.Q6J("ngForOf",t.resultData),e.xp6(2),e.Q6J("nzPageIndex",t.filterCriteria.page)("nzTotal",t.totalResults)("nzPageSize",10)}}function ae(i,r){if(1&i&&e._UZ(0,"app-empty-state",13),2&i){const t=e.oxw();e.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function oe(i,r){1&i&&e._UZ(0,"span",17)}function re(i,r){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,oe,1,0,"ng-template",null,15,e.W1O),e._UZ(3,"nz-spin",16),e.qZA()),2&i){const t=e.MAs(2);e.xp6(3),e.Q6J("nzIndicator",t)}}const se=function(){return{span:20}},le=[{path:"",component:(()=>{class i{constructor(t,n,a,o,l,c,f){this.commonService=t,this.searchResultService=n,this.route=a,this.router=o,this.authService=l,this.translateService=c,this.cookieService=f,this.filterCriteria={city:void 0,property_type:void 0,start_date:void 0,end_date:void 0,page:1,pageSize:10},this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.resultData=[],this.loading=!1,this.markersData=[],this.subscriptions=new v.w0}ngOnInit(){this.getUserData(),this.checkIfUserIsLoggedIn(),this.filterCriteria=Object.assign(Object.assign({},this.filterCriteria),this.route.snapshot.queryParams),this.handleEmptyData()}checkIfUserIsLoggedIn(){this.authService.userLoggedIn.subscribe(t=>{t&&this.getUserData()})}getUserData(){this.cookieService.get("userData")&&(this.userData=JSON.parse(this.cookieService.get("userData"))),console.log(this.userData),this.fetchSearchResults()}prepareFilterCriteria(){const t={page:this.filterCriteria.page,pageSize:this.filterCriteria.pageSize};return this.filterCriteria.city&&(t.city=this.filterCriteria.city),this.filterCriteria.property_type&&(t.property_type=this.filterCriteria.property_type),this.filterCriteria.start_date&&(t.start_date=this.filterCriteria.start_date),this.filterCriteria.end_date&&(t.end_date=this.filterCriteria.end_date),t}fetchSearchResults(){var t;const n=(null===(t=this.userData)||void 0===t?void 0:t.id)?this.searchResultService.fetchLoggedInSearchResults(this.prepareFilterCriteria()):this.searchResultService.fetchSearchResults(this.prepareFilterCriteria());this.loading=!0,this.subscriptions.add(n.subscribe(a=>{var o,l,c;(null==a?void 0:a.successful)&&(this.resultData=null===(o=null==a?void 0:a.properties)||void 0===o?void 0:o.data,this.totalResults=null===(c=null===(l=null==a?void 0:a.properties)||void 0===l?void 0:l.meta)||void 0===c?void 0:c.total),this.loading=!1},a=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==a?void 0:a.error)||void 0===o?void 0:o.message)}))}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.NoResultData"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:""}}pageChanged(t){this.filterCriteria.page=t,this.fetchSearchResults()}onChange(t){console.log("onChange: ",t)}onFilterChanged(t){this.filterCriteria=t,console.log(this.filterCriteria),this.fetchSearchResults()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(z.v),e.Y36(D.J),e.Y36(d.gz),e.Y36(d.F0),e.Y36(T.e),e.Y36(u.sK),e.Y36(Z.N_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-result"]],decls:6,vars:7,consts:[["nz-row","",1,"search-result-wrapper","mt-4","mb-5"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[3,"filterChanged"],[4,"ngIf"],[3,"title","text","icon","withBtn","btnText",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[3,"placesData"],["nz-row","",1,"result-cards-wrapper","mt-3"],["class","mb-3","nz-col","",3,"nzXs","nzLg",4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],["nz-col","",1,"mb-3",3,"nzXs","nzLg"],[3,"cardData"],[3,"title","text","icon","withBtn","btnText"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"app-search-filter",2),e.NdJ("filterChanged",function(o){return n.onFilterChanged(o)}),e.qZA(),e.YNc(3,ie,6,5,"ng-container",3),e.YNc(4,ae,1,5,"app-empty-state",4),e.YNc(5,re,4,1,"div",5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("nzXs",e.DdM(5,S))("nzLg",e.DdM(6,se)),e.xp6(2),e.Q6J("ngIf",!n.loading&&(null==n.resultData?null:n.resultData.length)),e.xp6(1),e.Q6J("ngIf",!(n.loading||null!=n.resultData&&n.resultData.length)),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[m.SK,m.t3,E,g.O5,G,g.sg,q.$,X.dE,K.s,M.w,O.Ls,ee.W],styles:[".search-result-wrapper[_ngcontent-%COMP%]   .filter-wrapper[_ngcontent-%COMP%]   app-search-filter[_ngcontent-%COMP%]{width:100%}.result-cards-wrapper[_ngcontent-%COMP%]{justify-content:start;text-align:start}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}  .ant-pagination-next .ant-pagination-item-link,   .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  .ant-pagination-item a,   .ant-pagination-item:focus-visible a,   .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}"]}),i})()}];let ce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(le)],d.Bz]}),i})(),pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.ez,ce,P.P,w.m,u.aw,p.u5,p.UX,h.su]]}),i})()}}]);