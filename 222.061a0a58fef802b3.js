"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[222],{222:(S,f,r)=>{r.r(f),r.d(f,{CalendarModule:()=>we});var o=r(3075),M=r(8190),_=r(9808),m=r(1062),h=r(5326),u=r(2340),p=r(5439),D=r(727),e=r(5e3),y=r(6010),x=r(4239),g=r(3104),C=r(3640),s=r(1894),P=r(8455),b=r(4401),z=r(2683),O=r(3087),I=r(7484),Z=r(6042),Y=r(2643),J=r(8285),N=r(5069),E=r(6695),L=r(6462),B=r(4546),w=r(1047);function Q(a,c){if(1&a&&(e.TgZ(0,"div",19)(1,"span",20),e._uU(2),e.qZA()()),2&a){const t=c.$implicit;e.xp6(2),e.Oqu(t)}}function U(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",21)(1,"span",5),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nz-switch",13),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().smartPriceChecked=i}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"CalendarPage.SetSpecialPrice")," "),e.xp6(2),e.Q6J("ngModel",t.smartPriceChecked)}}function F(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"nz-form-control")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nz-input-group",22)(5,"input",23),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().specificDatePrice=i}),e.qZA()()()}if(2&a){const t=e.oxw(),n=e.MAs(33);e.xp6(2),e.Oqu(e.lcZ(3,3,"CalendarPage.SpecialDaysPrice")),e.xp6(2),e.Q6J("nzSuffix",n),e.xp6(1),e.Q6J("ngModel",t.specificDatePrice)}}function j(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"nz-form-control",24)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nz-textarea-count",25)(5,"textarea",26),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().note=i}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"CalendarPage.Note")),e.xp6(2),e.Q6J("nzMaxCharacterCount",500),e.xp6(1),e.Q6J("ngModel",t.note)}}function $(a,c){1&a&&(e._uU(0),e.ALo(1,"translate")),2&a&&e.Oqu(e.lcZ(1,1,"CreateListing.SAR"))}let W=(()=>{class a{constructor(t,n,i,l){this.commonService=t,this.translateService=n,this.priceService=i,this.calenderService=l,this.specificDatePrice=1,this.loading=!1,this.selectedAction="",this.note="",this.smartPriceChecked=!1,this.noteChecked=!1,this.subscriptions=new D.w0,this.onCancelClick=new e.vpe}ngOnInit(){}ngOnChanges(t){var n,i;console.log(t),this.selectedDates=null===(n=t.selectedDates)||void 0===n?void 0:n.currentValue,console.log("sds",this.selectedDates),(null===(i=this.selectedDates)||void 0===i?void 0:i.length)||this.onCancel()}handleBlockUnblock(){this.isAllBlocked&&(this.selectedAction="block"),this.isAllAvailable&&(this.selectedAction="unblock")}onSelectType(t){this.selectedAction=t}removeDate(t){this.selectedDates.splice(t,1)}onCancel(){this.onCancelClick.emit()}onClose(){this.onCancelClick.emit("changed")}onConfirm(){"unblock"==this.selectedAction&&this.smartPriceChecked?this.addSpecialDays():"unblock"==this.selectedAction&&!this.smartPriceChecked||"block"==this.selectedAction&&this.addBlockedDate()}addBlockedDate(){let t=this.selectedDates.map(n=>({date:n,name:this.note.length?this.note:""}));this.loading=!0,this.subscriptions.add(this.calenderService.addBlockedDate(this.propertyId,{blocked_dates:t}).subscribe(n=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.onClose()},n=>{var i;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}addSpecialDays(){this.loading=!0;let t=this.selectedDates.map(n=>({date:n,price:this.specificDatePrice,name:this.note.length?this.note:""}));this.subscriptions.add(this.priceService.addSpecificPrice(this.propertyId,{specific_dates:t}).subscribe({next:n=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.onClose()},error:n=>{var i;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}}))}removeSpecialDays(){this.loading=!0,this.subscriptions.add(this.priceService.removeSpecificDate({property_id:this.propertyId}).subscribe({next:n=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.loading=!1,this.onClose()},error:n=>{var i;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.v),e.Y36(m.sK),e.Y36(J.N),e.Y36(N.z))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-dates"]],inputs:{propertyId:"propertyId",isAllBlocked:"isAllBlocked",isAllAvailable:"isAllAvailable",selectedDates:"selectedDates"},outputs:{onCancelClick:"onCancelClick"},features:[e.TTD],decls:34,vars:29,consts:[[1,"manage-dates-wrapper"],[1,"content"],[1,"selected-dates"],["class","date-item",4,"ngFor","ngForOf"],[1,"availability"],[1,"title"],[1,"btns"],["nz-button","","nzType","primary","nzShape","circle","nz-tooltip","",3,"nzTooltipTitle","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"],["class","special-check d-flex justify-content-between align-items-center",4,"ngIf"],[4,"ngIf"],[1,"note-check-wrapper"],[3,"ngModel","ngModelChange"],["class","note-wrapper",4,"ngIf"],[1,"confirm-action-btns"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],["suffixTemplateInfo",""],[1,"date-item"],[1,"date"],[1,"special-check","d-flex","justify-content-between","align-items-center"],[3,"nzSuffix"],["type","number","nz-input","","placeholder","",3,"ngModel","ngModelChange"],[1,"note-wrapper"],[3,"nzMaxCharacterCount"],["rows","5","nz-input","",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e.YNc(3,Q,3,1,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return n.onSelectType("unblock")}),e.ALo(10,"translate"),e._UZ(11,"span",8),e.qZA(),e.TgZ(12,"button",7),e.NdJ("click",function(){return n.onSelectType("block")}),e.ALo(13,"translate"),e._UZ(14,"span",9),e.qZA()()(),e.YNc(15,U,5,4,"div",10),e.YNc(16,F,6,5,"nz-form-control",11),e.ynx(17),e.TgZ(18,"div",12)(19,"span",5),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"nz-switch",13),e.NdJ("ngModelChange",function(l){return n.noteChecked=l}),e.qZA()(),e.YNc(23,j,6,5,"nz-form-control",14),e.BQk(),e.qZA(),e.TgZ(24,"div",15)(25,"button",16),e.NdJ("click",function(){return n.onCancel()}),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"button",17),e.NdJ("click",function(){return n.onConfirm()}),e._uU(30),e.ALo(31,"translate"),e.qZA()()(),e.YNc(32,$,2,3,"ng-template",null,18,e.W1O)),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.selectedDates),e.xp6(3),e.Oqu(e.lcZ(7,17,"CalendarPage.Available")),e.xp6(3),e.ekj("active","unblock"===n.selectedAction),e.s9C("nzTooltipTitle",e.lcZ(10,19,"CalendarPage.Available")),e.xp6(3),e.ekj("active","block"===n.selectedAction),e.s9C("nzTooltipTitle",e.lcZ(13,21,"CalendarPage.Block")),e.xp6(3),e.Q6J("ngIf","unblock"===n.selectedAction),e.xp6(1),e.Q6J("ngIf",n.smartPriceChecked),e.xp6(4),e.hij(" ",e.lcZ(21,23,"CalendarPage.PrivateNote")," "),e.xp6(2),e.Q6J("ngModel",n.noteChecked),e.xp6(1),e.Q6J("ngIf",n.noteChecked),e.xp6(4),e.Oqu(e.lcZ(28,25,"General.Cancel")),e.xp6(2),e.Q6J("disabled",n.specificDatePrice<=0||!(null!=n.selectedDates&&n.selectedDates.length))("nzLoading",n.loading),e.xp6(1),e.hij(" ",e.lcZ(31,27,"General.Confirm")," "))},directives:[_.sg,Z.ix,Y.dQ,z.w,E.SY,O.Ls,_.O5,L.i,o.JJ,o.On,s.t3,B.Fd,w.gB,w.ke,o.wV,w.Zp,o.Fj,w.w],pipes:[m.X$],styles:[".manage-dates-wrapper[_ngcontent-%COMP%]{height:100%;position:relative;overflow:hidden}.manage-dates-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{min-height:70vh}.manage-dates-wrapper[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-gray-600)}.manage-dates-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;width:100%}.manage-dates-wrapper[_ngcontent-%COMP%]   .note-wrapper[_ngcontent-%COMP%]{margin-top:2em}.manage-dates-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:start;margin-bottom:.5em}.manage-dates-wrapper[_ngcontent-%COMP%]   .availability[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.manage-dates-wrapper[_ngcontent-%COMP%]   .availability[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-inline-end:.5em;background-color:var(--bs-white)!important;color:var(--bs-gray-600)!important;border-color:var(--bs-gray-600)!important}.manage-dates-wrapper[_ngcontent-%COMP%]   .availability[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:unset}.manage-dates-wrapper[_ngcontent-%COMP%]   .availability[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:var(--bs-primary)!important;color:var(--bs-white)!important;border-color:var(--bs-primary)!important}.manage-dates-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.05rem}.manage-dates-wrapper[_ngcontent-%COMP%]   .special-check[_ngcontent-%COMP%], .manage-dates-wrapper[_ngcontent-%COMP%]   .note-check-wrapper[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:2em;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.manage-dates-wrapper[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:2em;justify-content:center;text-align:center}.manage-dates-wrapper[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;padding-right:2em;padding-left:2em;box-shadow:none}.manage-dates-wrapper[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--bs-white)!important;background-color:var(--bs-primary)!important}.manage-dates-wrapper[_ngcontent-%COMP%]   .confirm-action-btns[_ngcontent-%COMP%]{justify-content:end;text-align:end}.manage-dates-wrapper[_ngcontent-%COMP%]   .confirm-action-btns[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;padding-right:2em;padding-left:2em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important;margin-inline-end:1em}.manage-dates-wrapper[_ngcontent-%COMP%]   .loader-wrapper[_ngcontent-%COMP%]{width:20%;justify-content:center;text-align:center}.manage-dates-wrapper[_ngcontent-%COMP%]   .loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}@media (max-width: 768px){.manage-dates-wrapper[_ngcontent-%COMP%]   .loader-wrapper[_ngcontent-%COMP%]{width:30%}}.manage-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;margin-bottom:1em}.manage-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{background-color:#3ec4de;padding:10px;margin:.3em;position:relative;border-radius:10px}.manage-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:var(--bs-white);font-size:12px}.manage-dates-wrapper[_ngcontent-%COMP%]   .selected-dates[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:25px;height:25px;background-color:var(--bs-white);border-radius:50%;line-height:1.7em;position:absolute;z-index:1;top:-15px;inset-inline-end:-10px;box-shadow:0 10px 15px -3px #0000001a;cursor:pointer}[_nghost-%COMP%]  .special-check .ant-switch-checked, [_nghost-%COMP%]  .note-check-wrapper .ant-switch-checked{background-color:var(--bs-primary)}[_nghost-%COMP%]  #price-specific-date .ant-input-affix-wrapper{border:0;border-bottom:1px solid #c7cacb}[_nghost-%COMP%]  #price-specific-date .ant-input-prefix{font-size:14px;font-weight:700;color:var(--bs-gray-700);border-inline-end:1px solid #c7cacb;padding-inline-end:10px}[_nghost-%COMP%]  #price-specific-date .ant-input-affix-wrapper>input.ant-input{padding-inline:10px}"]}),a})();function R(a,c){if(1&a&&(e.TgZ(0,"li"),e._UZ(1,"nz-badge",14),e.qZA()),2&a){const t=c.$implicit;e.xp6(1),e.Q6J("nzStatus",t.type)("nzText",t.content)}}function X(a,c){if(1&a&&(e.ynx(0),e.YNc(1,R,2,2,"li",13),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.listDataMap.eight)}}function H(a,c){if(1&a&&(e.TgZ(0,"li"),e._UZ(1,"nz-badge",14),e.qZA()),2&a){const t=c.$implicit;e.xp6(1),e.Q6J("nzStatus",t.type)("nzText",t.content)}}function K(a,c){if(1&a&&(e.ynx(0),e.YNc(1,H,2,2,"li",13),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.listDataMap.ten)}}function G(a,c){if(1&a&&(e.TgZ(0,"li"),e._UZ(1,"nz-badge",14),e.qZA()),2&a){const t=c.$implicit;e.xp6(1),e.Q6J("nzStatus",t.type)("nzText",t.content)}}function q(a,c){if(1&a&&(e.ynx(0),e.YNc(1,G,2,2,"li",13),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.listDataMap.eleven)}}function V(a,c){if(1&a&&(e.TgZ(0,"ul",10),e.ynx(1,11),e.YNc(2,X,2,1,"ng-container",12),e.YNc(3,K,2,1,"ng-container",12),e.YNc(4,q,2,1,"ng-container",12),e.BQk(),e.qZA()),2&a){const t=c.$implicit;e.xp6(1),e.Q6J("ngSwitch",t.getDate()),e.xp6(1),e.Q6J("ngSwitchCase",8),e.xp6(1),e.Q6J("ngSwitchCase",10),e.xp6(1),e.Q6J("ngSwitchCase",11)}}function ee(a,c){1&a&&e._UZ(0,"span",23)}function te(a,c){if(1&a&&(e.TgZ(0,"div",21),e.YNc(1,ee,1,0,"span",22),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.handleSelectedDate(t))}}function ne(a,c){1&a&&e._UZ(0,"span",24)}function ae(a,c){1&a&&e._UZ(0,"span",25)}function ie(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij("",t.propertyData.base_price," ")}}function oe(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij("",t.propertyData.weekend_offer," ")}}function re(a,c){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.hij("",n.getSpecialDayPrice(t)," ")}}function ce(a,c){if(1&a&&(e.TgZ(0,"span",15)(1,"div",16),e.YNc(2,te,2,1,"div",17),e.YNc(3,ne,1,0,"span",18),e.YNc(4,ae,1,0,"span",19),e.TgZ(5,"p",20),e.YNc(6,ie,2,1,"span",4),e.YNc(7,oe,2,1,"span",4),e.YNc(8,re,2,1,"span",4),e._uU(9),e.ALo(10,"translate"),e.qZA()()()),2&a){const t=c.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",n.handleSelectedDate(t)),e.xp6(1),e.Q6J("ngIf",n.handleBlockedDate(t)&&!n.handleSelectedDate(t)),e.xp6(1),e.Q6J("ngIf",n.handleSpecialDate(t)&&!n.handleSelectedDate(t)),e.xp6(2),e.Q6J("ngIf",!n.handleWeekendDate(t)&&!n.handleSpecialDate(t)),e.xp6(1),e.Q6J("ngIf",n.handleWeekendDate(t)&&n.propertyData.weekend_offer>0),e.xp6(1),e.Q6J("ngIf",n.handleSpecialDate(t)&&!n.handleWeekendDate(t)),e.xp6(1),e.hij(" ",e.lcZ(10,7,"Booking.SAR")," ")}}const T=function(){return{span:24}},le=function(){return{span:20}};function se(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"nz-calendar",7),e.NdJ("nzPanelChange",function(i){return e.CHM(t),e.oxw().panelChange(i)})("nzSelectChange",function(i){return e.CHM(t),e.oxw().selectChange(i)})("nzModeChange",function(i){return e.CHM(t),e.oxw().mode=i}),e.YNc(6,V,5,4,"ul",8),e.qZA(),e.YNc(7,ce,11,9,"ng-template",null,9,e.W1O),e.qZA()}if(2&a){const t=e.MAs(8),n=e.oxw();e.Q6J("nzXs",e.DdM(7,T))("nzLg",e.DdM(8,le)),e.xp6(3),e.Oqu(e.lcZ(4,5,"CalendarPage.Calendar")),e.xp6(2),e.Q6J("nzDateCell",t)("nzMode",n.mode)}}function pe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"nz-card"),e.ynx(1),e.TgZ(2,"div",26)(3,"div",27)(4,"span",28),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e._UZ(8,"span",30),e.qZA()(),e.TgZ(9,"app-manage-dates",31),e.NdJ("onCancelClick",function(i){return e.CHM(t),e.oxw().close(i)}),e.qZA()(),e.BQk(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,5,"CalendarPage.Manage"),""),e.xp6(4),e.Q6J("propertyId",t.propertyId)("isAllBlocked",t.isAllBlocked)("isAllAvailable",t.isAllAvailable)("selectedDates",t.selectedDates)}}const de=function(){return{span:17}},ge=function(){return{span:7}};let _e=(()=>{class a{constructor(t,n,i,l,d,v){this.commonService=t,this.translateService=n,this.route=i,this.reviewServiceService=l,this.modalService=d,this.viewContainerRef=v,this.loading=!1,this.subscriptions=new D.w0,this.listDataMap={eight:[{type:"warning",content:"This is warning event."},{type:"success",content:"This is usual event."}],ten:[{type:"warning",content:"This is warning event."},{type:"success",content:"This is usual event."},{type:"error",content:"This is error event."}],eleven:[{type:"warning",content:"This is warning event"},{type:"success",content:"This is very long usual event........"},{type:"error",content:"This is error event 1."},{type:"error",content:"This is error event 2."},{type:"error",content:"This is error event 3."},{type:"error",content:"This is error event 4."}]},this.mode="month",this.selectedDates=[],this.blockedDates=[],this.specialDates=[],this.weekendDays=[],this.allSpecialDays=[],this.visible=!1,this.isAllBlocked=!1,this.isAllAvailable=!0,this.isAllSpecial=!1,this.placement="ar"==(null==u.N?void 0:u.N.lang)?"left":"right"}ngOnInit(){this.getPropertyDataById(),this.getWeekendDays()}open(){this.visible=!0}close(t){this.visible=!1,this.selectedDates=[],"changed"==t&&this.getPropertyDataById()}getMonthData(t){return 8===t.getMonth()?1394:null}selectChange(t){let n=p(t).format("DD-MM-YYYY");if(this.selectedDates.includes(n)){let i=this.selectedDates.indexOf(n);this.selectedDates.splice(i,1),this.selectedDates=[...this.selectedDates]}else this.selectedDates=[...this.selectedDates,n];this.open(),this.checkDatesFlags()}checkDatesFlags(){var t;let n=[];null===(t=this.selectedDates)||void 0===t||t.map(i=>{this.blockedDates.includes(i)&&(this.isAllAvailable=!1,n.push(i)),(null==n?void 0:n.length)==this.selectedDates.length?(this.isAllBlocked=!0,this.isAllAvailable=!1):this.isAllBlocked=!1}),console.log(this.isAllAvailable),console.log(this.isAllBlocked)}panelChange(t){console.log(t)}handleSelectedDate(t){let n=!1;return this.selectedDates.includes(p(t).format("DD-MM-YYYY"))&&(n=!0),n}handleBlockedDate(t){let n=!1;return this.blockedDates.includes(p(t).format("DD-MM-YYYY"))&&(n=!0),n}handleSpecialDate(t){let n=!1;return this.specialDates.includes(p(t).format("DD-MM-YYYY"))&&(n=!0),n}handleWeekendDate(t){let n=!1,i=`${new Date(t).getDate()}-${new Date(t).getMonth()+1}-${new Date(t).getFullYear()}`;return this.weekendDays.includes(i)&&(n=!0),n}getSpecialDayPrice(t){var n;let i=0;return null===(n=this.allSpecialDays)||void 0===n||n.map(l=>{p(t).format("DD-MM-YYYY")===l.specific_date&&(i=l.price)}),i}onManageDates(){}getWeekendDays(){p().startOf("year").format("DD-MM-YYYY").split("-"),p().endOf("year").format("DD-MM-YYYY").split("-");let i=new Date("01-01-2010"),l=new Date("12-31-2050");this.weekendDays=this.getWeekendBetweenDates(i,l)}getWeekendBetweenDates(t,n){for(var i=[],l=t;l<=n;l.setDate(l.getDate()+1))if(5==l.getDay()||6==l.getDay()){let d=`${new Date(l).getDate()}-${new Date(l).getMonth()+1}-${new Date(l).getFullYear()}`;i.push(d)}return i}getPropertyDataById(){this.route.params.subscribe(t=>{Object.keys(t).length&&(this.propertyId=t.id,this.getPropertyData())})}getPropertyData(){this.loading=!0,this.subscriptions.add(this.reviewServiceService.getPropertyData(this.propertyId).subscribe({next:t=>{var n,i;this.loading=!1,this.propertyData=null==t?void 0:t.data[0],this.propertyBasePrice=this.propertyData.base_price,this.blockedDates=this.propertyData.blocked_dates.map(l=>p(l.blocked_date).format("DD-MM-YYYY")),this.specialDates=this.propertyData.Specific_dates.map(l=>{let d=l.specific_date.split("-");return p(`${d[2]}-${d[1]}-${d[0]}`).format("DD-MM-YYYY")}),this.allSpecialDays=null===(i=null===(n=this.propertyData)||void 0===n?void 0:n.Specific_dates)||void 0===i?void 0:i.map(l=>{let d=l.specific_date.split("-");return{specific_date:p(`${d[2]}-${d[1]}-${d[0]}`).format("DD-MM-YYYY"),price:l.price}})},error:t=>{var n;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.v),e.Y36(m.sK),e.Y36(x.gz),e.Y36(g.x),e.Y36(C.Sf),e.Y36(e.s_b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-properties-calendar"]],decls:5,vars:10,consts:[["nz-row","","id","calendar-management"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],["nz-col","","class","content-wrapper m-auto",3,"nzXs","nzLg",4,"ngIf"],["nz-col","",3,"nzXs","nzLg"],[4,"ngIf"],["nz-col","",1,"content-wrapper","m-auto",3,"nzXs","nzLg"],[1,"head","mb-2","mt-4"],[3,"nzDateCell","nzMode","nzPanelChange","nzSelectChange","nzModeChange"],["class","events",4,"nzDateCell"],["dateCellTpl",""],[1,"events"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[3,"nzStatus","nzText"],[1,"ant-picker-cell-selected"],[1,"date-content-wrapper"],["class","selected-wrapper",4,"ngIf"],["class","blocked","nz-icon","","nzType","close-circle","nzTheme","outline",4,"ngIf"],["class","special","nz-icon","","nzType","percentage","nzTheme","outline",4,"ngIf"],[1,"price"],[1,"selected-wrapper"],["class","selected","nz-icon","","nzType","check-circle","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","check-circle","nzTheme","outline",1,"selected"],["nz-icon","","nzType","close-circle","nzTheme","outline",1,"blocked"],["nz-icon","","nzType","percentage","nzTheme","outline",1,"special"],[1,"drawer"],[1,"drawer-head"],[1,"title"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","close"],[3,"propertyId","isAllBlocked","isAllAvailable","selectedDates","onCancelClick"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,se,9,9,"div",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,pe,10,7,"nz-card",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("nzXs",e.DdM(6,T))("nzLg",e.DdM(7,de)),e.xp6(1),e.Q6J("ngIf",(null==n.propertyData?null:n.propertyData.id)&&!n.loading),e.xp6(1),e.Q6J("nzXs",e.DdM(8,T))("nzLg",e.DdM(9,ge)),e.xp6(1),e.Q6J("ngIf",n.visible))},directives:[s.SK,s.t3,_.O5,P.W5,P.sc,_.RF,_.n9,_.sg,b.x7,z.w,O.Ls,I.bd,Z.ix,Y.dQ,W],pipes:[m.X$],styles:["#calendar-management[_ngcontent-%COMP%]{position:relative}#calendar-management[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#calendar-management[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--bs-dark)}#calendar-management[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{min-height:70vh}#calendar-management[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .events[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}#calendar-management[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .events[_ngcontent-%COMP%]   .ant-badge-status[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;width:100%;text-overflow:ellipsis;font-size:12px}#calendar-management[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .notes-month[_ngcontent-%COMP%]{text-align:center;font-size:28px}#calendar-management[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .notes-month[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{font-size:28px}.drawer[_ngcontent-%COMP%]{border-radius:5px;position:sticky;top:5%;animation:run 5s linear}.drawer[_ngcontent-%COMP%]   .drawer-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:.5em;border-bottom:1px solid #ddd;margin-bottom:1em}.drawer[_ngcontent-%COMP%]   .drawer-head[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1rem;color:var(--bs-dark)}.drawer[_ngcontent-%COMP%]   .drawer-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-inline-end:.5em;background-color:var(--bs-white)!important;color:var(--bs-gray-600)!important;border-color:transparent!important}.drawer[_ngcontent-%COMP%]   .drawer-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:unset}@keyframes run{0%{inset-inline-start:-100%}to{inset-inline-start:0}}  .ant-picker-calendar-mode-switch{display:none}  .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected .ant-picker-calendar-date,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected .ant-picker-calendar-date-today,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected:hover .ant-picker-calendar-date,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected:hover .ant-picker-calendar-date-today{background:#fff}  .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected .ant-picker-calendar-date .ant-picker-calendar-date-value,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected .ant-picker-calendar-date-today .ant-picker-calendar-date-value,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected:hover .ant-picker-calendar-date .ant-picker-calendar-date-value,   .ant-picker-calendar-full .ant-picker-panel .ant-picker-cell-selected:hover .ant-picker-calendar-date-today .ant-picker-calendar-date-value,   .ant-select-tree-switcher-loading-icon{color:var(--bs-dark)}  .ant-picker-calendar-full .ant-picker-panel .ant-picker-calendar-date-content{display:flex;flex-direction:column;align-items:center;justify-content:center}  .ant-picker-calendar-full .ant-picker-panel .ant-picker-calendar-date-today{border-color:var(--bs-primary)}  #calendar-management .ant-card-body{padding:1em}.date-content-wrapper[_ngcontent-%COMP%]{text-align:center;position:relative;height:60px}.date-content-wrapper[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%], .date-content-wrapper[_ngcontent-%COMP%]   .special[_ngcontent-%COMP%], .date-content-wrapper[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%]{font-size:2rem;color:var(--bs-primary)}.date-content-wrapper[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]{font-size:2rem;color:var(--bs-dark)}.date-content-wrapper[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-top:5px;font-size:14px;color:var(--bs-gray-600)}.action-btns[_ngcontent-%COMP%]{text-align:center}.action-btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}"]}),a})();var me=r(3501),he=r(9592),ue=r(1107),Ce=r(1711),ve=r(5181),fe=r(9590);function Me(a,c){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-properties-wrapper",11),e.qZA()),2&a){const t=c.$implicit;e.xp6(1),e.Q6J("propertyData",t)}}const k=function(){return{span:24}},A=function(){return{span:20}};function xe(a,c){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.YNc(2,Me,2,1,"div",8),e.TgZ(3,"div",9)(4,"nz-pagination",10),e.NdJ("nzPageIndexChange",function(i){return e.CHM(t),e.oxw().onPageChanged(i)}),e.qZA()()(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("nzXs",e.DdM(8,k))("nzLg",e.DdM(9,A)),e.xp6(1),e.Q6J("ngForOf",t.listingData),e.xp6(2),e.ekj("ant-pagination-rtl","ar"==t.lang),e.Q6J("nzPageIndex",t.filterCriteria.page)("nzTotal",t.totalItems)("nzPageSize",10)}}function Pe(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",12)(1,"app-empty-state",13),e.NdJ("btnClicked",function(){return e.CHM(t),e.oxw().onCreateListingClicked()}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function De(a,c){1&a&&e._UZ(0,"span",17)}function ye(a,c){if(1&a&&(e.TgZ(0,"div",14),e.YNc(1,De,1,0,"ng-template",null,15,e.W1O),e._UZ(3,"nz-spin",16),e.qZA()),2&a){const t=e.MAs(2);e.xp6(3),e.Q6J("nzIndicator",t)}}const ze=[{path:"",component:(()=>{class a{constructor(t,n,i,l,d,v){this.modal=t,this.commonService=n,this.translateService=i,this.listingService=l,this.router=d,this.cookieService=v,this.loading=!1,this.listingData=[],this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.filterCriteria={page:1,pageSize:5},this.subscriptions=new D.w0,this.userRole=u.N.userRole,this.lang=u.N.lang,this.commonService.handleHostPage()}ngOnInit(){this.handleUserPermission()}handleUserPermission(){this.cookieService.get("userData")&&("HOST"!==this.userRole?this.router.navigateByUrl("/"):this.fetchListingData())}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.NoListings"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("ListingPage.CreateListing")}}fetchListingData(){this.loading=!0,this.subscriptions.add(this.listingService.getListings(this.filterCriteria).subscribe(t=>{var n,i,l,d;(null==t?void 0:t.successful)&&(this.loading=!1,this.listingData=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.data,this.totalItems=null===(l=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.meta)||void 0===l?void 0:l.total,console.log(this.totalItems),(null===(d=this.listingData)||void 0===d?void 0:d.length)||this.handleEmptyData())},t=>{this.loading=!1,this.handleEmptyData()}))}onSizeChanged(t){this.filterCriteria.pageSize=t,this.fetchListingData()}onPageChanged(t){this.filterCriteria.page=t,this.fetchListingData()}getUserData(){return this.cookieService.get("userData"),!0}onCreateListingClicked(){this.router.navigateByUrl("/host/create-listing")}createInsuranceModal(){}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.Sf),e.Y36(y.v),e.Y36(m.sK),e.Y36(me.o),e.Y36(x.F0),e.Y36(he.N_))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calendar"]],decls:10,vars:14,consts:[["nz-row","","id","listing"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[1,"head","mb-5"],["nz-col","",1,"content-wrapper","m-auto",3,"nzXs","nzLg"],[4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],["type","calendar",3,"propertyData"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",3),e.YNc(7,xe,5,10,"ng-container",4),e.YNc(8,Pe,2,5,"div",5),e.YNc(9,ye,4,1,"div",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("nzXs",e.DdM(10,k))("nzLg",e.DdM(11,A)),e.xp6(3),e.Oqu(e.lcZ(5,8,"CalendarPage.Calendar")),e.xp6(2),e.Q6J("nzXs",e.DdM(12,k))("nzLg",e.DdM(13,A)),e.xp6(1),e.Q6J("ngIf",!n.loading&&(null==n.listingData?null:n.listingData.length)),e.xp6(1),e.Q6J("ngIf",!n.loading&&n.listingData.length<=0),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[s.SK,s.t3,_.O5,_.sg,ue.Z,Ce.dE,ve.s,z.w,O.Ls,fe.W],pipes:[m.X$],styles:["#listing[_ngcontent-%COMP%]{padding:50px 24px 20px}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:30px;color:var(--bs-dark)}#listing[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}#listing[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{min-height:70vh}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}.loader-wrapper[_ngcontent-%COMP%]{width:100%;justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.empty-state[_ngcontent-%COMP%]{width:100%}  #listing .ant-pagination-next .ant-pagination-item-link,   #listing .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #listing .ant-pagination-item a,   #listing .ant-pagination-item:focus-visible a,   #listing .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}"]}),a})()},{path:"view/:id",component:_e}];let be=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[x.Bz.forChild(ze)],x.Bz]}),a})(),we=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.ez,h.m,be,M.P,m.aw,o.u5,o.UX]]}),a})()},3104:(S,f,r)=>{r.d(f,{x:()=>m});var o=r(2340),M=r(5e3),_=r(520);let m=(()=>{class h{constructor(p){this.http=p}getPropertyData(p){return this.http.get(`${o.N.endPointUrl}/user/hosting/list-property/preview/${p}`)}}return h.\u0275fac=function(p){return new(p||h)(M.LFG(_.eN))},h.\u0275prov=M.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},5181:(S,f,r)=>{r.d(f,{s:()=>x});var o=r(5e3),M=r(685),_=r(9808),m=r(6042),h=r(2643),u=r(2683),p=r(1062);function D(g,C){if(1&g&&(o.TgZ(0,"h5",3),o._uU(1),o.ALo(2,"translate"),o.qZA(),o.TgZ(3,"p",4),o._uU(4),o.ALo(5,"translate"),o.qZA()),2&g){const s=o.oxw();o.xp6(1),o.Oqu(o.lcZ(2,2,s.title)),o.xp6(3),o.Oqu(o.lcZ(5,4,s.text))}}function e(g,C){if(1&g){const s=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){return o.CHM(s),o.oxw(2).onButtonClicked()}),o._uU(1),o.ALo(2,"translate"),o.qZA()}if(2&g){const s=o.oxw(2);o.xp6(1),o.Oqu(o.lcZ(2,1,s.btnText))}}function y(g,C){if(1&g&&o.YNc(0,e,3,3,"button",5),2&g){const s=o.oxw();o.Q6J("ngIf",s.withBtn)}}let x=(()=>{class g{constructor(){this.title="",this.text="",this.icon="",this.btnText="",this.btnClicked=new o.vpe}ngOnInit(){}onButtonClicked(){this.btnClicked.emit()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-empty-state"]],inputs:{title:"title",text:"text",icon:"icon",withBtn:"withBtn",btnText:"btnText"},outputs:{btnClicked:"btnClicked"},decls:5,vars:3,consts:[[1,"empty-wrapper","pt-5","pb-5",3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],[1,"title"],[1,"description"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"]],template:function(s,P){if(1&s&&(o.TgZ(0,"nz-empty",0),o.YNc(1,D,6,6,"ng-template",null,1,o.W1O),o.YNc(3,y,1,1,"ng-template",null,2,o.W1O),o.qZA()),2&s){const b=o.MAs(2),z=o.MAs(4);o.Q6J("nzNotFoundImage",P.icon?P.icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg")("nzNotFoundContent",b)("nzNotFoundFooter",z)}},directives:[M.p9,_.O5,m.ix,h.dQ,u.w],pipes:[p.X$],styles:[".title[_ngcontent-%COMP%]{font-weight:600;margin-top:1em;margin-bottom:1em;color:var(--bs-dark)}.description[_ngcontent-%COMP%]{width:50%;margin:auto;color:var(--bs-gray-600)}"]}),g})()}}]);