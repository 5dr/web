"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[329],{5329:(Bn,K,l)=>{l.r(K),l.d(K,{MessagesModule:()=>Zn});var U={};l.r(U),l.d(U,{Decoder:()=>V,Encoder:()=>Se,PacketType:()=>c,protocol:()=>kt});var q={};l.r(q),l.d(q,{Manager:()=>N,Socket:()=>$,connect:()=>b,default:()=>b,io:()=>b,protocol:()=>kt});var x=l(9808),At=l(5858),w=l(1062),W=l(727),C=l(2340),Tt=l(1357),e=l(5e3),St=l(1515),X=l(3640),G=l(6010);function Et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"span",14),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"br"),e.TgZ(5,"span",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.fetchUserDetails(null==o.bookingDetails||null==o.bookingDetails.host?null:o.bookingDetails.host.id,"host")}),e._uU(6),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,3,"PlaceDetails.HostedBy")," : "),e.xp6(4),e.AsE("",null==t.bookingDetails||null==t.bookingDetails.host?null:t.bookingDetails.host.first_name," ",null==t.bookingDetails||null==t.bookingDetails.host?null:t.bookingDetails.host.last_name,"")}}function Lt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"span",14),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"br"),e.TgZ(5,"span",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.fetchUserDetails(null==o.bookingDetails||null==o.bookingDetails.traveller?null:o.bookingDetails.traveller.id,"Traveller")}),e._uU(6),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,3,"PlaceDetails.BookedBy")," : "),e.xp6(4),e.AsE("",null==t.bookingDetails||null==t.bookingDetails.traveller?null:t.bookingDetails.traveller.first_name," ",null==t.bookingDetails||null==t.bookingDetails.traveller?null:t.bookingDetails.traveller.last_name,"")}}function Zt(i,n){if(1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.HOy(" ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.base_price," ",e.lcZ(2,4,"Payment.SAR")," x ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days," ",e.lcZ(3,6,"PlaceDetails.Night")," ")}}function Bt(i,n){if(1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.HOy(" ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.weekend_offer," ",e.lcZ(2,4,"Payment.SAR")," x ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days," ",e.lcZ(3,6,"PlaceDetails.Night")," ")}}function It(i,n){if(1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days," ",e.lcZ(2,2,"CreateListing.SpecialNight")," ")}}function Nt(i,n){if(1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"PlaceDetails.ServiceFees")," ",t.serviceFees," % ")}}function Rt(i,n){if(1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"PlaceDetails.Vat")," ",t.vat," % ")}}function zt(i,n){1&i&&(e.TgZ(0,"li",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PlaceDetails.Insurance")," "))}function Ut(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.normal_days_price," ",e.lcZ(2,2,"Payment.SAR")," ")}}function qt(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.weekend_days_price," ",e.lcZ(2,2,"Payment.SAR")," ")}}function Jt(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.special_days_price," ",e.lcZ(2,2,"Payment.SAR")," ")}}function Ft(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails?null:t.priceDetails.total_service_fee," ",e.lcZ(2,2,"Payment.SAR")," ")}}function Yt(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails?null:t.priceDetails.total_vat," ",e.lcZ(2,2,"Payment.SAR")," ")}}function Qt(i,n){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.priceDetails?null:t.priceDetails.insurance_price," ",e.lcZ(2,2,"Payment.SAR")," ")}}function Ht(i,n){if(1&i&&(e.TgZ(0,"div",16)(1,"div",17)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",18)(6,"ul",19),e.YNc(7,Zt,4,8,"li",20),e.YNc(8,Bt,4,8,"li",20),e.YNc(9,It,3,4,"li",20),e.YNc(10,Nt,3,4,"li",20),e.YNc(11,Rt,3,4,"li",20),e.YNc(12,zt,3,3,"li",20),e.qZA(),e.TgZ(13,"ul",21),e.YNc(14,Ut,3,4,"li",22),e.YNc(15,qt,3,4,"li",22),e.YNc(16,Jt,3,4,"li",22),e.YNc(17,Ft,3,4,"li",22),e.YNc(18,Yt,3,4,"li",22),e.YNc(19,Qt,3,4,"li",22),e.qZA()(),e.TgZ(20,"div",23)(21,"h3",24),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"h3",24),e._uU(25),e.ALo(26,"translate"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,16,"Chat.PaymentDetails")),e.xp6(4),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days)>0),e.xp6(1),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days)>0),e.xp6(1),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days)>0),e.xp6(1),e.Q6J("ngIf",t.serviceFees&&(null==t.priceDetails?null:t.priceDetails.total_service_fee)>0),e.xp6(1),e.Q6J("ngIf",t.vat&&(null==t.priceDetails?null:t.priceDetails.total_vat)>0),e.xp6(1),e.Q6J("ngIf",null==t.priceDetails?null:t.priceDetails.insurance_price),e.xp6(2),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days)>0),e.xp6(1),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days)>0),e.xp6(1),e.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days)>0),e.xp6(1),e.Q6J("ngIf",t.serviceFees&&(null==t.priceDetails?null:t.priceDetails.total_service_fee)>0),e.xp6(1),e.Q6J("ngIf",t.vat&&(null==t.priceDetails?null:t.priceDetails.total_vat)>0),e.xp6(1),e.Q6J("ngIf",null==t.priceDetails?null:t.priceDetails.insurance_price),e.xp6(3),e.Oqu(e.lcZ(23,18,"PlaceDetails.TotalPrice")),e.xp6(3),e.AsE(" ",null==t.priceDetails?null:t.priceDetails.total_price," ",e.lcZ(26,20,"Payment.SAR")," ")}}function Vt(i,n){if(1&i&&(e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"h4",4),e._uU(4),e.qZA()()(),e.TgZ(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.YNc(8,Et,7,5,"div",8),e.YNc(9,Lt,7,5,"div",8),e.qZA(),e.TgZ(10,"div",9)(11,"div",10)(12,"span",11),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"span",12)(16,"span"),e._uU(17),e.ALo(18,"date"),e.qZA(),e._uU(19," - "),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA()()()(),e.YNc(23,Ht,27,22,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.bookingDetails?null:t.bookingDetails.property_name),e.xp6(3),e.Q6J("src",null==t.bookingDetails?null:t.bookingDetails.cover_photo,e.LSH),e.xp6(1),e.Q6J("ngIf","TRAVELLER"===t.userRole),e.xp6(1),e.Q6J("ngIf","HOST"===t.userRole),e.xp6(4),e.Oqu(e.lcZ(14,8,"Chat.Booking")),e.xp6(4),e.Oqu(e.xi3(18,10,null==t.bookingDetails?null:t.bookingDetails.booked_from,"shortDate")),e.xp6(4),e.Oqu(e.xi3(22,13,null==t.bookingDetails?null:t.bookingDetails.booked_to,"shortDate")),e.xp6(2),e.Q6J("ngIf",t.priceDetails)}}let tt=(()=>{class i{constructor(t,s,o,r,a){this.propertyBookingService=t,this.translateService=s,this.modalService=o,this.commonService=r,this.viewContainerRef=a,this.lang=C.N.lang,this.userRole=C.N.userRole,this.subscriptions=new W.w0}ngOnInit(){this.fetchVatDetails()}fetchVatDetails(){this.subscriptions.add(this.propertyBookingService.fetchVatDetails().subscribe(t=>{var s,o;console.log(t),(null==t?void 0:t.successful)&&(this.serviceFees=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.service_fee,this.vat=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.vat)}))}fetchUserDetails(t,s){this.subscriptions.add(this.commonService.fetchUserRateData(t,"host"===s?1:0).subscribe({next:o=>{(null==o?void 0:o.successful)&&this.openDetailsModal(o,s)}}))}openDetailsModal(t,s){let o="host"==s?this.translateService.instant("PlaceDetails.Host")+" "+this.translateService.instant("Chat.Details"):this.translateService.instant("Auth.Traveller")+" "+this.translateService.instant("Chat.Details");this.modalService.create({nzContent:Tt.L,nzTitle:o,nzViewContainerRef:this.viewContainerRef,nzWidth:700,nzComponentParams:{allUserData:t,userType:1}})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(St.v),e.Y36(w.sK),e.Y36(X.Sf),e.Y36(G.v),e.Y36(e.s_b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-details-booking"]],inputs:{bookingDetails:"bookingDetails",priceDetails:"priceDetails"},decls:1,vars:1,consts:[["class","booking-masse",4,"ngIf"],[1,"booking-masse"],[1,"details","d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column"],[1,"title-details"],[1,"hosted","d-flex","align-items-center"],[1,"img-avatar"],["alt","",3,"src"],["class","d-flex flex-column",4,"ngIf"],[1,"date-guest"],[1,"d-flex","justify-content-between","align-items-center"],[1,"desc"],[1,"main-font"],["class","payment-detail",4,"ngIf"],[1,"name"],[1,"h-name",3,"click"],[1,"payment-detail"],[1,"title","d-flex","justify-content-between","align-items-center"],[1,"conta-list","d-flex","justify-content-between","align-items-center"],[1,"list-price","first-list","list-unstyled"],["class","desc",4,"ngIf"],[1,"list-price","secound-list","list-unstyled"],["class","main-font",4,"ngIf"],[1,"total","d-flex","justify-content-between","align-items-center"],[1,"my-0"]],template:function(t,s){1&t&&e.YNc(0,Vt,24,16,"section",0),2&t&&e.Q6J("ngIf",s.bookingDetails)},directives:[x.O5],pipes:[w.X$,x.uU],styles:[".booking-masse[_ngcontent-%COMP%]   .main-font[_ngcontent-%COMP%]{color:var(--bs-dark);font-size:14px;font-weight:600}.booking-masse[_ngcontent-%COMP%]   .main-font[_ngcontent-%COMP%]:lang(ar){font-size:12px}.booking-masse[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:14px}.booking-masse[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:lang(ar){font-size:12px}.booking-masse[_ngcontent-%COMP%]   .main-font.discount[_ngcontent-%COMP%]{color:var(--font-success)}.booking-masse[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:28px 30px;border-bottom:1px solid #E6E6E6}.booking-masse[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:30px;color:var(--bs-dark);margin-bottom:0}.booking-masse[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.booking-masse[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .booking-masse[_ngcontent-%COMP%]   .date-guest[_ngcontent-%COMP%]{border-bottom:1px solid #E6E6E6;padding:20px 25px}.booking-masse[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .title-details[_ngcontent-%COMP%], .booking-masse[_ngcontent-%COMP%]   .date-guest[_ngcontent-%COMP%]   .title-details[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--bs-dark);margin-bottom:5px}.booking-masse[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .booking-masse[_ngcontent-%COMP%]   .date-guest[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;cursor:pointer;display:block;margin-inline-start:20px}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]{padding:15px 25px;border-bottom:1px solid #E6E6E6}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]   .img-avatar[_ngcontent-%COMP%]{margin-inline-end:12px}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]   .img-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;color:var(--bs-dark)}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .h-name[_ngcontent-%COMP%]{font-weight:600;color:var(--bs-blue);cursor:pointer}.booking-masse[_ngcontent-%COMP%]   .hosted[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:12px}.booking-masse[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px;color:var(--bs-dark);margin-block-end:3px}.booking-masse[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:12px;line-height:15px}.booking-masse[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;font-size:24px;color:var(--bs-primary)}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:28px 20px 0;border:none}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .conta-list[_ngcontent-%COMP%]{padding:20px 20px 0}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .conta-list[_ngcontent-%COMP%]   .main-font[_ngcontent-%COMP%], .booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .conta-list[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-bottom:15px}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #E6E6E6}.booking-masse[_ngcontent-%COMP%]   .payment-detail[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:600;font-size:16px}.btn-modal[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;padding-right:2em;padding-left:2em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}.details-modal[_ngcontent-%COMP%]   .modal-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:15px;padding-inline-end:10px}.details-modal[_ngcontent-%COMP%]   .modal-group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{color:var(--bs-dark);font-size:15px}"]}),i})();const y=Object.create(null);y.open="0",y.close="1",y.ping="2",y.pong="3",y.message="4",y.upgrade="5",y.noop="6";const S=Object.create(null);Object.keys(y).forEach(i=>{S[y[i]]=i});const $t={type:"error",data:"parser error"},jt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Kt="function"==typeof ArrayBuffer,et=(i,n)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];n("b"+s)},t.readAsDataURL(i)},nt=({type:i,data:n},t,s)=>jt&&n instanceof Blob?t?s(n):et(n,s):Kt&&(n instanceof ArrayBuffer||(i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)(n))?t?s(n):et(new Blob([n]),s):s(y[i]+(n||"")),O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let i=0;i<O.length;i++)D[O.charCodeAt(i)]=i;const te="function"==typeof ArrayBuffer,ne=(i,n)=>{if(te){const t=(i=>{let s,r,a,h,p,n=.75*i.length,t=i.length,o=0;"="===i[i.length-1]&&(n--,"="===i[i.length-2]&&n--);const g=new ArrayBuffer(n),d=new Uint8Array(g);for(s=0;s<t;s+=4)r=D[i.charCodeAt(s)],a=D[i.charCodeAt(s+1)],h=D[i.charCodeAt(s+2)],p=D[i.charCodeAt(s+3)],d[o++]=r<<2|a>>4,d[o++]=(15&a)<<4|h>>2,d[o++]=(3&h)<<6|63&p;return g})(i);return it(t,n)}return{base64:!0,data:i}},it=(i,n)=>"blob"===n&&i instanceof ArrayBuffer?new Blob([i]):i,st=(i,n)=>{if("string"!=typeof i)return{type:"message",data:it(i,n)};const t=i.charAt(0);return"b"===t?{type:"message",data:ne(i.substring(1),n)}:S[t]?i.length>1?{type:S[t],data:i.substring(1)}:{type:S[t]}:$t},ot=String.fromCharCode(30);function u(i){if(i)return function oe(i){for(var n in u.prototype)i[n]=u.prototype[n];return i}(i)}u.prototype.on=u.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},u.prototype.once=function(i,n){function t(){this.off(i,t),n.apply(this,arguments)}return t.fn=n,this.on(i,t),this},u.prototype.off=u.prototype.removeListener=u.prototype.removeAllListeners=u.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(1==arguments.length)return delete this._callbacks["$"+i],this;for(var s,o=0;o<t.length;o++)if((s=t[o])===n||s.fn===n){t.splice(o,1);break}return 0===t.length&&delete this._callbacks["$"+i],this},u.prototype.emitReserved=u.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),t=this._callbacks["$"+i],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(t){s=0;for(var o=(t=t.slice(0)).length;s<o;++s)t[s].apply(this,n)}return this},u.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},u.prototype.hasListeners=function(i){return!!this.listeners(i).length};const k="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function at(i,...n){return n.reduce((t,s)=>(i.hasOwnProperty(s)&&(t[s]=i[s]),t),{})}const re=setTimeout,ae=clearTimeout;function E(i,n){n.useNativeTimers?(i.setTimeoutFn=re.bind(k),i.clearTimeoutFn=ae.bind(k)):(i.setTimeoutFn=setTimeout.bind(k),i.clearTimeoutFn=clearTimeout.bind(k))}function le(i){return"string"==typeof i?function he(i){let n=0,t=0;for(let s=0,o=i.length;s<o;s++)n=i.charCodeAt(s),n<128?t+=1:n<2048?t+=2:n<55296||n>=57344?t+=3:(s++,t+=4);return t}(i):Math.ceil(1.33*(i.byteLength||i.size))}class ue extends Error{constructor(n,t,s){super(n),this.description=t,this.context=s,this.type="TransportError"}}class ct extends u{constructor(n){super(),this.writable=!1,E(this,n),this.opts=n,this.query=n.query,this.readyState="",this.socket=n.socket}onError(n,t,s){return super.emitReserved("error",new ue(n,t,s)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(n){"open"===this.readyState&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const t=st(n,this.socket.binaryType);this.onPacket(t)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}}const lt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ht={};let pt,ut=0,M=0;function dt(i){let n="";do{n=lt[i%64]+n,i=Math.floor(i/64)}while(i>0);return n}function gt(){const i=dt(+new Date);return i!==pt?(ut=0,pt=i):i+"."+dt(ut++)}for(;M<64;M++)ht[lt[M]]=M;function ft(i){let n="";for(let t in i)i.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return n}let _t=!1;try{_t="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(i){}const de=_t;function mt(i){const n=i.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!n||de))return new XMLHttpRequest}catch(t){}if(!n)try{return new(k[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function ge(){}const fe=null!=new mt({xdomain:!1}).responseType;let Z=(()=>{class i extends u{constructor(t,s){super(),E(this,s),this.opts=s,this.method=s.method||"GET",this.uri=t,this.async=!1!==s.async,this.data=void 0!==s.data?s.data:null,this.create()}create(){const t=at(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const s=this.xhr=new mt(t);try{s.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if("POST"===this.method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{s.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof s.status?s.status:0)},0))},s.send(this.data)}catch(o){return void this.setTimeoutFn(()=>{this.onError(o)},0)}"undefined"!=typeof document&&(this.index=i.requestsCount++,i.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(null!=this.xhr){if(this.xhr.onreadystatechange=ge,t)try{this.xhr.abort()}catch(s){}"undefined"!=typeof document&&delete i.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return i.requestsCount=0,i.requests={},i})();function yt(){for(let i in Z.requests)Z.requests.hasOwnProperty(i)&&Z.requests[i].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",yt):"function"==typeof addEventListener&&addEventListener("onpagehide"in k?"pagehide":"unload",yt,!1));const vt="function"==typeof Promise&&"function"==typeof Promise.resolve?n=>Promise.resolve().then(n):(n,t)=>t(n,0),B=k.WebSocket||k.MozWebSocket,bt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),ve={websocket:class ye extends ct{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),t=this.opts.protocols,s=bt?{}:at(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=bt?new B(n,t,s):t?new B(n,t):new B(n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let t=0;t<n.length;t++){const o=t===n.length-1;nt(n[t],this.supportsBinary,r=>{try{this.ws.send(r)}catch(h){}o&&vt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let n=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(n[this.opts.timestampParam]=gt()),this.supportsBinary||(n.b64=1);const o=ft(n);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(o.length?"?"+o:"")}check(){return!!B}},polling:class _e extends ct{constructor(n){if(super(n),this.polling=!1,"undefined"!=typeof location){const s="https:"===location.protocol;let o=location.port;o||(o=s?"443":"80"),this.xd="undefined"!=typeof location&&n.hostname!==location.hostname||o!==n.port,this.xs=n.secure!==s}this.supportsBinary=fe&&!(n&&n.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const t=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){((i,n)=>{const t=i.split(ot),s=[];for(let o=0;o<t.length;o++){const r=st(t[o],n);if(s.push(r),"error"===r.type)break}return s})(n,this.socket.binaryType).forEach(s=>{if("opening"===this.readyState&&"open"===s.type&&this.onOpen(),"close"===s.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};"open"===this.readyState?n():this.once("open",n)}write(n){this.writable=!1,((i,n)=>{const t=i.length,s=new Array(t);let o=0;i.forEach((r,a)=>{nt(r,!1,h=>{s[a]=h,++o===t&&n(s.join(ot))})})})(n,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let n=this.query||{};const t=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(n[this.opts.timestampParam]=gt()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const o=ft(n);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(o.length?"?"+o:"")}request(n={}){return Object.assign(n,{xd:this.xd,xs:this.xs},this.opts),new Z(this.uri(),n)}doWrite(n,t){const s=this.request({method:"POST",data:n});s.on("success",t),s.on("error",(o,r)=>{this.onError("xhr post error",o,r)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=n}}},be=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function F(i){const n=i,t=i.indexOf("["),s=i.indexOf("]");-1!=t&&-1!=s&&(i=i.substring(0,t)+i.substring(t,s).replace(/:/g,";")+i.substring(s,i.length));let o=be.exec(i||""),r={},a=14;for(;a--;)r[xe[a]]=o[a]||"";return-1!=t&&-1!=s&&(r.source=n,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function Ce(i,n){const s=n.replace(/\/{2,9}/g,"/").split("/");return("/"==n.slice(0,1)||0===n.length)&&s.splice(0,1),"/"==n.slice(-1)&&s.splice(s.length-1,1),s}(0,r.path),r.queryKey=function ke(i,n){const t={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,o,r){o&&(t[o]=r)}),t}(0,r.query),r}let xt=(()=>{class i extends u{constructor(t,s={}){super(),t&&"object"==typeof t&&(s=t,t=null),t?(t=F(t),s.hostname=t.host,s.secure="https"===t.protocol||"wss"===t.protocol,s.port=t.port,t.query&&(s.query=t.query)):s.host&&(s.hostname=F(s.host).host),E(this,s),this.secure=null!=s.secure?s.secure:"undefined"!=typeof location&&"https:"===location.protocol,s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=s.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=s.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},s),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function pe(i){let n={},t=i.split("&");for(let s=0,o=t.length;s<o;s++){let r=t[s].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=4,s.transport=t,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts.transportOptions[t],this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ve[t](o)}open(){let t;if(this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(s){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",s=>this.onClose("transport close",s))}probe(t){let s=this.createTransport(t),o=!1;i.priorWebsocketSuccess=!1;const r=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",f=>{if(!o)if("pong"===f.type&&"probe"===f.data){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;i.priorWebsocketSuccess="websocket"===s.name,this.transport.pause(()=>{o||"closed"!==this.readyState&&(v(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=s.name,this.emitReserved("upgradeError",_)}}))};function a(){o||(o=!0,v(),s.close(),s=null)}const h=f=>{const _=new Error("probe error: "+f);_.transport=s.name,a(),this.emitReserved("upgradeError",_)};function p(){h("transport closed")}function g(){h("socket closed")}function d(f){s&&f.name!==s.name&&a()}const v=()=>{s.removeListener("open",r),s.removeListener("error",h),s.removeListener("close",p),this.off("close",g),this.off("upgrading",d)};s.once("open",r),s.once("error",h),s.once("close",p),this.once("close",g),this.once("upgrading",d),s.open()}onOpen(){if(this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const s=this.upgrades.length;for(;t<s;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const s=new Error("server error");s.code=t.data,this.onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const r=this.writeBuffer[o].data;if(r&&(s+=le(r)),o>0&&s>this.maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}write(t,s,o){return this.sendPacket("message",t,s,o),this}send(t,s,o){return this.sendPacket("message",t,s,o),this}sendPacket(t,s,o,r){if("function"==typeof s&&(r=s,s=void 0),"function"==typeof o&&(r=o,o=null),"closing"===this.readyState||"closed"===this.readyState)return;(o=o||{}).compress=!1!==o.compress;const a={type:t,data:s,options:o};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}onError(t){i.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,s){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const s=[];let o=0;const r=t.length;for(;o<r;o++)~this.transports.indexOf(t[o])&&s.push(t[o]);return s}}return i.protocol=4,i})();const Oe="function"==typeof ArrayBuffer,Ct=Object.prototype.toString,we="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ct.call(Blob),De="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ct.call(File);function Y(i){return Oe&&(i instanceof ArrayBuffer||(i=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer)(i))||we&&i instanceof Blob||De&&i instanceof File}function I(i,n){if(!i||"object"!=typeof i)return!1;if(Array.isArray(i)){for(let t=0,s=i.length;t<s;t++)if(I(i[t]))return!0;return!1}if(Y(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return I(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&I(i[t]))return!0;return!1}function Ae(i){const n=[],s=i;return s.data=Q(i.data,n),s.attachments=n.length,{packet:s,buffers:n}}function Q(i,n){if(!i)return i;if(Y(i)){const t={_placeholder:!0,num:n.length};return n.push(i),t}if(Array.isArray(i)){const t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=Q(i[s],n);return t}if("object"==typeof i&&!(i instanceof Date)){const t={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=Q(i[s],n));return t}return i}function Te(i,n){return i.data=H(i.data,n),i.attachments=void 0,i}function H(i,n){if(!i)return i;if(i&&!0===i._placeholder){if("number"==typeof i.num&&i.num>=0&&i.num<n.length)return n[i.num];throw new Error("illegal attachments")}if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=H(i[t],n);else if("object"==typeof i)for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=H(i[t],n));return i}const kt=5;var c=(()=>{return(i=c||(c={}))[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",c;var i})();class Se{constructor(n){this.replacer=n}encode(n){return n.type!==c.EVENT&&n.type!==c.ACK||!I(n)?[this.encodeAsString(n)]:(n.type=n.type===c.EVENT?c.BINARY_EVENT:c.BINARY_ACK,this.encodeAsBinary(n))}encodeAsString(n){let t=""+n.type;return(n.type===c.BINARY_EVENT||n.type===c.BINARY_ACK)&&(t+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(t+=n.nsp+","),null!=n.id&&(t+=n.id),null!=n.data&&(t+=JSON.stringify(n.data,this.replacer)),t}encodeAsBinary(n){const t=Ae(n),s=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(s),o}}class V extends u{constructor(n){super(),this.reviver=n}add(n){let t;if("string"==typeof n){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(n),t.type===c.BINARY_EVENT||t.type===c.BINARY_ACK?(this.reconstructor=new Ee(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Y(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(n),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(n){let t=0;const s={type:Number(n.charAt(0))};if(void 0===c[s.type])throw new Error("unknown packet type "+s.type);if(s.type===c.BINARY_EVENT||s.type===c.BINARY_ACK){const r=t+1;for(;"-"!==n.charAt(++t)&&t!=n.length;);const a=n.substring(r,t);if(a!=Number(a)||"-"!==n.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(a)}if("/"===n.charAt(t+1)){const r=t+1;for(;++t&&","!==n.charAt(t)&&t!==n.length;);s.nsp=n.substring(r,t)}else s.nsp="/";const o=n.charAt(t+1);if(""!==o&&Number(o)==o){const r=t+1;for(;++t;){const a=n.charAt(t);if(null==a||Number(a)!=a){--t;break}if(t===n.length)break}s.id=Number(n.substring(r,t+1))}if(n.charAt(++t)){const r=this.tryParse(n.substr(t));if(!V.isPayloadValid(s.type,r))throw new Error("invalid payload");s.data=r}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch(t){return!1}}static isPayloadValid(n,t){switch(n){case c.CONNECT:return"object"==typeof t;case c.DISCONNECT:return void 0===t;case c.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case c.EVENT:case c.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case c.ACK:case c.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Ee{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const t=Te(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function m(i,n,t){return i.on(n,t),function(){i.off(n,t)}}const Le=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $ extends u{constructor(n,t,s){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[m(n,"open",this.onopen.bind(this)),m(n,"packet",this.onpacket.bind(this)),m(n,"error",this.onerror.bind(this)),m(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...t){if(Le.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');t.unshift(n);const s={type:c.EVENT,data:t,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const a=this.ids++,h=t.pop();this._registerAckCallback(a,h),s.id=a}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(n,t){const s=this.flags.timeout;if(void 0===s)return void(this.acks[n]=t);const o=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let r=0;r<this.sendBuffer.length;r++)this.sendBuffer[r].id===n&&this.sendBuffer.splice(r,1);t.call(this,new Error("operation has timed out"))},s);this.acks[n]=(...r)=>{this.io.clearTimeoutFn(o),t.apply(this,[null,...r])}}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){"function"==typeof this.auth?this.auth(n=>{this.packet({type:c.CONNECT,data:n})}):this.packet({type:c.CONNECT,data:this.auth})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,t)}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case c.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case c.EVENT:case c.BINARY_EVENT:this.onevent(n);break;case c.ACK:case c.BINARY_ACK:this.onack(n);break;case c.DISCONNECT:this.ondisconnect();break;case c.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s)}}onevent(n){const t=n.data||[];null!=n.id&&t.push(this.ack(n.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,n)}super.emit.apply(this,n)}ack(n){const t=this;let s=!1;return function(...o){s||(s=!0,t.packet({type:c.ACK,id:n,data:o}))}}onack(n){const t=this.acks[n.id];"function"==typeof t&&(t.apply(this,n.data),delete this.acks[n.id])}onconnect(n){this.id=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:c.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(n===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(n===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,n.data)}}}function P(i){this.ms=(i=i||{}).min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}P.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),t=Math.floor(n*this.jitter*i);i=0==(1&Math.floor(10*n))?i-t:i+t}return 0|Math.min(i,this.max)},P.prototype.reset=function(){this.attempts=0},P.prototype.setMin=function(i){this.ms=i},P.prototype.setMax=function(i){this.max=i},P.prototype.setJitter=function(i){this.jitter=i};class N extends u{constructor(n,t){var s;super(),this.nsps={},this.subs=[],n&&"object"==typeof n&&(t=n,n=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,E(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new P({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=n;const o=t.parser||U;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return void 0===n?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var t;return void 0===n?this._reconnectionDelay:(this._reconnectionDelay=n,null===(t=this.backoff)||void 0===t||t.setMin(n),this)}randomizationFactor(n){var t;return void 0===n?this._randomizationFactor:(this._randomizationFactor=n,null===(t=this.backoff)||void 0===t||t.setJitter(n),this)}reconnectionDelayMax(n){var t;return void 0===n?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,null===(t=this.backoff)||void 0===t||t.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new xt(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const o=m(t,"open",function(){s.onopen(),n&&n()}),r=m(t,"error",a=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",a),n?n(a):s.maybeReconnectOnOpen()});if(!1!==this._timeout){const a=this._timeout;0===a&&o();const h=this.setTimeoutFn(()=>{o(),t.close(),t.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&h.unref(),this.subs.push(function(){clearTimeout(h)})}return this.subs.push(o),this.subs.push(r),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(m(n,"ping",this.onping.bind(this)),m(n,"data",this.ondata.bind(this)),m(n,"error",this.onerror.bind(this)),m(n,"close",this.onclose.bind(this)),m(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(t){this.onclose("parse error",t)}}ondecoded(n){vt(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,t){let s=this.nsps[n];return s||(s=new $(this,n,t),this.nsps[n]=s),s}_destroy(n){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(n){const t=this.encoder.encode(n);for(let s=0;s<t.length;s++)this.engine.write(t[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(o=>{o?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",o)):n.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const A={};function b(i,n){"object"==typeof i&&(n=i,i=void 0);const t=function Me(i,n="",t){let s=i;t=t||"undefined"!=typeof location&&location,null==i&&(i=t.protocol+"//"+t.host),"string"==typeof i&&("/"===i.charAt(0)&&(i="/"===i.charAt(1)?t.protocol+i:t.host+i),/^(https?|wss?):\/\//.test(i)||(i=void 0!==t?t.protocol+"//"+i:"https://"+i),s=F(i)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+n,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}(i,(n=n||{}).path||"/socket.io"),s=t.source,o=t.id;let p;return n.forceNew||n["force new connection"]||!1===n.multiplex||A[o]&&t.path in A[o].nsps?p=new N(s,n):(A[o]||(A[o]=new N(s,n)),p=A[o]),t.query&&!n.query&&(n.query=t.queryKey),p.socket(t.path,n)}Object.assign(b,{Manager:N,Socket:$,io:b,connect:b});var Ze=l(579),Be=l(520);let Ie=(()=>{class i{constructor(t){this.http=t}getInboxData(){return this.http.get(`${C.N.endPointUrl}/user/travelling/chat/inbox`)}fetchChatHistory(t,s){return this.http.get(`${C.N.endPointUrl}/user/travelling/chat/chat-history/${t}?booking_id=${s}`)}uploadChatImage(t){return this.http.put(`${C.N.endPointUrl}/user/travelling/chat/upload-image`,t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Be.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ne=l(9592),R=l(4239),Re=l(9113),Mt=l(1894),ze=l(5181),Ue=l(2683),qe=l(3087),Je=l(6042),j=l(1047),T=l(3075),Fe=l(9590);const Ye=["scrollMe"];function Qe(i,n){1&i&&e._UZ(0,"img",35)}function He(i,n){if(1&i&&e._UZ(0,"img",36),2&i){const t=e.oxw().$implicit;e.Q6J("src",null==t||null==t.receiver?null:t.receiver.avatar,e.LSH)}}function Ve(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"...."),e.qZA())}function $e(i,n){if(1&i&&(e.TgZ(0,"span",37),e._uU(1),e.ALo(2,"slice"),e.YNc(3,Ve,2,0,"span",38),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.Dn7(2,2,null==t?null:t.message,0,30)," "),e.xp6(2),e.Q6J("ngIf",(null==t||null==t.message?null:t.message.length)>30)}}function je(i,n){1&i&&(e.TgZ(0,"span",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Photo")," "))}function Ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"li",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(4).openChat(r)}),e.TgZ(1,"div",27),e.YNc(2,Qe,1,0,"img",28),e.YNc(3,He,1,1,"img",29),e.qZA(),e.TgZ(4,"div",30)(5,"span",31),e._uU(6),e.qZA(),e.YNc(7,$e,4,6,"span",32),e.YNc(8,je,3,3,"span",32),e.TgZ(9,"span",33),e._uU(10),e.ALo(11,"translate"),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"date"),e.qZA(),e._uU(15," - "),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"span",34)(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA()()()()()}if(2&i){const t=n.$implicit,s=e.oxw(4);e.xp6(2),e.Q6J("ngIf",!(null!=t&&null!=t.receiver&&t.receiver.avatar)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.receiver?null:t.receiver.avatar),e.xp6(3),e.Oqu(null==t||null==t.receiver?null:t.receiver.first_name),e.xp6(1),e.Q6J("ngIf",!s.checkMessage(null==t?null:t.message)),e.xp6(1),e.Q6J("ngIf",s.checkMessage(null==t?null:t.message)),e.xp6(2),e.hij(" ",e.lcZ(11,9,"Chat.Booking")," : "),e.xp6(3),e.Oqu(e.xi3(14,11,null==t||null==t.booking?null:t.booking.booked_from,"shortDate")),e.xp6(4),e.Oqu(e.xi3(18,14,null==t||null==t.booking?null:t.booking.booked_to,"shortDate")),e.xp6(4),e.Oqu(e.xi3(22,17,null==t?null:t.created_at,"shortDate"))}}function We(i,n){if(1&i&&(e.TgZ(0,"div",23)(1,"ul",24),e.YNc(2,Ke,23,20,"li",25),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.inboxData)}}function Xe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",39)(1,"app-empty-state",40),e.NdJ("btnClicked",function(){return e.CHM(t),e.oxw(3).onBrowseBtnClicked()}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}const z=function(){return{span:24}},Ge=function(){return{span:6}};function tn(i,n){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,We,3,1,"div",21),e.YNc(6,Xe,2,5,"div",22),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("nzXs",e.DdM(7,z))("nzLg",e.DdM(8,Ge)),e.xp6(3),e.Oqu(e.lcZ(4,5,"Chat.Messages")),e.xp6(2),e.Q6J("ngIf",null==t.inboxData?null:t.inboxData.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.inboxData&&t.inboxData.length||t.loading))}}function en(i,n){if(1&i&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.bookingData||null==t.bookingData.traveller?null:t.bookingData.traveller.first_name," ",null==t.bookingData||null==t.bookingData.traveller?null:t.bookingData.traveller.last_name," ")}}function nn(i,n){if(1&i&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.first_name," ",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.last_name," ")}}function sn(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Chat.HideBookingDetails")))}function on(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Chat.ShowBookingDetails")))}function rn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",41),e._UZ(1,"span",42),e.TgZ(2,"div",43)(3,"div",44),e.YNc(4,en,2,2,"h2",38),e.YNc(5,nn,2,2,"h2",38),e.TgZ(6,"span",45),e._uU(7),e.ALo(8,"translate"),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA(),e._uU(12," - "),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.TgZ(16,"div",46)(17,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.onAskForHelp(null==o.bookingData?null:o.bookingData.id)}),e._UZ(18,"i",48),e.TgZ(19,"span",49),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"span",50),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openShowDetails()}),e.YNc(23,sn,3,3,"span",38),e.YNc(24,on,3,3,"span",38),e.qZA(),e.TgZ(25,"span",51),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openDetailsForMobile()}),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"translate"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.userId===(null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.id)),e.xp6(1),e.Q6J("ngIf",t.userId!=(null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.id)),e.xp6(2),e.hij(" ",e.lcZ(8,9,"Chat.Booking")," : "),e.xp6(3),e.Oqu(e.xi3(11,11,null==t.bookingData?null:t.bookingData.booked_from,"shortDate")),e.xp6(4),e.Oqu(e.xi3(15,14,null==t.bookingData?null:t.bookingData.booked_to,"shortDate")),e.xp6(6),e.Oqu(e.lcZ(21,17,"Booking.help")),e.xp6(3),e.Q6J("ngIf",t.isShowDetails),e.xp6(1),e.Q6J("ngIf",!t.isShowDetails),e.xp6(3),e.Oqu(e.lcZ(28,19,"Chat.ShowBookingDetails"))}}function an(i,n){1&i&&e._UZ(0,"img",62)}function cn(i,n){if(1&i&&e._UZ(0,"img",63),2&i){const t=e.oxw().$implicit;e.Q6J("src",null==t||null==t.sender?null:t.sender.avatar,e.LSH)}}function ln(i,n){if(1&i&&(e.TgZ(0,"div",64)(1,"span",65),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",31),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.xi3(3,2,null==t?null:t.created_at,"d, MMM, y, h:mm a")),e.xp6(3),e.Oqu(null==t||null==t.sender?null:t.sender.first_name)}}function hn(i,n){if(1&i&&(e.TgZ(0,"div",64)(1,"span",31),e._uU(2),e.qZA(),e.TgZ(3,"span",65),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(null==t||null==t.sender?null:t.sender.first_name),e.xp6(2),e.Oqu(e.xi3(5,2,null==t?null:t.created_at,"d, MMM, y, h:mm a"))}}function un(i,n){if(1&i&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.message)}}function pn(i,n){if(1&i&&(e.TgZ(0,"span",30),e._UZ(1,"img",66),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==t?null:t.message,e.LSH)}}function dn(i,n){if(1&i&&(e.TgZ(0,"li",55)(1,"div",56),e.YNc(2,an,1,0,"img",57),e.YNc(3,cn,1,1,"img",58),e.YNc(4,ln,6,5,"div",59),e.YNc(5,hn,6,5,"div",59),e.qZA(),e.TgZ(6,"div",60),e.YNc(7,un,2,1,"span",61),e.YNc(8,pn,2,1,"span",61),e.qZA()()),2&i){const t=n.$implicit,s=e.oxw(3);e.Q6J("ngClass",s.userId===(null==t?null:t.sender_id)?"sender":"align-items-end"),e.xp6(2),e.Q6J("ngIf",!(null!=t&&null!=t.sender&&t.sender.avatar)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.sender?null:t.sender.avatar),e.xp6(1),e.Q6J("ngIf",s.userId===(null==t?null:t.sender_id)),e.xp6(1),e.Q6J("ngIf",s.userId!=(null==t?null:t.sender_id)),e.xp6(2),e.Q6J("ngIf","MESSAGE"===(null==t?null:t.type)),e.xp6(1),e.Q6J("ngIf","IMAGE"===(null==t?null:t.type))}}function gn(i,n){1&i&&(e.TgZ(0,"li",67)(1,"div",68),e._UZ(2,"div",69)(3,"div",64),e.qZA(),e._UZ(4,"div",70),e.qZA())}function fn(i,n){if(1&i&&(e.TgZ(0,"ul",52),e.YNc(1,dn,9,7,"li",53),e.YNc(2,gn,5,0,"li",54),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.messagesData),e.xp6(1),e.Q6J("ngIf",t.uploadImageLoading)}}function _n(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",71)(1,"app-empty-state",40),e.NdJ("btnClicked",function(){return e.CHM(t),e.oxw(2).onBrowseBtnClicked()}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("title",t.emptyMessagesData.title)("text",t.emptyMessagesData.text)("icon",t.emptyMessagesData.icon)("withBtn",t.emptyMessagesData.withBtn)("btnText",t.emptyMessagesData.btnText)}}function mn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"i",72),e.NdJ("click",function(){return e.CHM(t),e.MAs(2).click()}),e.qZA(),e.TgZ(1,"input",73,74),e.NdJ("change",function(o){return e.CHM(t),e.oxw(2).onSelectImage(o)}),e.qZA()}}function yn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"i",75),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sendMessage()}),e.qZA()}}const Ot=function(){return{span:0}},vn=function(){return{span:7}};function bn(i,n){if(1&i&&(e.TgZ(0,"div",76),e._UZ(1,"app-details-booking",77),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("nzXs",e.DdM(5,Ot))("nzMd",e.DdM(6,Ot))("nzLg",e.DdM(7,vn)),e.xp6(1),e.Q6J("priceDetails",t.bookingPriceData)("bookingDetails",t.bookingData)}}const xn=function(){return{span:22}},Cn=function(){return{span:11}};function kn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"section",2)(1,"div",3)(2,"div",4),e.YNc(3,tn,7,9,"div",5),e.TgZ(4,"div",6),e.YNc(5,rn,29,21,"div",7),e.TgZ(6,"div",8,9),e.YNc(8,fn,3,2,"ul",10),e.TgZ(9,"div",11),e.YNc(10,_n,2,5,"div",12),e.qZA()(),e.TgZ(11,"div",13)(12,"nz-input-group",14)(13,"input",15),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().msg=o})("keyup.enter",function(){return e.CHM(t),e.oxw().sendMessage()}),e.qZA()(),e.YNc(14,mn,3,0,"ng-template",null,16,e.W1O),e.YNc(16,yn,1,0,"ng-template",null,17,e.W1O),e.qZA()(),e.YNc(18,bn,2,8,"div",18),e.qZA()()()}if(2&i){const t=e.MAs(7),s=e.MAs(15),o=e.MAs(17),r=e.oxw();e.xp6(1),e.Q6J("nzXs",e.DdM(14,z))("nzLg",e.DdM(15,xn)),e.xp6(2),e.Q6J("ngIf",r.isListMessages),e.xp6(1),e.Q6J("nzXs",e.DdM(16,z))("nzLg",e.DdM(17,Cn))("nzMd",e.DdM(18,z)),e.xp6(1),e.Q6J("ngIf",r.bookingData),e.xp6(1),e.Q6J("scrollTop",t.scrollHeight),e.xp6(2),e.Q6J("ngIf",null==r.messagesData?null:r.messagesData.length),e.xp6(2),e.Q6J("ngIf",!(null!=r.messagesData&&r.messagesData.length)),e.xp6(2),e.Q6J("nzSuffix",o)("nzPrefix",s),e.xp6(1),e.Q6J("ngModel",r.msg),e.xp6(5),e.Q6J("ngIf",r.isShowDetails&&!r.isCollapsedModelDetails)}}function Mn(i,n){1&i&&e._UZ(0,"span",81)}function On(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Mn,1,0,"ng-template",null,79,e.W1O),e._UZ(3,"nz-spin",80),e.qZA()),2&i){const t=e.MAs(2);e.xp6(3),e.Q6J("nzIndicator",t)}}let Pt=(()=>{class i{constructor(t,s,o,r,a,h,p,g,d){this.chatService=t,this.commonService=s,this.translateService=o,this.cookieService=r,this.route=a,this.router=h,this.bookingsService=p,this.modal=g,this.viewContainerRef=d,this.isShowDetails=!1,this.isListMessages=!0,this.isScreenMessages=!0,this.loading=!1,this.inboxData=[],this.msg="",this.messagesData=[],this.userRole=C.N.userRole,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.emptyMessagesData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.socket=b(C.N.endPointUrl),this.uploadImageLoading=!1,this.openFirstChat=!1,this.subscriptions=new W.w0}ngOnInit(){this.getBookingFromRoute(),this.getUserData(),this.handleEmptyInboxData(),this.handleEmptyData(),this.receiveMessage()}ngAfterViewInit(){this.onResize()}onResize(){this.innerWidth=window.innerWidth,this.isCollapsedModelDetails=!(this.innerWidth>768)}getUserData(){var t;this.cookieService.get("userData")&&(this.userId=null===(t=JSON.parse(this.cookieService.get("userData")))||void 0===t?void 0:t.id,this.fetchInboxData(),this.getBookingId(),this.socketConnect())}checkMessage(t){return/(https?:\/\/)?(www\.)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)|(https?:\/\/)?(www\.)?(?!ww)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(t)}getBookingFromRoute(){this.route.paramMap.subscribe(t=>{var s,o;(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.id)?(this.bookingId=null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.id,this.fetchBookingData()):this.openFirstChat=!0})}getChatHistory(t,s){this.subscriptions.add(this.chatService.fetchChatHistory(t,s).subscribe({next:o=>{var r;(null==o?void 0:o.successful)&&(this.messagesData=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.messages.reverse())}}))}getBookingId(){this.route.paramMap.subscribe(t=>{var s,o;(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.id)&&(this.bookingId=null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.id,this.bookingId&&this.fetchBookingData())})}fetchBookingData(){this.loading=!0;const t="HOST"===this.userRole?this.bookingsService.getHostBookingDetails(this.bookingId):this.bookingsService.getBookingDetails(this.bookingId);this.subscriptions.add(t.subscribe({next:s=>{var o,r,a,h,p,g,d,v,f,_;this.bookingData=null===(o=null==s?void 0:s.data)||void 0===o?void 0:o.booking,this.bookingPriceData=null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.priceDetails,this.receiverId=this.userId===(null===(h=null===(a=this.bookingData)||void 0===a?void 0:a.host)||void 0===h?void 0:h.id)?null===(g=null===(p=this.bookingData)||void 0===p?void 0:p.traveller)||void 0===g?void 0:g.id:null===(v=null===(d=this.bookingData)||void 0===d?void 0:d.host)||void 0===v?void 0:v.id,this.loading=!1,this.bookingId=null===(_=null===(f=null==s?void 0:s.data)||void 0===f?void 0:f.booking)||void 0===_?void 0:_.id,this.getChatHistory(this.receiverId,this.bookingId),this.isShowDetails=!0},error:s=>{this.loading=!1}}))}fetchInboxData(){this.loading=!0,this.subscriptions.add(this.chatService.getInboxData().subscribe({next:t=>{var s,o,r,a,h,p,g,d,v,f,_;this.loading=!1,this.inboxData=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.allInbox,(null===(o=this.inboxData)||void 0===o?void 0:o.length)&&(this.receiverId=this.inboxData[0].is_me?null===(r=this.inboxData[0])||void 0===r?void 0:r.receiver_id:null===(a=this.inboxData[0])||void 0===a?void 0:a.sender_id,this.bookingId=null===(p=null===(h=this.inboxData[0])||void 0===h?void 0:h.booking)||void 0===p?void 0:p.id,(null===(g=this.inboxData)||void 0===g?void 0:g.length)&&this.openFirstChat&&(this.getChatHistory(this.inboxData[0].is_me?null===(d=this.inboxData[0])||void 0===d?void 0:d.receiver_id:null===(v=this.inboxData[0])||void 0===v?void 0:v.sender_id,null===(_=null===(f=this.inboxData[0])||void 0===f?void 0:f.booking)||void 0===_?void 0:_.id),this.fetchBookingData()))},error:t=>{var s;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(s=null==t?void 0:t.error)||void 0===s?void 0:s.message)}}))}handleEmptyData(){this.emptyMessagesData={title:this.translateService.instant("General.SayHi"),text:"",icon:"assets/imgs/hi-icon.png",withBtn:!1,btnText:this.translateService.instant("General.Browse")}}handleEmptyInboxData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.NoMessages"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:this.translateService.instant("General.Browse")}}onBrowseBtnClicked(){this.router.navigateByUrl("/")}onSelectImage(t){this.uploadChatImage(t.target.files[0])}uploadChatImage(t){this.uploadImageLoading=!0;const s=new FormData;s.set("image",t),this.subscriptions.add(this.chatService.uploadChatImage(s).subscribe({next:o=>{var r;this.uploadImageLoading=!1,this.msg=null===(r=o.data)||void 0===r?void 0:r.url,this.sendMessage("IMAGE")},error:o=>{var r;this.uploadImageLoading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message)}}))}socketConnect(){var t;null===(t=this.socket)||void 0===t||t.on("connected",(s,o)=>{o({user_id:this.userId})})}sendMessage(t="MESSAGE"){let s={receiver_id:this.receiverId,type:t,booking_id:this.bookingId,message:this.msg};""!=s.message&&this.socket.emit("sendMessage",s,o=>{var r;this.receiverId!==this.userId&&this.messagesData.push(null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.message),this.msg=""})}receiveMessage(){this.socket.on("receiveMessage",t=>{this.messagesData.push(t.message)})}openChat(t){var s,o;this.bookingId=null===(s=null==t?void 0:t.booking)||void 0===s?void 0:s.id,this.receiverId=(null==t?void 0:t.is_me)?null==t?void 0:t.receiver_id:null==t?void 0:t.sender_id,this.fetchBookingData(),this.getChatHistory(this.receiverId,null===(o=null==t?void 0:t.booking)||void 0===o?void 0:o.id)}openShowDetails(){this.isShowDetails=!this.isShowDetails}openDetailsForMobile(){this.modal.create({nzTitle:this.translateService.instant("PlaceDetails.BookingDetails"),nzContent:tt,nzViewContainerRef:this.viewContainerRef,nzComponentParams:{priceDetails:this.bookingPriceData,bookingDetails:this.bookingData}})}onAskForHelp(t){this.modal.create({nzTitle:this.translateService.instant("General.SendMassegeRoomz"),nzContent:Ze.M,nzComponentParams:{bookingId:t}})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ie),e.Y36(G.v),e.Y36(w.sK),e.Y36(Ne.N_),e.Y36(R.gz),e.Y36(R.F0),e.Y36(Re.F),e.Y36(X.Sf),e.Y36(e.s_b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-messages-layout"]],viewQuery:function(t,s){if(1&t&&e.Gf(Ye,5),2&t){let o;e.iGM(o=e.CRH())&&(s.myScrollContainer=o.first)}},hostBindings:function(t,s){1&t&&e.NdJ("resize",function(){return s.myScrollContainer()},!1,e.Jf7)},decls:2,vars:2,consts:[["nz-row","","id","chat",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-row","","id","chat"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],["nz-row","",1,"layouts"],["nz-col","","class","border-start-0 list-chats",3,"nzXs","nzLg",4,"ngIf"],["nz-col","",1,"border-start-0","chats-screen",3,"nzXs","nzLg","nzMd"],["class","d-flex justify-content-between align-items-center name-chat",4,"ngIf"],[1,"mess",3,"scrollTop"],["scrollMe",""],["class","list-unstyled",4,"ngIf"],[1,"mt-5","mb-5"],["class","empty-state mt-5 mb-5",4,"ngIf"],[1,"input-mess"],[3,"nzSuffix","nzPrefix"],["type","text","nz-input","","placeholder","Type a Message",3,"ngModel","ngModelChange","keyup.enter"],["prefixTemplateUser",""],["suffixTemplateInfo",""],["nz-col","","class","border-start-0 border-end-0","style","overflow-y: scroll",3,"nzXs","nzMd","nzLg",4,"ngIf"],["nz-col","",1,"border-start-0","list-chats",3,"nzXs","nzLg"],[1,"title"],["class","pepole",4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],[1,"pepole"],[1,"pepole-list","list-unstyled"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"img-avatar"],["src","assets/imgs/no-user-img.jpg","class","img-fluid","alt","img-avatar",4,"ngIf"],["class","img-fluid","alt","img-avatar",3,"src",4,"ngIf"],[1,"content"],[1,"name"],["class","message",4,"ngIf"],[1,"details-booking","d-block"],[1,"d-block"],["src","assets/imgs/no-user-img.jpg","alt","img-avatar",1,"img-fluid"],["alt","img-avatar",1,"img-fluid",3,"src"],[1,"message"],[4,"ngIf"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"d-flex","justify-content-between","align-items-center","name-chat"],["nz-icon","","nzType","caret-left","nzTheme","outline",1,"d-md-none","d-block","ms-4"],[1,"title","border-bottom-0"],[1,"user-info"],[1,"details-booking"],[1,"show-details"],["nz-button","","nzType","link",1,"help-btn",3,"click"],["nz-icon","","nzType","question-circle","nzTheme","outline"],[1,"text"],[1,"details-trigger","trigger-desktop",3,"click"],[1,"details-trigger","trigger-mobile",3,"click"],[1,"list-unstyled"],["class","item-mess d-flex",3,"ngClass",4,"ngFor","ngForOf"],["class","item-mess d-flex image-loading",4,"ngIf"],[1,"item-mess","d-flex",3,"ngClass"],[1,"name-img-wrapper"],["class","user-img","src","assets/imgs/no-user-img.jpg","alt","",4,"ngIf"],["class","user-img","alt","",3,"src",4,"ngIf"],["class","name-date",4,"ngIf"],[1,"content-wrapper"],["class","content",4,"ngIf"],["src","assets/imgs/no-user-img.jpg","alt","",1,"user-img"],["alt","",1,"user-img",3,"src"],[1,"name-date"],[1,"time"],["alt","",3,"src"],[1,"item-mess","d-flex","image-loading"],[1,""],[1,"img"],[1,"img-skelton"],[1,"empty-state","mt-5","mb-5"],["nz-icon","","nzType","link","nzTheme","outline",3,"click"],["type","file",1,"d-none",3,"change"],["imgFile",""],["nz-icon","","nzType","send","nzTheme","outline",3,"click"],["nz-col","",1,"border-start-0","border-end-0",2,"overflow-y","scroll",3,"nzXs","nzMd","nzLg"],[3,"priceDetails","bookingDetails"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,s){1&t&&(e.YNc(0,kn,19,19,"section",0),e.YNc(1,On,4,1,"div",1)),2&t&&(e.Q6J("ngIf",!s.loading),e.xp6(1),e.Q6J("ngIf",s.loading))},directives:[x.O5,Mt.SK,Mt.t3,x.sg,ze.s,Ue.w,qe.Ls,Je.ix,x.mk,j.gB,j.ke,j.Zp,T.Fj,T.JJ,T.On,tt,Fe.W],pipes:[w.X$,x.OU,x.uU],styles:["#chat[_ngcontent-%COMP%]{position:relative;margin-top:2em;margin-bottom:2em}#chat[_ngcontent-%COMP%]   .layouts[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;border:1px solid #e6e6e6;border-bottom:0}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%], #chat[_ngcontent-%COMP%]   .list-chats[_ngcontent-%COMP%]{overflow-y:scroll}#chat[_ngcontent-%COMP%]   .name-chat[_ngcontent-%COMP%]{border-bottom:1px solid #e6e6e6}#chat[_ngcontent-%COMP%]   .name-chat[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]{color:var(--font-danger);text-decoration:underline;cursor:pointer;padding-inline-end:20px}#chat[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:1px solid #e6e6e6;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center}#chat[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:inline-block}#chat[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:30px;color:var(--bs-dark);margin-bottom:0}#chat[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .show-details[_ngcontent-%COMP%]{display:inline-block;font-size:14px;color:var(--bs-dark);text-align:end}#chat[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .show-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-decoration:underline;cursor:pointer}#chat[_ngcontent-%COMP%]   .details-booking[_ngcontent-%COMP%]{font-size:10px;color:var(--bs-gray-600)}#chat[_ngcontent-%COMP%]   .details-booking[_ngcontent-%COMP%]   .guest[_ngcontent-%COMP%]{color:var(--bs-blue);font-weight:600}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .details-booking[_ngcontent-%COMP%]{font-size:12px}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{cursor:pointer;overflow:auto;height:100%;transition:.3s background-color;padding:15px 10px;border-bottom:1px solid #e6e6e6}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}@media (max-width: 991px){#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding:15px 10px}}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .img-avatar[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .img-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:100%;object-fit:fill}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:inline-block;width:70%;padding-inline-start:10px}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;color:var(--bs-dark);font-weight:500;display:block}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-gray-600);display:block}#chat[_ngcontent-%COMP%]   .pepole[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:var(--bs-gray-600);font-weight:600}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]{position:relative}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]{padding:30px 30px 40px;min-height:60vh;height:60vh;overflow-y:scroll}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;margin-bottom:1em;position:sticky}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:10px;color:var(--bs-gray-600);display:block;text-align:center;width:100%}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]{margin-bottom:20px;flex-direction:column;justify-content:start}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .name-img-wrapper[_ngcontent-%COMP%], #chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:100%}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{width:40px;height:40px;display:block;margin-inline-end:13px;border-radius:100%;object-fit:fill;display:inline-block}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .name-date[_ngcontent-%COMP%]{display:inline-block}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .name-date[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--bs-dark)}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .name-date[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-inline-start:8px;margin-inline-end:8px;color:var(--bs-gray-600);font-size:12px}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:.5em;display:block;font-size:12px;color:var(--bs-gray-600);width:70%;height:auto;padding-inline-start:10%;word-break:break-all}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .item-mess[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:300px;object-fit:cover}#chat[_ngcontent-%COMP%]   .chats-screen[_ngcontent-%COMP%]   .mess[_ngcontent-%COMP%]   .input-mess[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;left:0}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d4d1d1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a09e9e}  #chat input{width:100%;border:none;outline:none;padding:10px;border-radius:8px;font-size:16px;font-weight:500;margin-block-end:10px}  #chat .ant-input-suffix,   #chat .ant-input-prefix{margin-inline-end:15px}  #chat .ant-input-suffix .anticon svg,   #chat .ant-input-prefix .anticon svg{font-size:22px;color:#b8b8b8}  #chat .ant-input-suffix .anticon{background-color:var(--bs-primary);width:40px;height:40px;border-radius:100%;display:flex;justify-content:center;align-items:center;padding:8px;cursor:pointer}  #chat .ant-input-suffix .anticon svg{font-size:22px;color:#f1f1f1}  #chat .ant-input-affix-wrapper{padding-inline-end:10px;border-radius:8px;margin-block-end:10px;bottom:0;max-width:100%;font-size:12px;border-inline:0}  #chat .ant-input-affix-wrapper:focus{border-color:transparent;box-shadow:none;border-right-width:0!important;outline:0}  #chat .ant-input:focus{border-right-width:0!important}  #chat .ant-input-affix-wrapper>input.ant-input{margin-block-end:0}.sender[_ngcontent-%COMP%]{justify-content:start;direction:rtl;text-align:start}.sender[_ngcontent-%COMP%]   .name-date[_ngcontent-%COMP%]{direction:ltr}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.image-loading[_ngcontent-%COMP%]{flex-direction:column;justify-content:start}.image-loading[_ngcontent-%COMP%]:lang(ar){direction:ltr;text-align:start}.image-loading[_ngcontent-%COMP%]:lang(en){direction:rtl;text-align:start}.image-loading[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:40px;height:40px;margin-inline-end:13px;border-radius:100%;background-color:var(--bs-gray-300);display:inline-block;vertical-align:bottom}.image-loading[_ngcontent-%COMP%]   .name-date[_ngcontent-%COMP%]{width:100px;height:15px;background-color:var(--bs-gray-300);display:inline-block}.image-loading[_ngcontent-%COMP%]   .img-skelton[_ngcontent-%COMP%]{margin-top:.5em;width:200px;height:300px;background-color:var(--bs-gray-300);display:block}.trigger-desktop[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.trigger-desktop[_ngcontent-%COMP%]{display:none}}.trigger-mobile[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.trigger-mobile[_ngcontent-%COMP%]{display:block}}.help-btn[_ngcontent-%COMP%]{color:#0473f2;margin-bottom:.5em}.help-btn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-inline-start:5px;vertical-align:middle}.help-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle}"]}),i})();const Pn=[{path:"",component:Pt},{path:":id",component:Pt}];let wn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[R.Bz.forChild(Pn)],R.Bz]}),i})();var Dn=l(8306),An=l(3099);class wt{constructor(n){this.config=n,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===n&&(n=this.emptyConfig),this.ioSocket=(b||q)(n.url,n.options)}of(n){this.ioSocket.of(n)}on(n,t){this.ioSocket.on(n,t)}once(n,t){this.ioSocket.once(n,t)}connect(){return this.ioSocket.connect()}disconnect(n){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(n,...t){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(n,t){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(n){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(n){return this.subscribersCounter[n]||(this.subscribersCounter[n]=0),this.subscribersCounter[n]++,this.eventObservables$[n]||(this.eventObservables$[n]=new Dn.y(t=>{const s=o=>{t.next(o)};return this.ioSocket.on(n,s),()=>{this.subscribersCounter[n]--,0===this.subscribersCounter[n]&&(this.ioSocket.removeListener(n,s),delete this.eventObservables$[n])}}).pipe((0,An.B)())),this.eventObservables$[n]}fromOneTimeEvent(n){return new Promise(t=>this.once(n,t))}}function Tn(i){return new wt(i)}const Dt=new e.OlP("__SOCKET_IO_CONFIG__");let Sn=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:Dt,useValue:t},{provide:wt,useFactory:Tn,deps:[Dt]}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var En=l(5326);const Ln={url:C.N.endPointUrl,options:{transports:["websocket"]}};let Zn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[x.ez,wn,At.P,w.aw,T.u5,T.UX,En.m,Sn.forRoot(Ln)]]}),i})()}}]);