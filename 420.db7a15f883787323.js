"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[420],{7242:(L,C,c)=>{c.r(C),c.d(C,{AccountHostModule:()=>Zt});var o=c(9808),h=c(727),_=c(2340),t=c(5e3),u=c(6952),f=c(6010),p=c(9592),v=c(4239),x=c(1894),b=c(6042),O=c(2643),P=c(2683),l=c(7484),m=c(3087),d=c(9590),g=c(1062);function A(e,i){if(1&e&&t._UZ(0,"img",28),2&e){const n=t.oxw(2);t.Q6J("src",null==n.profileData?null:n.profileData.avatar,t.LSH)}}function Z(e,i){if(1&e&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.profileData.first_name[0]+n.profileData.last_name[0]," ")}}function I(e,i){1&e&&(t.TgZ(0,"span",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" (",t.lcZ(2,1,"Auth.Traveller"),") "))}function J(e,i){1&e&&(t.TgZ(0,"span",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" (",t.lcZ(2,1,"Auth.Host"),") "))}function Y(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToHosting()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToHosting")," "))}function B(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToTraveller()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToTraveller")," "))}function H(e,i){1&e&&t._UZ(0,"i",32)}function Q(e,i){1&e&&t._UZ(0,"i",33)}function R(e,i){1&e&&t._UZ(0,"i",32)}function F(e,i){1&e&&t._UZ(0,"i",33)}function X(e,i){1&e&&t._UZ(0,"i",32)}function j(e,i){1&e&&t._UZ(0,"i",33)}function q(e,i){1&e&&t._UZ(0,"i",32)}function W(e,i){1&e&&t._UZ(0,"i",33)}function K(e,i){1&e&&t._UZ(0,"i",32)}function G(e,i){1&e&&t._UZ(0,"i",33)}function V(e,i){1&e&&t._UZ(0,"i",32)}function $(e,i){1&e&&t._UZ(0,"i",33)}const T=function(){return{span:24}},D=function(){return{span:7}},y=function(){return{span:11}};function tt(e,i){if(1&e&&(t.TgZ(0,"div",34)(1,"nz-card",23)(2,"div",16),t._UZ(3,"img",35),t.qZA(),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.YNc(7,q,1,0,"i",19),t.YNc(8,W,1,0,"i",20),t.qZA(),t.TgZ(9,"p",37),t._uU(10),t.ALo(11,"translate"),t.YNc(12,K,1,0,"i",19),t.YNc(13,G,1,0,"i",20),t.qZA(),t.TgZ(14,"p",38),t._uU(15),t.ALo(16,"translate"),t.YNc(17,V,1,0,"i",19),t.YNc(18,$,1,0,"i",20),t.qZA()()()),2&e){const n=t.oxw(2);t.Q6J("nzXs",t.DdM(18,T))("nzLg",t.DdM(19,D))("nzMd",t.DdM(20,y)),t.xp6(5),t.hij(" ",t.lcZ(6,12,"AccountHost.Calendar")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.hij(" ",t.lcZ(11,14,"AccountHost.BlockDate")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.hij(" ",t.lcZ(16,16,"AccountHost.Specific")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang)}}const nt=function(){return{span:23}},et=function(){return{span:20}},ot=function(){return{span:6}},at=function(){return{span:3}},it=function(){return{span:4}},ct=function(){return{span:16}},S=function(){return{span:10}};function rt(e,i){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,A,1,1,"img",7),t.YNc(8,Z,2,1,"div",8),t.qZA(),t.TgZ(9,"div",9),t._uU(10),t.YNc(11,I,3,3,"span",10),t.YNc(12,J,3,3,"span",10),t.TgZ(13,"div",11),t.YNc(14,Y,3,3,"button",12),t.YNc(15,B,3,3,"button",12),t.qZA()()(),t.TgZ(16,"div",13)(17,"div",14)(18,"nz-card",15)(19,"div",16),t._UZ(20,"img",17),t.qZA(),t.TgZ(21,"h4",18),t._uU(22),t.ALo(23,"translate"),t.YNc(24,H,1,0,"i",19),t.YNc(25,Q,1,0,"i",20),t.qZA(),t.TgZ(26,"p",21),t._uU(27),t.ALo(28,"translate"),t.qZA()()(),t.TgZ(29,"div",22)(30,"nz-card",23)(31,"div",16),t._UZ(32,"img",24),t.qZA(),t.TgZ(33,"h4",18),t._uU(34),t.ALo(35,"translate"),t.YNc(36,R,1,0,"i",19),t.YNc(37,F,1,0,"i",20),t.qZA(),t.TgZ(38,"p",21),t._uU(39),t.ALo(40,"translate"),t.qZA()()(),t.TgZ(41,"div",25)(42,"nz-card",23)(43,"div",16),t._UZ(44,"img",26),t.qZA(),t.TgZ(45,"h4",18),t._uU(46),t.ALo(47,"translate"),t.YNc(48,X,1,0,"i",19),t.YNc(49,j,1,0,"i",20),t.qZA(),t.TgZ(50,"p",21),t._uU(51),t.ALo(52,"translate"),t.qZA()()(),t.YNc(53,tt,19,21,"div",27),t.qZA()()),2&e){const n=t.oxw();t.Q6J("nzXs",t.DdM(53,nt))("nzLg",t.DdM(54,et)),t.xp6(3),t.Oqu(t.lcZ(4,39,"AccountHost.Account")),t.xp6(3),t.Q6J("nzXs",t.DdM(55,ot))("nzLg",t.DdM(56,at))("nzMd",t.DdM(57,it)),t.xp6(1),t.Q6J("ngIf",null==n.profileData?null:n.profileData.avatar),t.xp6(1),t.Q6J("ngIf",!(null!=n.profileData&&n.profileData.avatar)),t.xp6(1),t.Q6J("nzXs",t.DdM(58,ct))("nzLg",t.DdM(59,S))("nzMd",t.DdM(60,S)),t.xp6(1),t.AsE(" ",null==n.profileData?null:n.profileData.first_name," ",null==n.profileData?null:n.profileData.last_name," "),t.xp6(1),t.Q6J("ngIf","TRAVELLER"===n.userRole),t.xp6(1),t.Q6J("ngIf","HOST"===n.userRole),t.xp6(2),t.Q6J("ngIf","TRAVELLER"===n.userRole),t.xp6(1),t.Q6J("ngIf","HOST"===n.userRole),t.xp6(2),t.Q6J("nzXs",t.DdM(61,T))("nzLg",t.DdM(62,D))("nzMd",t.DdM(63,y)),t.xp6(5),t.hij(" ",t.lcZ(23,41,"AccountHost.Personal")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(28,43,"AccountHost.PersonalDesc")),t.xp6(2),t.Q6J("nzMd",t.DdM(64,y))("nzXs",t.DdM(65,T))("nzLg",t.DdM(66,D)),t.xp6(5),t.hij(" ",t.lcZ(35,45,"AccountHost.ChangePassword")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(40,47,"AccountHost.ChangeDesc")),t.xp6(2),t.Q6J("nzXs",t.DdM(67,T))("nzLg",t.DdM(68,D))("nzMd",t.DdM(69,y)),t.xp6(5),t.hij(" ",t.lcZ(47,49,"AccountHost.payouts")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(52,51,"AccountHost.payoutsDesc")),t.xp6(2),t.Q6J("ngIf","HOST"===n.userRole)}}function st(e,i){1&e&&t._UZ(0,"span",42)}function lt(e,i){if(1&e&&(t.TgZ(0,"div",39),t.YNc(1,st,1,0,"ng-template",null,40,t.W1O),t._UZ(3,"nz-spin",41),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}let dt=(()=>{class e{constructor(n,a,r,s){this.authService=n,this.commonService=a,this.cookieService=r,this.router=s,this.userRole=_.N.userRole,this.subscriptions=new h.w0,this.lang=_.N.lang}ngOnInit(){this.fetchUserData()}fetchUserData(){this.loading=!0,this.subscriptions.add(this.authService.getProfileData().subscribe(n=>{this.profileData=null==n?void 0:n.data[0],this.loading=!1,this.cookieService.put("userData",JSON.stringify(null==n?void 0:n.data[0]))},n=>{this.loading=!1,this.commonService.showErrorAlert("Error","Failed to get cities, Please try again")}))}switchToHosting(){this.cookieService.put("userRole","HOST"),this.commonService.userRole.next("HOST"),_.N.userRole="HOST",this.userRole="HOST",this.router.navigateByUrl("/host/listing")}switchToTraveller(){this.cookieService.put("userRole","TRAVELLER"),this.commonService.userRole.next("TRAVELLER"),_.N.userRole="TRAVELLER",this.userRole="TRAVELLER",this.router.navigateByUrl("/")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.e),t.Y36(f.v),t.Y36(p.N_),t.Y36(v.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],decls:3,vars:2,consts:[["nz-row","","id","account-host"],["class","mx-auto","nz-col","",3,"nzXs","nzLg",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[1,"title","mb-3"],["nz-row","","nzAlign","middle",1,"account-details"],["nz-col","",1,"img-account",3,"nzXs","nzLg","nzMd"],["class","rounded-circle","alt","","width","100px","height","100px",3,"src",4,"ngIf"],["class","img avatar","nz-page-header-avatar","",4,"ngIf"],["nz-col","",1,"name-account",3,"nzXs","nzLg","nzMd"],["class","type",4,"ngIf"],[1,"btns"],["nz-button","",3,"click",4,"ngIf"],["nz-row","","nzAlign","middle","nzJustify","space-between",1,"account-cards"],["nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["nzHoverable","","routerLink","/personal-info"],[1,"icon"],["src","assets/imgs/account-host/personal_info.svg","alt","personal info"],[1,"title-card","d-flex","mt-3","align-items-center"],["nz-icon","","nzType","right","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","left","nzTheme","outline",4,"ngIf"],[1,"desc"],["routerLink","/change-password","nz-col","",1,"item-card","mt-5",3,"nzMd","nzXs","nzLg"],["nzHoverable",""],["src","assets/imgs/account-host/change-password.svg","alt","personal info"],["routerLink","/host/payment","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","assets/imgs/account-host/payment.svg","alt","personal info"],["routerLink","/host/calendar","class","item-card mt-5","nz-col","",3,"nzXs","nzLg","nzMd",4,"ngIf"],["alt","","width","100px","height","100px",1,"rounded-circle",3,"src"],["nz-page-header-avatar","",1,"img","avatar"],[1,"type"],["nz-button","",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],["nz-icon","","nzType","left","nzTheme","outline"],["routerLink","/host/calendar","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","assets/imgs/account-host/calendar 1.svg","alt","personal info"],[1,"title-card","d-flex","my-3","align-items-center"],[1,"desc-calendar","d-flex","align-items-center"],[1,"desc-calendar","mb-0","d-flex","align-items-center"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,a){1&n&&(t.TgZ(0,"section",0),t.YNc(1,rt,54,70,"div",1),t.YNc(2,lt,4,1,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!a.loading),t.xp6(1),t.Q6J("ngIf",a.loading))},directives:[x.SK,o.O5,x.t3,b.ix,O.dQ,P.w,l.bd,v.rH,m.Ls,d.W],pipes:[g.X$],styles:["#account-host[_ngcontent-%COMP%]{padding:50px 24px 20px;min-height:80vh}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]{padding:20px 24px 0}}#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:45px;color:var(--bs-dark)}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:19px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]{margin-block-end:1em}@media (max-width: 400px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]{justify-content:space-between}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{text-align:center}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{margin-inline-end:15px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .switch-btn[_ngcontent-%COMP%]{display:block}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:var(--bs-primary);color:var(--bs-white);text-align:center;line-height:3em;font-size:2em}@media (max-width: 1024px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:90px;height:90px;line-height:2.7em}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--bs-dark)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]{margin-top:1em;border-color:var(--bs-primary)!important;font-size:14px;height:2.5em;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]:hover{color:var(--bs-white)!important;background-color:var(--bs-primary)!important}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{margin-bottom:2em}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{justify-content:center}}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{height:195px;line-height:20px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:scale-down}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;padding-inline-start:10px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{color:var(--bs-dark);font-size:15px;font-weight:500}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-gray-600)}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc-calendar[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);margin-bottom:10px}  .account-cards .ant-card{border-radius:5px}  .account-cards .ant-card-body{height:195px;display:flex;flex-direction:column;justify-content:space-between}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center;width:100%}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}"]}),e})();var k=c(5439),w=c(3640),E=c(5069),pt=c(2905),M=c(3075);function gt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",3)(1,"button",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCancel()}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().onConfirm()}),t._uU(6),t.ALo(7,"translate"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"General.Cancel")),t.xp6(2),t.Q6J("nzLoading",n.loading),t.xp6(1),t.hij(" ",t.lcZ(7,5,"General.Confirm")," ")}}let ut=(()=>{class e{constructor(n,a,r,s){this.modal=n,this.commonService=a,this.translateService=r,this.calenderService=s,this.loading=!1,this.blockedDates=[],this.subscriptions=new h.w0,this.disabledDate=z=>z<new Date||this.isDateIncluded(z)}ngOnInit(){}onDateChange(n){this.selectedDate=n}onConfirm(){this.loading=!0,this.subscriptions.add(this.calenderService.addBlockedDate(this.propertyId,{blocked_dates:[{date:k(this.selectedDate).format("DD-MM-YYYY"),name:""}]}).subscribe(n=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.modal.close({added:!0})},n=>{var a;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(a=null==n?void 0:n.error)||void 0===a?void 0:a.message)}))}isDateIncluded(n){let a=this.blockedDates.map(r=>k(new Date(r)).format("DD-MM-YYYY"));return!!(null==a?void 0:a.includes(k(n).format("DD-MM-YYYY")))}onCancel(){this.modal.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(w.Lf),t.Y36(f.v),t.Y36(g.sK),t.Y36(E.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blocked-date-popup"]],decls:3,vars:2,consts:[[1,"date-picker-wrapper"],["nzInline","","nzSize","large",3,"nzDisabledDate","ngModel","ngModelChange"],["class","modal-footer",4,"nzModalFooter"],[1,"modal-footer"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"nz-date-picker",1),t.NdJ("ngModelChange",function(s){return a.selectedDate=s})("ngModelChange",function(s){return a.onDateChange(s)}),t.qZA()(),t.YNc(2,gt,8,7,"div",2)),2&n&&(t.xp6(1),t.Q6J("nzDisabledDate",a.disabledDate)("ngModel",a.selectedDate))},directives:[pt.uw,M.JJ,M.On,w.Uh,b.ix,P.w,O.dQ],pipes:[g.X$],styles:[".date-picker-wrapper[_ngcontent-%COMP%]{text-align:center}  .date-picker-wrapper .ant-picker-panel-container{box-shadow:none!important;border:1px solid #ddd}  .date-picker-wrapper nz-date-picker,   .date-picker-wrapper .ant-picker-dropdown,   .date-picker-wrapper .ant-picker-panel,   .date-picker-wrapper .ant-picker-date-panel,   .date-picker-wrapper .ant-picker-body,   .date-picker-wrapper .ant-picker-content{width:100%!important}"]}),e})();var _t=c(3501),N=c(8054),mt=c(5181);function ht(e,i){if(1&e&&t._UZ(0,"nz-option",14),2&e){const n=i.$implicit;t.Q6J("nzValue",n.id)("nzLabel",n.name)}}function vt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"nz-card",17)(1,"span",18),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"span",19),t.NdJ("click",function(){const r=t.CHM(n),s=r.$implicit,z=r.index;return t.oxw(2).removeBlockedDate(null==s?null:s.id,z)}),t.qZA()()}if(2&e){const n=i.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,null==n?null:n.blocked_date,"dd-MMM-YYYY"))}}function ft(e,i){if(1&e&&(t.TgZ(0,"div",15),t.YNc(1,vt,5,4,"nz-card",16),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.blockedDates)}}function Ct(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",20)(1,"app-empty-state",21),t.NdJ("btnClicked",function(){return t.CHM(n),t.oxw().onBrowseBtnClicked()}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("title",n.emptyData.title)("text",n.emptyData.text)("icon",n.emptyData.icon)("withBtn",n.emptyData.withBtn)("btnText",n.emptyData.btnText)}}function xt(e,i){1&e&&t._UZ(0,"span",25)}function Mt(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,xt,1,0,"ng-template",null,23,t.W1O),t._UZ(3,"nz-spin",24),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}const zt=function(){return{span:24}},bt=function(){return{span:20}},Ot=function(){return{span:11}},Pt=function(){return{span:6}},At=[{path:"",component:dt},{path:"calender",component:(()=>{class e{constructor(n,a,r,s,z,U,kt){this.commonService=n,this.translateService=a,this.listingService=r,this.cookieService=s,this.calenderService=z,this.router=U,this.modal=kt,this.lang=_.N.lang,this.filterCriteria={page:1,pageSize:1e3},this.subscriptions=new h.w0,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.loading=!1,this.listingData=[],this.blockedDates=[],this.commonService.handleHostPage()}ngOnInit(){this.getUserData()}getUserData(){this.cookieService.get("userData")?(this.userData=JSON.parse(this.cookieService.get("userData")),this.fetchListingData()):this.handleNotAuthorized()}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("AccountHost.NoBlockedDates"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:this.translateService.instant("General.Browse")}}onBrowseBtnClicked(){var n;(null===(n=this.userData)||void 0===n?void 0:n.id)?this.router.navigateByUrl("/"):this.router.navigateByUrl("auth/sign-up")}handleNotAuthorized(){this.emptyData={title:this.translateService.instant("General.NotLoggedIn"),text:this.translateService.instant("General.PleaseLogin"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.LoginOrSignup")}}fetchListingData(){this.loading=!0,this.subscriptions.add(this.listingService.getListings(this.filterCriteria).subscribe(n=>{var a,r;(null==n?void 0:n.successful)&&(this.loading=!1,this.listingData=null===(a=null==n?void 0:n.data)||void 0===a?void 0:a.data,this.selectedProperty=null===(r=this.listingData[0])||void 0===r?void 0:r.id,this.fetchBlockedDates())},n=>{var a;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(a=null==n?void 0:n.error)||void 0===a?void 0:a.message)}))}fetchBlockedDates(){this.loading=!0,this.subscriptions.add(this.calenderService.getBlockedDates(this.selectedProperty).subscribe(n=>{var a,r;this.blockedDates=null===(a=null==n?void 0:n.data[0])||void 0===a?void 0:a.blocked_dates,(null===(r=this.blockedDates)||void 0===r?void 0:r.length)||this.handleEmptyData(),this.loading=!1}))}onPropertyChange(n){this.selectedProperty=n,this.fetchBlockedDates()}onAddBlockedDate(){this.modal.create({nzTitle:this.translateService.instant("AccountHost.AddBlockedDate"),nzContent:ut,nzComponentParams:{propertyId:this.selectedProperty,blockedDates:this.blockedDates.map(a=>a.blocked_date)}}).afterClose.subscribe(a=>{(null==a?void 0:a.added)&&this.fetchBlockedDates()})}removeBlockedDate(n,a){this.subscriptions.add(this.calenderService.removeBlockedDate(n).subscribe(r=>{var s;this.loading=!1,(null==r?void 0:r.successful)&&(this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==r?void 0:r.message),this.blockedDates.splice(a,1),(null===(s=this.blockedDates)||void 0===s?void 0:s.length)||this.handleEmptyData())},r=>{var s;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(s=null==r?void 0:r.error)||void 0===s?void 0:s.message)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.v),t.Y36(g.sK),t.Y36(_t.o),t.Y36(p.N_),t.Y36(E.z),t.Y36(v.F0),t.Y36(w.Sf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-calender"]],decls:22,vars:27,consts:[["nz-row","","id","calender"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[1,"back"],["routerLink","/profile",1,"back-route","d-flex","align-items-center"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"title","mt-2","mb-5"],[1,"top-row"],["nz-col","",3,"nzXs","nzLg"],["nzAllowClear","false","nzShowSearch","","nzServerSearch","",1,"city-select",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",1,"btn",3,"click"],["class","dates-data mt-5",4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"dates-data","mt-5"],["class","date-item",4,"ngFor","ngForOf"],[1,"date-item"],[1,"date"],["nz-icon","","nzType","close","nzTheme","outline",1,"icon",3,"click"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,a){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",5)(8,"h2"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",6)(12,"div",7)(13,"nz-select",8),t.NdJ("ngModelChange",function(s){return a.onPropertyChange(s)})("ngModelChange",function(s){return a.selectedProperty=s}),t.ALo(14,"translate"),t.YNc(15,ht,1,2,"nz-option",9),t.qZA()(),t.TgZ(16,"button",10),t.NdJ("click",function(){return a.onAddBlockedDate()}),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.YNc(19,ft,2,1,"div",11),t.YNc(20,Ct,2,5,"div",12),t.YNc(21,Mt,4,1,"div",13),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("nzXs",t.DdM(23,zt))("nzLg",t.DdM(24,bt)),t.xp6(4),t.Oqu(t.lcZ(6,15,"Payment.Back")),t.xp6(4),t.Oqu(t.lcZ(10,17,"AccountHost.Calendar")),t.xp6(3),t.Q6J("nzXs",t.DdM(25,Ot))("nzLg",t.DdM(26,Pt)),t.xp6(1),t.ekj("ant-select-rtl","ar"==a.lang),t.s9C("nzPlaceHolder",t.lcZ(14,19,"AccountHost.ChooseProperty")),t.Q6J("ngModel",a.selectedProperty),t.xp6(2),t.Q6J("ngForOf",a.listingData),t.xp6(2),t.Oqu(t.lcZ(18,21,"AccountHost.AddBlockedDate")),t.xp6(2),t.Q6J("ngIf",(null==a.blockedDates?null:a.blockedDates.length)&&!a.loading),t.xp6(1),t.Q6J("ngIf",!(null!=a.blockedDates&&a.blockedDates.length||a.loading)),t.xp6(1),t.Q6J("ngIf",a.loading))},directives:[x.SK,x.t3,v.rH,P.w,m.Ls,N.Vq,M.JJ,M.On,o.sg,N.Ip,b.ix,O.dQ,o.O5,l.bd,mt.s,d.W],pipes:[g.X$,o.uU],styles:["#calender[_ngcontent-%COMP%]{padding:50px 24px 20px;margin-bottom:2em}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]{cursor:pointer;color:var(--bs-blue);font-size:18px;line-height:20px;font-weight:500}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-inline-end:6px}#calender[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:30px;color:var(--bs-dark)}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}@media (max-width: 768px){#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px}}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]{min-height:50vh;display:flex;flex-direction:row;flex-wrap:wrap}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{border-top:6px solid var(--bs-primary);position:relative;text-align:center;border-radius:5px;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;margin-inline-end:1em;margin-block-end:1em}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;color:var(--bs-white);background-color:var(--bs-primary);padding:10px;border-radius:10px;display:block}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:25px;height:25px;background-color:var(--bs-white);border-radius:50%;line-height:1.7em;position:absolute;z-index:1;top:-15px;inset-inline-end:-10px;box-shadow:0 10px 15px -3px #0000001a;cursor:pointer;color:var(--bs-dark)}  #calender .notification-item .ant-row-bottom{align-items:center!important}@media (max-width: 575px){  #calender .notification-item .ant-card-body{padding:15px}}  #calender .ant-pagination-next .ant-pagination-item-link,   #calender .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #calender .ant-pagination-item a,   #calender .ant-pagination-item:focus-visible a,   #calender .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}"]}),e})()}];let Tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.Bz.forChild(At)],v.Bz]}),e})();var Dt=c(8190),yt=c(5326);let Zt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[o.ez,yt.m,M.u5,M.UX,Tt,g.aw,Dt.P]]}),e})()},3501:(L,C,c)=>{c.d(C,{o:()=>t});var o=c(2340),h=c(5e3),_=c(520);let t=(()=>{class u{constructor(p){this.http=p}getListings(p){return this.http.get(`${o.N.endPointUrl}/user/hosting/my-properties`,{params:p})}fetchPropertyDetails(p){return this.http.get(`${o.N.endPointUrl}/user/travelling/property-details/${p}`)}}return u.\u0275fac=function(p){return new(p||u)(h.LFG(_.eN))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},5181:(L,C,c)=>{c.d(C,{s:()=>P});var o=c(5e3),h=c(685),_=c(9808),t=c(6042),u=c(2643),f=c(2683),p=c(1062);function v(l,m){if(1&l&&(o.TgZ(0,"h5",3),o._uU(1),o.ALo(2,"translate"),o.qZA(),o.TgZ(3,"p",4),o._uU(4),o.ALo(5,"translate"),o.qZA()),2&l){const d=o.oxw();o.xp6(1),o.Oqu(o.lcZ(2,2,d.title)),o.xp6(3),o.Oqu(o.lcZ(5,4,d.text))}}function x(l,m){if(1&l){const d=o.EpF();o.TgZ(0,"button",7),o.NdJ("click",function(){return o.CHM(d),o.oxw(2).onButtonClicked()}),o._uU(1),o.ALo(2,"translate"),o.qZA()}if(2&l){const d=o.oxw(2);o.xp6(1),o.Oqu(o.lcZ(2,1,d.btnText))}}function b(l,m){if(1&l){const d=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){return o.CHM(d),o.oxw(2).onEditClicked()}),o._uU(1),o.ALo(2,"translate"),o.qZA()}2&l&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"CreateListing.Edit")))}function O(l,m){if(1&l&&(o.YNc(0,x,3,3,"button",5),o.YNc(1,b,3,3,"button",6)),2&l){const d=o.oxw();o.Q6J("ngIf",d.withBtn),o.xp6(1),o.Q6J("ngIf",d.isPublish)}}let P=(()=>{class l{constructor(){this.title="",this.text="",this.icon="",this.btnText="",this.isPublish=!1,this.btnClicked=new o.vpe,this.editClicked=new o.vpe}ngOnInit(){}onButtonClicked(){this.btnClicked.emit()}onEditClicked(){this.editClicked.emit()}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-empty-state"]],inputs:{title:"title",text:"text",icon:"icon",withBtn:"withBtn",btnText:"btnText",isPublish:"isPublish"},outputs:{btnClicked:"btnClicked",editClicked:"editClicked"},decls:5,vars:3,consts:[[1,"empty-wrapper","pt-5","pb-5",3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],[1,"title"],[1,"description"],["nz-button","","nzType","primary","class","mr-1 ml-1",3,"click",4,"ngIf"],["nz-button","","class","edit-btn mr-1 ml-1",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"mr-1","ml-1",3,"click"],["nz-button","",1,"edit-btn","mr-1","ml-1",3,"click"]],template:function(d,g){if(1&d&&(o.TgZ(0,"nz-empty",0),o.YNc(1,v,6,6,"ng-template",null,1,o.W1O),o.YNc(3,O,2,2,"ng-template",null,2,o.W1O),o.qZA()),2&d){const A=o.MAs(2),Z=o.MAs(4);o.Q6J("nzNotFoundImage",g.icon?g.icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg")("nzNotFoundContent",A)("nzNotFoundFooter",Z)}},directives:[h.p9,_.O5,t.ix,u.dQ,f.w],pipes:[p.X$],styles:[".title[_ngcontent-%COMP%]{font-weight:600;margin-top:1em;margin-bottom:1em;color:var(--bs-dark)}.description[_ngcontent-%COMP%]{width:50%;margin:auto;color:var(--bs-gray-600)}.edit-btn[_ngcontent-%COMP%]{border-color:var(--bs-gray-300);color:var(--bs-dark);background-color:var(--bs-gray-300)}.mr-1[_ngcontent-%COMP%]{margin-inline-start:5px}.ml-1[_ngcontent-%COMP%]{margin-inline-end:5px}"]}),l})()}}]);