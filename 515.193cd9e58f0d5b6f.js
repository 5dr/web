"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[515],{9897:(lt,T,r)=>{r.d(T,{_:()=>rt});var l=r(3075),L=r(727),P=r(5439),z=r(7623),O=r(2340),t=r(5e3),E=r(3640),b=r(9592),I=r(6952),U=r(6010),x=r(1062),D=r(1894),N=r(1047),y=r(7879),w=r(9808),R=r(2905),q=r(6042),J=r(2643),S=r(2683),F=r(3087),Y=r(9590);function Q(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.RequiredError")," "))}function k(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.RequiredError")," "))}function B(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.RequiredError")," "))}function K(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.RequiredError")," "))}function W(n,d){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"Auth.RequiredError")," "))}function j(n,d){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"Auth.LengthError")," "))}function V(n,d){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"Auth.LengthError")," "))}function X(n,d){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"Auth.PatternError")," "))}function G(n,d){if(1&n&&(t.TgZ(0,"span",21),t.YNc(1,W,3,3,"span",22),t.YNc(2,j,3,3,"span",22),t.YNc(3,V,4,3,"span",22),t.YNc(4,X,3,3,"span",22),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",null==o.getControl("password").errors?null:o.getControl("password").errors.required),t.xp6(1),t.Q6J("ngIf",null==o.getControl("password").errors?null:o.getControl("password").errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==o.getControl("password").errors?null:o.getControl("password").errors.minlength),t.xp6(1),t.Q6J("ngIf",null==o.getControl("password").errors?null:o.getControl("password").errors.pattern)}}function H(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.RequiredError")," "))}function $(n,d){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.PasswordError")," "))}function tt(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).onSave()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Auth.Submit")," "))}function nt(n,d){1&n&&t._UZ(0,"span",29)}function ot(n,d){if(1&n&&(t.TgZ(0,"div",26),t.YNc(1,nt,1,0,"ng-template",null,27,t.W1O),t._UZ(3,"nz-spin",28),t.qZA()),2&n){const o=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",o)}}function et(n,d){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,tt,3,3,"button",23),t.YNc(2,ot,4,1,"div",24),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading)}}const f=function(){return{span:24}},p=function(){return{span:11}};let rt=(()=>{class n{constructor(o,e,i,s,_,m){this.fb=o,this.modal=e,this.cookieService=i,this.authService=s,this.commonService=_,this.translateService=m,this.dateFormat="yyyy/MM/dd",this.loading=!1,this.subscriptions=new L.w0,this.confirmationValidator=u=>u.value?u.value!==this.infoForm.controls.password.value?{mismatch:!0}:{}:{required:!0}}ngOnInit(){this.initInfoForm(),this.getSavedPhoneData()}initInfoForm(){this.infoForm=this.fb.group({firstName:[null,[l.kI.required]],lastName:[null,[l.kI.required]],email:[null,[l.kI.required,l.kI.email]],dob:[null,[l.kI.required]],phone_number:[null,[l.kI.required]],country_code:[null,[l.kI.required]],password:new l.NI(null,[l.kI.required,l.kI.maxLength(15),l.kI.minLength(7),l.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-])/)]),confirmPassword:[null,[l.kI.required,this.confirmationValidator]]})}getControl(o){return this.infoForm.get(o)}range(o,e){const i=[];for(let s=o;s<e;s++)i.push(s);return i}disabledDate(o){return(0,z.Z)(o,new Date("1-1-"+((new Date).getFullYear()-18)))>0}updateConfirmValidator(){Promise.resolve().then(()=>this.infoForm.controls.confirmPassword.updateValueAndValidity())}getSavedPhoneData(){var o,e,i,s;this.cookieService.get("registerData")&&(null===(o=this.infoForm.get("phone_number"))||void 0===o||o.setValue(null===(e=JSON.parse(this.cookieService.get("registerData")))||void 0===e?void 0:e.phone_number),null===(i=this.infoForm.get("country_code"))||void 0===i||i.setValue(null===(s=JSON.parse(this.cookieService.get("registerData")))||void 0===s?void 0:s.country_code))}onSave(){var o,e,i,s,_,m,u,c;const g={first_name:null===(o=this.infoForm.get("firstName"))||void 0===o?void 0:o.value,last_name:null===(e=this.infoForm.get("lastName"))||void 0===e?void 0:e.value,email:null===(i=this.infoForm.get("email"))||void 0===i?void 0:i.value,dob:P(null===(s=this.infoForm.get("dob"))||void 0===s?void 0:s.value).format("DD-MM-YYYY"),phone_number:null===(_=this.infoForm.get("phone_number"))||void 0===_?void 0:_.value,country_code:null===(m=this.infoForm.get("country_code"))||void 0===m?void 0:m.value,password:null===(u=this.infoForm.get("password"))||void 0===u?void 0:u.value,login_type:"EMAIL"};(null===(c=this.infoForm)||void 0===c?void 0:c.valid)&&(this.loading=!0,this.subscriptions.add(this.authService.completeProfile(g).subscribe({next:a=>{var h,v,C,A,Z,M;this.loading=!1,(null===(v=null===(h=null==a?void 0:a.data)||void 0===h?void 0:h.user)||void 0===v?void 0:v.id)&&(null===(A=null===(C=null==a?void 0:a.data)||void 0===C?void 0:C.accessToken)||void 0===A?void 0:A.token)&&(this.cookieService.put("userData",JSON.stringify(null===(Z=null==a?void 0:a.data)||void 0===Z?void 0:Z.user)),this.cookieService.put("userToken",JSON.stringify(null===(M=null==a?void 0:a.data)||void 0===M?void 0:M.accessToken))),this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==a?void 0:a.message),this.authService.userLoggedIn.next(!0),this.cookieService.put("userRole","TRAVELLER"),this.commonService.userRole.next("TRAVELLER"),O.N.userRole="TRAVELLER",this.modal.destroy(),this.cookieService.remove("registerData"),this.cookieService.remove("verifiedRegisterData")},error:a=>{var h;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(h=null==a?void 0:a.error)||void 0===h?void 0:h.message)}})))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(l.qu),t.Y36(E.Lf),t.Y36(b.N_),t.Y36(I.e),t.Y36(U.v),t.Y36(x.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complete-profile"]],decls:60,vars:103,consts:[["nz-row","","nzJustify","space-between","autocomplete","off",1,"complete-form",3,"formGroup"],["nz-col","",3,"nzXs","nzLg","nzMd"],["for","first-name"],["nz-input","","nzStatus","error","formControlName","firstName","id","first-name","type","text",3,"placeholder"],[1,"hint"],["class","error text-danger",4,"ngIf"],["for","last-name"],["nz-input","","formControlName","lastName","id","last-name","type","text",3,"placeholder"],["for","email"],["nz-input","","formControlName","email","id","email","type","email",3,"placeholder"],["for","birthday-input"],["nzId","birthday-input","nzPlaceHolder","dd/mm/yyyy","formControlName","dob",1,"d-block",3,"nzFormat","nzDisabledDate"],["for","CountryCode"],["nz-input","","readonly","","formControlName","country_code","id","CountryCode","type","tel",3,"placeholder"],["for","PhoneNumber"],["nz-input","","readonly","","formControlName","phone_number","id","PhoneNumber","type","tel",3,"placeholder"],["for","Password"],["nz-input","","formControlName","password","id","Password","type","password",3,"ngModelChange"],["for","confirm-password"],["nz-input","","formControlName","confirmPassword","id","confirm-password","type","password"],[4,"nzModalFooter"],[1,"error","text-danger"],[4,"ngIf"],["type","submit","nz-button","","class","btn btn-submit","nzType","primary",3,"click",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["type","submit","nz-button","","nzType","primary",1,"btn","btn-submit",3,"click"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(o,e){if(1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"label",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",3),t.ALo(6,"translate"),t.TgZ(7,"span",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,Q,3,3,"span",5),t.qZA(),t.TgZ(11,"div",1)(12,"label",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",7),t.ALo(16,"translate"),t.YNc(17,k,3,3,"span",5),t.qZA(),t.TgZ(18,"div",1)(19,"label",8),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.YNc(24,B,3,3,"span",5),t.qZA(),t.TgZ(25,"div",1)(26,"label",10),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"nz-date-picker",11),t.TgZ(30,"span",4),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.YNc(33,K,3,3,"span",5),t.qZA(),t.TgZ(34,"div",1)(35,"label",12),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",13),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"div",1)(41,"label",14),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",15),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"div",1)(47,"label",16),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"input",17),t.NdJ("ngModelChange",function(){return e.updateConfirmValidator()}),t.qZA(),t.YNc(51,G,5,4,"span",5),t.qZA(),t.TgZ(52,"div",1)(53,"label",18),t._uU(54),t.ALo(55,"translate"),t.qZA(),t._UZ(56,"input",19),t.YNc(57,H,3,3,"span",5),t.YNc(58,$,3,3,"span",5),t.qZA()(),t.YNc(59,et,3,2,"div",20)),2&o){let i,s,_,m,u,c,g;t.Q6J("formGroup",e.infoForm),t.xp6(1),t.Q6J("nzXs",t.DdM(79,f))("nzLg",t.DdM(80,p))("nzMd",t.DdM(81,p)),t.xp6(2),t.Oqu(t.lcZ(4,49,"Auth.FirstName")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,51,"Auth.FirstName")),t.xp6(3),t.hij(" ",t.lcZ(9,53,"Auth.NameHint")," "),t.xp6(2),t.Q6J("ngIf",(null==(i=e.getControl("firstName"))?null:i.touched)&&!(null!=(i=e.getControl("firstName"))&&i.valid)),t.xp6(1),t.Q6J("nzXs",t.DdM(82,f))("nzLg",t.DdM(83,p))("nzMd",t.DdM(84,p)),t.xp6(2),t.Oqu(t.lcZ(14,55,"Auth.LastName")),t.xp6(2),t.s9C("placeholder",t.lcZ(16,57,"Auth.LastName")),t.xp6(2),t.Q6J("ngIf",(null==(s=e.getControl("lastName"))?null:s.touched)&&!(null!=(s=e.getControl("lastName"))&&s.valid)),t.xp6(1),t.Q6J("nzXs",t.DdM(85,f))("nzLg",t.DdM(86,p))("nzMd",t.DdM(87,p)),t.xp6(2),t.Oqu(t.lcZ(21,59,"Auth.Email")),t.xp6(2),t.s9C("placeholder",t.lcZ(23,61,"Auth.Email")),t.xp6(2),t.Q6J("ngIf",(null==(_=e.getControl("email"))?null:_.touched)&&!(null!=(_=e.getControl("email"))&&_.valid)),t.xp6(1),t.Q6J("nzXs",t.DdM(88,f))("nzLg",t.DdM(89,p))("nzMd",t.DdM(90,p)),t.xp6(2),t.Oqu(t.lcZ(28,63,"Auth.DOB")),t.xp6(2),t.Q6J("nzFormat",e.dateFormat)("nzDisabledDate",e.disabledDate),t.xp6(2),t.hij(" ",t.lcZ(32,65,"Auth.DOBHint")," "),t.xp6(2),t.Q6J("ngIf",(null==(m=e.getControl("dob"))?null:m.touched)&&!(null!=(m=e.getControl("dob"))&&m.valid)),t.xp6(1),t.Q6J("nzXs",t.DdM(91,f))("nzLg",t.DdM(92,p))("nzMd",t.DdM(93,p)),t.xp6(2),t.Oqu(t.lcZ(37,67,"Auth.CountryCode")),t.xp6(2),t.s9C("placeholder",t.lcZ(39,69,"Auth.CountryCode")),t.xp6(2),t.Q6J("nzXs",t.DdM(94,f))("nzLg",t.DdM(95,p))("nzMd",t.DdM(96,p)),t.xp6(2),t.Oqu(t.lcZ(43,71,"Auth.PhoneNumber")),t.xp6(2),t.s9C("placeholder",t.lcZ(45,73,"Auth.PhoneNumber")),t.xp6(2),t.Q6J("nzXs",t.DdM(97,f))("nzLg",t.DdM(98,p))("nzMd",t.DdM(99,p)),t.xp6(2),t.Oqu(t.lcZ(49,75,"Auth.Password")),t.xp6(3),t.Q6J("ngIf",(null==(u=e.getControl("password"))?null:u.touched)&&(null==(u=e.getControl("password"))?null:u.errors)),t.xp6(1),t.Q6J("nzXs",t.DdM(100,f))("nzLg",t.DdM(101,p))("nzMd",t.DdM(102,p)),t.xp6(2),t.hij(" ",t.lcZ(55,77,"Auth.ConfirmPassword")," "),t.xp6(3),t.Q6J("ngIf",(null==(c=e.getControl("confirmPassword"))?null:c.touched)&&(null==(c=e.getControl("confirmPassword"))||null==c.errors?null:c.errors.required)),t.xp6(1),t.Q6J("ngIf",(null==(g=e.getControl("confirmPassword"))?null:g.touched)&&(null==(g=e.getControl("confirmPassword"))||null==g.errors?null:g.errors.mismatch))}},directives:[l._Y,l.JL,D.SK,l.sg,D.t3,N.Zp,l.Fj,l.JJ,l.u,y.mh,w.O5,R.uw,E.Uh,q.ix,J.dQ,S.w,F.Ls,Y.W],pipes:[x.X$],styles:[".btn-submit[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;padding-right:2em;padding-left:2em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px 0}label[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);display:block;margin-bottom:.5em}.hint[_ngcontent-%COMP%]{font-size:10px;color:#505050}.error[_ngcontent-%COMP%]{font-size:10px;display:block}input[_ngcontent-%COMP%]{width:100%;outline:none;padding:10px;border-radius:5px;font-size:14px;margin-block-end:5px}  .complete-form .ant-modal-footer{text-align:center}  .complete-form .ant-input-suffix{margin-left:0}  .complete-form .ant-input-affix-wrapper{padding:0;padding-inline-end:10px;border:none;border-radius:8px;margin-block-end:10px}  .complete-form .ant-input-affix-wrapper:focus{border-color:transparent;box-shadow:none;border-right-width:0!important;outline:0}  .complete-form .ant-input:focus{border-right-width:0!important}  .complete-form .ant-input-affix-wrapper>input.ant-input{margin-block-end:0}  .complete-form .ant-picker-input>input{width:100%;outline:none;padding:10px;font-size:14px;font-weight:500}  .complete-form .ant-picker{border-radius:8px;padding:0 11px}"]}),n})()}}]);