"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[515],{9897:(lo,T,r)=>{r.d(T,{_:()=>ro});var l=r(3075),z=r(727),P=r(5439),L=r(7623),O=r(2340),o=r(5e3),D=r(3640),b=r(9592),I=r(6952),U=r(6010),E=r(1062),x=r(1894),N=r(1047),y=r(5422),w=r(9808),R=r(2905),S=r(6042),q=r(2643),J=r(2683),F=r(3087),Y=r(9590);function k(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.RequiredError")," "))}function Q(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.RequiredError")," "))}function B(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.RequiredError")," "))}function K(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.RequiredError")," "))}function W(t,d){1&t&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" - ",o.lcZ(2,1,"Auth.RequiredError")," "))}function j(t,d){1&t&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" - ",o.lcZ(2,1,"Auth.LengthError")," "))}function V(t,d){1&t&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o._UZ(3,"br"),o.qZA()),2&t&&(o.xp6(1),o.hij(" - ",o.lcZ(2,1,"Auth.LengthError")," "))}function X(t,d){1&t&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" - ",o.lcZ(2,1,"Auth.PatternError")," "))}function G(t,d){if(1&t&&(o.TgZ(0,"span",21),o.YNc(1,W,3,3,"span",22),o.YNc(2,j,3,3,"span",22),o.YNc(3,V,4,3,"span",22),o.YNc(4,X,3,3,"span",22),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.getControl("password").errors?null:n.getControl("password").errors.required),o.xp6(1),o.Q6J("ngIf",null==n.getControl("password").errors?null:n.getControl("password").errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==n.getControl("password").errors?null:n.getControl("password").errors.minlength),o.xp6(1),o.Q6J("ngIf",null==n.getControl("password").errors?null:n.getControl("password").errors.pattern)}}function H(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.RequiredError")," "))}function $(t,d){1&t&&(o.TgZ(0,"span",21),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.PasswordError")," "))}function oo(t,d){if(1&t){const n=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(n),o.oxw(2).onSave()}),o._uU(1),o.ALo(2,"translate"),o.qZA()}2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"Auth.Submit")," "))}function to(t,d){1&t&&o._UZ(0,"span",29)}function no(t,d){if(1&t&&(o.TgZ(0,"div",26),o.YNc(1,to,1,0,"ng-template",null,27,o.W1O),o._UZ(3,"nz-spin",28),o.qZA()),2&t){const n=o.MAs(2);o.xp6(3),o.Q6J("nzIndicator",n)}}function eo(t,d){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,oo,3,3,"button",23),o.YNc(2,no,4,1,"div",24),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",!n.loading),o.xp6(1),o.Q6J("ngIf",n.loading)}}const f=function(){return{span:24}},p=function(){return{span:11}};let ro=(()=>{class t{constructor(n,e,i,s,_,m){this.fb=n,this.modal=e,this.cookieService=i,this.authService=s,this.commonService=_,this.translateService=m,this.dateFormat="yyyy/MM/dd",this.loading=!1,this.subscriptions=new z.w0,this.confirmationValidator=u=>u.value?u.value!==this.infoForm.controls.password.value?{mismatch:!0}:{}:{required:!0}}ngOnInit(){this.initInfoForm(),this.getSavedPhoneData()}initInfoForm(){this.infoForm=this.fb.group({firstName:[null,[l.kI.required]],lastName:[null,[l.kI.required]],email:[null,[l.kI.required,l.kI.email]],dob:[null,[l.kI.required]],phone_number:[null,[l.kI.required]],country_code:[null,[l.kI.required]],password:new l.NI(null,[l.kI.required,l.kI.maxLength(15),l.kI.minLength(7),l.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-])/)]),confirmPassword:[null,[l.kI.required,this.confirmationValidator]]})}getControl(n){return this.infoForm.get(n)}range(n,e){const i=[];for(let s=n;s<e;s++)i.push(s);return i}disabledDate(n){return(0,L.Z)(n,new Date("1-1-"+((new Date).getFullYear()-18)))>0}updateConfirmValidator(){Promise.resolve().then(()=>this.infoForm.controls.confirmPassword.updateValueAndValidity())}getSavedPhoneData(){var n,e,i,s;this.cookieService.get("registerData")&&(console.log(JSON.parse(this.cookieService.get("registerData"))),null===(n=this.infoForm.get("phone_number"))||void 0===n||n.setValue(null===(e=JSON.parse(this.cookieService.get("registerData")))||void 0===e?void 0:e.phone_number),null===(i=this.infoForm.get("country_code"))||void 0===i||i.setValue(null===(s=JSON.parse(this.cookieService.get("registerData")))||void 0===s?void 0:s.country_code))}onSave(){var n,e,i,s,_,m,u,c;console.log(this.infoForm);const g={first_name:null===(n=this.infoForm.get("firstName"))||void 0===n?void 0:n.value,last_name:null===(e=this.infoForm.get("lastName"))||void 0===e?void 0:e.value,email:null===(i=this.infoForm.get("email"))||void 0===i?void 0:i.value,dob:P(null===(s=this.infoForm.get("dob"))||void 0===s?void 0:s.value).format("DD-MM-YYYY"),phone_number:null===(_=this.infoForm.get("phone_number"))||void 0===_?void 0:_.value,country_code:null===(m=this.infoForm.get("country_code"))||void 0===m?void 0:m.value,password:null===(u=this.infoForm.get("password"))||void 0===u?void 0:u.value,login_type:"EMAIL"};console.log(g),(null===(c=this.infoForm)||void 0===c?void 0:c.valid)&&(this.loading=!0,this.subscriptions.add(this.authService.register(g).subscribe(a=>{var h,v,C,A,Z,M;this.loading=!1,(null===(v=null===(h=null==a?void 0:a.data)||void 0===h?void 0:h.user)||void 0===v?void 0:v.id)&&(null===(A=null===(C=null==a?void 0:a.data)||void 0===C?void 0:C.accessToken)||void 0===A?void 0:A.token)&&(this.cookieService.put("userData",JSON.stringify(null===(Z=null==a?void 0:a.data)||void 0===Z?void 0:Z.user)),this.cookieService.put("userToken",JSON.stringify(null===(M=null==a?void 0:a.data)||void 0===M?void 0:M.accessToken))),this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==a?void 0:a.message),this.authService.userLoggedIn.next(!0),this.cookieService.put("userRole","TRAVELLER"),this.commonService.userRole.next("TRAVELLER"),O.N.userRole="TRAVELLER",this.modal.destroy(),this.cookieService.remove("registerData"),this.cookieService.remove("verifiedRegisterData")},a=>{var h;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(h=null==a?void 0:a.error)||void 0===h?void 0:h.message)})))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(l.qu),o.Y36(D.Lf),o.Y36(b.N_),o.Y36(I.e),o.Y36(U.v),o.Y36(E.sK))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-complete-profile"]],decls:60,vars:103,consts:[["nz-row","","nzJustify","space-between","autocomplete","off",1,"complete-form",3,"formGroup"],["nz-col","",3,"nzXs","nzLg","nzMd"],["for","first-name"],["nz-input","","nzStatus","error","formControlName","firstName","id","first-name","type","text",3,"placeholder"],[1,"hint"],["class","error text-danger",4,"ngIf"],["for","last-name"],["nz-input","","formControlName","lastName","id","last-name","type","text",3,"placeholder"],["for","email"],["nz-input","","formControlName","email","id","email","type","email",3,"placeholder"],["for","birthday-input"],["nzId","birthday-input","nzPlaceHolder","dd/mm/yyyy","formControlName","dob",1,"d-block",3,"nzFormat","nzDisabledDate"],["for","CountryCode"],["nz-input","","readonly","","formControlName","country_code","id","CountryCode","type","tel",3,"placeholder"],["for","PhoneNumber"],["nz-input","","readonly","","formControlName","phone_number","id","PhoneNumber","type","tel",3,"placeholder"],["for","Password"],["nz-input","","formControlName","password","id","Password","type","password",3,"ngModelChange"],["for","confirm-password"],["nz-input","","formControlName","confirmPassword","id","confirm-password","type","password"],[4,"nzModalFooter"],[1,"error","text-danger"],[4,"ngIf"],["type","submit","nz-button","","class","btn btn-submit","nzType","primary",3,"click",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["type","submit","nz-button","","nzType","primary",1,"btn","btn-submit",3,"click"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,e){if(1&n&&(o.TgZ(0,"form",0)(1,"div",1)(2,"label",2),o._uU(3),o.ALo(4,"translate"),o.qZA(),o._UZ(5,"input",3),o.ALo(6,"translate"),o.TgZ(7,"span",4),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.YNc(10,k,3,3,"span",5),o.qZA(),o.TgZ(11,"div",1)(12,"label",6),o._uU(13),o.ALo(14,"translate"),o.qZA(),o._UZ(15,"input",7),o.ALo(16,"translate"),o.YNc(17,Q,3,3,"span",5),o.qZA(),o.TgZ(18,"div",1)(19,"label",8),o._uU(20),o.ALo(21,"translate"),o.qZA(),o._UZ(22,"input",9),o.ALo(23,"translate"),o.YNc(24,B,3,3,"span",5),o.qZA(),o.TgZ(25,"div",1)(26,"label",10),o._uU(27),o.ALo(28,"translate"),o.qZA(),o._UZ(29,"nz-date-picker",11),o.TgZ(30,"span",4),o._uU(31),o.ALo(32,"translate"),o.qZA(),o.YNc(33,K,3,3,"span",5),o.qZA(),o.TgZ(34,"div",1)(35,"label",12),o._uU(36),o.ALo(37,"translate"),o.qZA(),o._UZ(38,"input",13),o.ALo(39,"translate"),o.qZA(),o.TgZ(40,"div",1)(41,"label",14),o._uU(42),o.ALo(43,"translate"),o.qZA(),o._UZ(44,"input",15),o.ALo(45,"translate"),o.qZA(),o.TgZ(46,"div",1)(47,"label",16),o._uU(48),o.ALo(49,"translate"),o.qZA(),o.TgZ(50,"input",17),o.NdJ("ngModelChange",function(){return e.updateConfirmValidator()}),o.qZA(),o.YNc(51,G,5,4,"span",5),o.qZA(),o.TgZ(52,"div",1)(53,"label",18),o._uU(54),o.ALo(55,"translate"),o.qZA(),o._UZ(56,"input",19),o.YNc(57,H,3,3,"span",5),o.YNc(58,$,3,3,"span",5),o.qZA()(),o.YNc(59,eo,3,2,"div",20)),2&n){let i,s,_,m,u,c,g;o.Q6J("formGroup",e.infoForm),o.xp6(1),o.Q6J("nzXs",o.DdM(79,f))("nzLg",o.DdM(80,p))("nzMd",o.DdM(81,p)),o.xp6(2),o.Oqu(o.lcZ(4,49,"Auth.FirstName")),o.xp6(2),o.s9C("placeholder",o.lcZ(6,51,"Auth.FirstName")),o.xp6(3),o.hij(" ",o.lcZ(9,53,"Auth.NameHint")," "),o.xp6(2),o.Q6J("ngIf",(null==(i=e.getControl("firstName"))?null:i.touched)&&!(null!=(i=e.getControl("firstName"))&&i.valid)),o.xp6(1),o.Q6J("nzXs",o.DdM(82,f))("nzLg",o.DdM(83,p))("nzMd",o.DdM(84,p)),o.xp6(2),o.Oqu(o.lcZ(14,55,"Auth.LastName")),o.xp6(2),o.s9C("placeholder",o.lcZ(16,57,"Auth.LastName")),o.xp6(2),o.Q6J("ngIf",(null==(s=e.getControl("lastName"))?null:s.touched)&&!(null!=(s=e.getControl("lastName"))&&s.valid)),o.xp6(1),o.Q6J("nzXs",o.DdM(85,f))("nzLg",o.DdM(86,p))("nzMd",o.DdM(87,p)),o.xp6(2),o.Oqu(o.lcZ(21,59,"Auth.Email")),o.xp6(2),o.s9C("placeholder",o.lcZ(23,61,"Auth.Email")),o.xp6(2),o.Q6J("ngIf",(null==(_=e.getControl("email"))?null:_.touched)&&!(null!=(_=e.getControl("email"))&&_.valid)),o.xp6(1),o.Q6J("nzXs",o.DdM(88,f))("nzLg",o.DdM(89,p))("nzMd",o.DdM(90,p)),o.xp6(2),o.Oqu(o.lcZ(28,63,"Auth.DOB")),o.xp6(2),o.Q6J("nzFormat",e.dateFormat)("nzDisabledDate",e.disabledDate),o.xp6(2),o.hij(" ",o.lcZ(32,65,"Auth.DOBHint")," "),o.xp6(2),o.Q6J("ngIf",(null==(m=e.getControl("dob"))?null:m.touched)&&!(null!=(m=e.getControl("dob"))&&m.valid)),o.xp6(1),o.Q6J("nzXs",o.DdM(91,f))("nzLg",o.DdM(92,p))("nzMd",o.DdM(93,p)),o.xp6(2),o.Oqu(o.lcZ(37,67,"Auth.CountryCode")),o.xp6(2),o.s9C("placeholder",o.lcZ(39,69,"Auth.CountryCode")),o.xp6(2),o.Q6J("nzXs",o.DdM(94,f))("nzLg",o.DdM(95,p))("nzMd",o.DdM(96,p)),o.xp6(2),o.Oqu(o.lcZ(43,71,"Auth.PhoneNumber")),o.xp6(2),o.s9C("placeholder",o.lcZ(45,73,"Auth.PhoneNumber")),o.xp6(2),o.Q6J("nzXs",o.DdM(97,f))("nzLg",o.DdM(98,p))("nzMd",o.DdM(99,p)),o.xp6(2),o.Oqu(o.lcZ(49,75,"Auth.Password")),o.xp6(3),o.Q6J("ngIf",(null==(u=e.getControl("password"))?null:u.touched)&&(null==(u=e.getControl("password"))?null:u.errors)),o.xp6(1),o.Q6J("nzXs",o.DdM(100,f))("nzLg",o.DdM(101,p))("nzMd",o.DdM(102,p)),o.xp6(2),o.hij(" ",o.lcZ(55,77,"Auth.ConfirmPassword")," "),o.xp6(3),o.Q6J("ngIf",(null==(c=e.getControl("confirmPassword"))?null:c.touched)&&(null==(c=e.getControl("confirmPassword"))||null==c.errors?null:c.errors.required)),o.xp6(1),o.Q6J("ngIf",(null==(g=e.getControl("confirmPassword"))?null:g.touched)&&(null==(g=e.getControl("confirmPassword"))||null==g.errors?null:g.errors.mismatch))}},directives:[l._Y,l.JL,x.SK,l.sg,x.t3,N.Zp,l.Fj,l.JJ,l.u,y.mh,w.O5,R.uw,D.Uh,S.ix,q.dQ,J.w,F.Ls,Y.W],pipes:[E.X$],styles:[".btn-submit[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;padding-right:2em;padding-left:2em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px 0}label[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);display:block;margin-bottom:.5em}.hint[_ngcontent-%COMP%]{font-size:10px;color:#505050}.error[_ngcontent-%COMP%]{font-size:10px;display:block}input[_ngcontent-%COMP%]{width:100%;outline:none;padding:10px;border-radius:5px;font-size:14px;margin-block-end:5px}  .complete-form .ant-modal-footer{text-align:center}  .complete-form .ant-input-suffix{margin-left:0}  .complete-form .ant-input-affix-wrapper{padding:0;padding-inline-end:10px;border:none;border-radius:8px;margin-block-end:10px}  .complete-form .ant-input-affix-wrapper:focus{border-color:transparent;box-shadow:none;border-right-width:0!important;outline:0}  .complete-form .ant-input:focus{border-right-width:0!important}  .complete-form .ant-input-affix-wrapper>input.ant-input{margin-block-end:0}  .complete-form .ant-picker-input>input{width:100%;outline:none;padding:10px;font-size:14px;font-weight:500}  .complete-form .ant-picker{border-radius:8px;padding:0 11px}"]}),t})()}}]);