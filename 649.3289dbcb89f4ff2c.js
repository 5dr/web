"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[649],{4649:(ft,P,c)=>{c.r(P),c.d(P,{AccountHostModule:()=>_t});var u=c(9808),f=c(727),s=c(2340),t=c(5e3),L=c(6952),C=c(6010),D=c(9592),l=c(7152),m=c(1894),M=c(6042),z=c(2643),x=c(2683),A=c(7484),Z=c(3087),k=c(9590),d=c(1062);function U(e,i){if(1&e&&t._UZ(0,"img",26),2&e){const n=t.oxw(2);t.Q6J("src",null==n.profileData?null:n.profileData.avatar,t.LSH)}}function B(e,i){if(1&e&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.profileData.first_name[0]+n.profileData.last_name[0]," ")}}function J(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToHosting()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToHosting")," "))}function Y(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToTraveller()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToTraveller")," "))}const h=function(){return{span:24}},_=function(){return{span:7}},v=function(){return{span:11}};function H(e,i){1&e&&(t.TgZ(0,"div",29)(1,"nz-card",21)(2,"div",15),t._UZ(3,"img",30),t.qZA(),t.TgZ(4,"h4",31),t._uU(5),t.ALo(6,"translate"),t._UZ(7,"i",18),t.qZA(),t.TgZ(8,"p",32),t._uU(9),t.ALo(10,"translate"),t._UZ(11,"i",18),t.qZA(),t.TgZ(12,"p",33),t._uU(13),t.ALo(14,"translate"),t._UZ(15,"i",18),t.qZA()()()),2&e&&(t.Q6J("nzXs",t.DdM(12,h))("nzLg",t.DdM(13,_))("nzMd",t.DdM(14,v)),t.xp6(5),t.hij(" ",t.lcZ(6,6,"AccountHost.Calendar")," "),t.xp6(4),t.hij(" ",t.lcZ(10,8,"AccountHost.BlockDate")," "),t.xp6(4),t.hij(" ",t.lcZ(14,10,"AccountHost.Specific")," "))}const N=function(){return{span:23}},I=function(){return{span:20}},Q=function(){return{span:8}},E=function(){return{span:3}},X=function(){return{span:5}},R=function(){return{span:10}},T=function(){return{span:6}};function F(e,i){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,U,1,1,"img",7),t.YNc(8,B,2,1,"div",8),t.qZA(),t.TgZ(9,"div",9),t._uU(10),t.TgZ(11,"div",10),t.YNc(12,J,3,3,"button",11),t.YNc(13,Y,3,3,"button",11),t.qZA()()(),t.TgZ(14,"div",12)(15,"div",13)(16,"nz-card",14)(17,"div",15),t._UZ(18,"img",16),t.qZA(),t.TgZ(19,"h4",17),t._uU(20),t.ALo(21,"translate"),t._UZ(22,"i",18),t.qZA(),t.TgZ(23,"p",19),t._uU(24),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",20)(27,"nz-card",21)(28,"div",15),t._UZ(29,"img",22),t.qZA(),t.TgZ(30,"h4",17),t._uU(31),t.ALo(32,"translate"),t._UZ(33,"i",18),t.qZA(),t.TgZ(34,"p",19),t._uU(35),t.ALo(36,"translate"),t.qZA()()(),t.TgZ(37,"div",23)(38,"nz-card",21)(39,"div",15),t._UZ(40,"img",24),t.qZA(),t.TgZ(41,"h4",17),t._uU(42),t.ALo(43,"translate"),t._UZ(44,"i",18),t.qZA(),t.TgZ(45,"p",19),t._uU(46),t.ALo(47,"translate"),t.qZA()()(),t.YNc(48,H,16,15,"div",25),t.qZA()()),2&e){const n=t.oxw();t.Q6J("nzXs",t.DdM(45,N))("nzLg",t.DdM(46,I)),t.xp6(3),t.Oqu(t.lcZ(4,31,"AccountHost.Account")),t.xp6(3),t.Q6J("nzXs",t.DdM(47,Q))("nzLg",t.DdM(48,E))("nzMd",t.DdM(49,X)),t.xp6(1),t.Q6J("ngIf",null==n.profileData?null:n.profileData.avatar),t.xp6(1),t.Q6J("ngIf",!(null!=n.profileData&&n.profileData.avatar)),t.xp6(1),t.Q6J("nzXs",t.DdM(50,R))("nzLg",t.DdM(51,T))("nzMd",t.DdM(52,T)),t.xp6(1),t.AsE(" ",null==n.profileData?null:n.profileData.first_name," ",null==n.profileData?null:n.profileData.last_name," "),t.xp6(2),t.Q6J("ngIf","TRAVELLER"===n.userRole),t.xp6(1),t.Q6J("ngIf","HOST"===n.userRole),t.xp6(2),t.Q6J("nzXs",t.DdM(53,h))("nzLg",t.DdM(54,_))("nzMd",t.DdM(55,v)),t.xp6(5),t.hij(" ",t.lcZ(21,33,"AccountHost.Personal")," "),t.xp6(4),t.Oqu(t.lcZ(25,35,"AccountHost.PersonalDesc")),t.xp6(2),t.Q6J("nzMd",t.DdM(56,v))("nzXs",t.DdM(57,h))("nzLg",t.DdM(58,_)),t.xp6(5),t.hij(" ",t.lcZ(32,37,"AccountHost.ChangePassword")," "),t.xp6(4),t.Oqu(t.lcZ(36,39,"AccountHost.ChangeDesc")),t.xp6(2),t.Q6J("nzXs",t.DdM(59,h))("nzLg",t.DdM(60,_))("nzMd",t.DdM(61,v)),t.xp6(5),t.hij(" ",t.lcZ(43,41,"AccountHost.payouts")," "),t.xp6(4),t.Oqu(t.lcZ(47,43,"AccountHost.payoutsDesc")),t.xp6(2),t.Q6J("ngIf","HOST"===n.userRole)}}function j(e,i){1&e&&t._UZ(0,"span",37)}function q(e,i){if(1&e&&(t.TgZ(0,"div",34),t.YNc(1,j,1,0,"ng-template",null,35,t.W1O),t._UZ(3,"nz-spin",36),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}let G=(()=>{class e{constructor(n,o,a,r){this.authService=n,this.commonService=o,this.cookieService=a,this.router=r,this.userRole=s.N.userRole,this.subscriptions=new f.w0}ngOnInit(){this.fetchUserData()}fetchUserData(){this.loading=!0,this.subscriptions.add(this.authService.getProfileData().subscribe(n=>{this.profileData=null==n?void 0:n.data[0],this.loading=!1,this.cookieService.put("userData",JSON.stringify(null==n?void 0:n.data[0]))},n=>{this.loading=!1,this.commonService.showErrorAlert("Error","Failed to get cities, Please try again")}))}switchToHosting(){this.cookieService.put("userRole","HOST"),this.commonService.userRole.next("HOST"),s.N.userRole="HOST",this.userRole="HOST",this.router.navigateByUrl("/host/listing")}switchToTraveller(){this.cookieService.put("userRole","TRAVELLER"),this.commonService.userRole.next("TRAVELLER"),s.N.userRole="TRAVELLER",this.userRole="TRAVELLER",this.router.navigateByUrl("/")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(L.e),t.Y36(C.v),t.Y36(D.N_),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],decls:3,vars:2,consts:[["nz-row","","id","account-host"],["class","m-auto","nz-col","",3,"nzXs","nzLg",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[1,"title","mb-3"],["nz-row","","nzAlign","middle",1,"account-details"],["nz-col","",1,"img-account",3,"nzXs","nzLg","nzMd"],["class","rounded-circle","alt","","width","100px",3,"src",4,"ngIf"],["class","img avatar","nz-page-header-avatar","",4,"ngIf"],["nz-col","",1,"name-account",3,"nzXs","nzLg","nzMd"],[1,"btns"],["nz-button","",3,"click",4,"ngIf"],["nz-row","","nzAlign","middle","nzJustify","space-between",1,"account-cards"],["nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["nzHoverable","","routerLink","/personal-info"],[1,"icon"],["src","../../../../../../assets/imgs/account-host/personal_info.svg","alt","personal info"],[1,"title-card","d-flex","mt-3","align-items-center"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"desc"],["routerLink","/change-password","nz-col","",1,"item-card","mt-5",3,"nzMd","nzXs","nzLg"],["nzHoverable",""],["src","../../../../../../assets/imgs/account-host/change-password.svg","alt","personal info"],["routerLink","/host/payment","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","../../../../../../assets/imgs/account-host/payment.svg","alt","personal info"],["routerLink","/profile/calender","class","item-card mt-5","nz-col","",3,"nzXs","nzLg","nzMd",4,"ngIf"],["alt","","width","100px",1,"rounded-circle",3,"src"],["nz-page-header-avatar","",1,"img","avatar"],["nz-button","",3,"click"],["routerLink","/profile/calender","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","../../../../../../assets/imgs/account-host/calendar 1.svg","alt","personal info"],[1,"title-card","d-flex","my-3","align-items-center"],[1,"desc-calendar","d-flex","align-items-center"],[1,"desc-calendar","mb-0","d-flex","align-items-center"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,o){1&n&&(t.TgZ(0,"section",0),t.YNc(1,F,49,62,"div",1),t.YNc(2,q,4,1,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[m.SK,u.O5,m.t3,M.ix,z.dQ,x.w,A.bd,l.rH,Z.Ls,k.W],pipes:[d.X$],styles:["#account-host[_ngcontent-%COMP%]{padding:50px 24px 20px}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]{padding:20px 24px 0}}#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:45px;color:var(--bs-dark)}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:19px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]{margin-block-end:1em}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{text-align:center}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{margin-inline-end:15px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .switch-btn[_ngcontent-%COMP%]{display:block}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:var(--bs-primary);color:var(--bs-white);text-align:center;line-height:3em;font-size:2em}@media (max-width: 1024px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:90px;height:90px;line-height:2.7em}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--bs-dark)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]{margin-top:1em;border-color:var(--bs-primary)!important;font-size:14px;height:2.5em;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]:hover{color:var(--bs-white)!important;background-color:var(--bs-primary)!important}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{margin-bottom:2em}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{justify-content:center}}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{height:195px;line-height:20px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:scale-down}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;padding-inline-start:10px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{color:var(--bs-dark);font-size:15px;font-weight:500}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-gray-600)}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc-calendar[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);margin-bottom:10px}  .account-cards .ant-card{border-radius:5px}  .account-cards .ant-card-body{height:195px;display:flex;flex-direction:column;justify-content:space-between}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center;width:100%}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}"]}),e})();var b=c(5439),O=c(3640),$=c(520);let w=(()=>{class e{constructor(n){this.http=n}getBlockedDates(n){return this.http.get(`${s.N.endPointUrl}/user/travelling/property-details/${n}`)}addBlockedDate(n,o){return this.http.put(`${s.N.endPointUrl}/user/hosting/list-property/blocked-dates/${n}`,o)}removeBlockedDate(n){return this.http.delete(`${s.N.endPointUrl}/user/hosting/remove-block-date/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG($.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=c(2905),p=c(3075);function K(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",3)(1,"button",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCancel()}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().onConfirm()}),t._uU(6),t.ALo(7,"translate"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"General.Cancel")),t.xp6(2),t.Q6J("nzLoading",n.loading),t.xp6(1),t.hij(" ",t.lcZ(7,5,"General.Confirm")," ")}}let W=(()=>{class e{constructor(n,o,a,r){this.modal=n,this.commonService=o,this.translateService=a,this.calenderService=r,this.loading=!1,this.blockedDates=[],this.subscriptions=new f.w0,this.disabledDate=g=>g<new Date||this.isDateIncluded(g)}ngOnInit(){}onDateChange(n){console.log(n),this.selectedDate=n}onConfirm(){this.loading=!0,this.subscriptions.add(this.calenderService.addBlockedDate(this.propertyId,{blocked_dates:[b(this.selectedDate).format("DD-MM-YYYY")]}).subscribe(n=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.modal.close({added:!0})},n=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)}))}isDateIncluded(n){let o=this.blockedDates.map(a=>b(new Date(a)).format("DD-MM-YYYY"));return!!(null==o?void 0:o.includes(b(n).format("DD-MM-YYYY")))}onCancel(){this.modal.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(O.Lf),t.Y36(C.v),t.Y36(d.sK),t.Y36(w))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blocked-date-popup"]],decls:3,vars:2,consts:[[1,"date-picker-wrapper"],["nzInline","","nzSize","large",3,"nzDisabledDate","ngModel","ngModelChange"],["class","modal-footer",4,"nzModalFooter"],[1,"modal-footer"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"nz-date-picker",1),t.NdJ("ngModelChange",function(r){return o.selectedDate=r})("ngModelChange",function(r){return o.onDateChange(r)}),t.qZA()(),t.YNc(2,K,8,7,"div",2)),2&n&&(t.xp6(1),t.Q6J("nzDisabledDate",o.disabledDate)("ngModel",o.selectedDate))},directives:[V.uw,p.JJ,p.On,O.Uh,M.ix,x.w,z.dQ],pipes:[d.X$],styles:[".date-picker-wrapper[_ngcontent-%COMP%]{text-align:center}  .date-picker-wrapper .ant-picker-panel-container{box-shadow:none!important;border:1px solid #ddd}  .date-picker-wrapper nz-date-picker,   .date-picker-wrapper .ant-picker-dropdown,   .date-picker-wrapper .ant-picker-panel,   .date-picker-wrapper .ant-picker-date-panel,   .date-picker-wrapper .ant-picker-body,   .date-picker-wrapper .ant-picker-content{width:100%!important}"]}),e})();var tt=c(3501),y=c(8054),nt=c(5181);function et(e,i){if(1&e&&t._UZ(0,"nz-option",14),2&e){const n=i.$implicit;t.Q6J("nzValue",n.id)("nzLabel",n.name)}}function ot(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"nz-card",17)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"span",18),t.NdJ("click",function(){const a=t.CHM(n),r=a.$implicit,g=a.index;return t.oxw(2).removeBlockedDate(null==r?null:r.id,g)}),t.qZA()()}if(2&e){const n=i.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,null==n?null:n.blocked_date,"dd-MMM-YYYY"))}}function at(e,i){if(1&e&&(t.TgZ(0,"div",15),t.YNc(1,ot,5,4,"nz-card",16),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.blockedDates)}}function it(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",19)(1,"app-empty-state",20),t.NdJ("btnClicked",function(){return t.CHM(n),t.oxw().onBrowseBtnClicked()}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("title",n.emptyData.title)("text",n.emptyData.text)("icon",n.emptyData.icon)("withBtn",n.emptyData.withBtn)("btnText",n.emptyData.btnText)}}function ct(e,i){1&e&&t._UZ(0,"span",24)}function rt(e,i){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,ct,1,0,"ng-template",null,22,t.W1O),t._UZ(3,"nz-spin",23),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}const st=function(){return{span:24}},lt=function(){return{span:20}},dt=function(){return{span:11}},pt=function(){return{span:6}},gt=[{path:"",component:G},{path:"calender",component:(()=>{class e{constructor(n,o,a,r,g,S,vt){this.commonService=n,this.translateService=o,this.listingService=a,this.cookieService=r,this.calenderService=g,this.router=S,this.modal=vt,this.filterCriteria={page:1,pageSize:1e3},this.subscriptions=new f.w0,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.loading=!1,this.listingData=[],this.blockedDates=[]}ngOnInit(){this.getUserData()}getUserData(){this.cookieService.get("userData")?(this.userData=JSON.parse(this.cookieService.get("userData")),this.fetchListingData()):this.handleNotAuthorized()}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("AccountHost.NoBlockedDates"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:this.translateService.instant("General.Browse")}}onBrowseBtnClicked(){var n;(null===(n=this.userData)||void 0===n?void 0:n.id)?this.router.navigateByUrl("/"):this.router.navigateByUrl("auth/sign-up")}handleNotAuthorized(){this.emptyData={title:this.translateService.instant("General.NotLoggedIn"),text:this.translateService.instant("General.PleaseLogin"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.LoginOrSignup")}}fetchListingData(){this.loading=!0,this.subscriptions.add(this.listingService.getListings(this.filterCriteria).subscribe(n=>{var o,a;(null==n?void 0:n.successful)&&(this.loading=!1,this.listingData=null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.data,this.selectedProperty=null===(a=this.listingData[0])||void 0===a?void 0:a.id,this.fetchBlockedDates())},n=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)}))}fetchBlockedDates(){this.loading=!0,this.subscriptions.add(this.calenderService.getBlockedDates(this.selectedProperty).subscribe(n=>{var o,a;this.blockedDates=null===(o=null==n?void 0:n.data[0])||void 0===o?void 0:o.blocked_dates,(null===(a=this.blockedDates)||void 0===a?void 0:a.length)||this.handleEmptyData(),this.loading=!1}))}onPropertyChange(n){this.selectedProperty=n,this.fetchBlockedDates()}onAddBlockedDate(){this.modal.create({nzTitle:this.translateService.instant("AccountHost.AddBlockedDate"),nzContent:W,nzComponentParams:{propertyId:this.selectedProperty,blockedDates:this.blockedDates.map(o=>o.blocked_date)}}).afterClose.subscribe(o=>{(null==o?void 0:o.added)&&this.fetchBlockedDates()})}removeBlockedDate(n,o){this.subscriptions.add(this.calenderService.removeBlockedDate(n).subscribe(a=>{var r;this.loading=!1,(null==a?void 0:a.successful)&&(this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==a?void 0:a.message),this.blockedDates.splice(o,1),(null===(r=this.blockedDates)||void 0===r?void 0:r.length)||this.handleEmptyData())},a=>{var r;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.v),t.Y36(d.sK),t.Y36(tt.o),t.Y36(D.N_),t.Y36(w),t.Y36(l.F0),t.Y36(O.Sf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-calender"]],decls:22,vars:25,consts:[["nz-row","","id","calender"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[1,"back"],["routerLink","/profile",1,"back-route","d-flex","align-items-center"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"title","mt-2","mb-5"],[1,"top-row"],["nz-col","",3,"nzXs","nzLg"],["nzAllowClear","false","nzShowSearch","","nzServerSearch","",1,"city-select",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",1,"btn",3,"click"],["class","dates-data mt-5",4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"dates-data","mt-5"],["class","date-item",4,"ngFor","ngForOf"],[1,"date-item"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon",3,"click"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,o){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",5)(8,"h2"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",6)(12,"div",7)(13,"nz-select",8),t.NdJ("ngModelChange",function(r){return o.onPropertyChange(r)})("ngModelChange",function(r){return o.selectedProperty=r}),t.ALo(14,"translate"),t.YNc(15,et,1,2,"nz-option",9),t.qZA()(),t.TgZ(16,"button",10),t.NdJ("click",function(){return o.onAddBlockedDate()}),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.YNc(19,at,2,1,"div",11),t.YNc(20,it,2,5,"div",12),t.YNc(21,rt,4,1,"div",13),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("nzXs",t.DdM(21,st))("nzLg",t.DdM(22,lt)),t.xp6(4),t.Oqu(t.lcZ(6,13,"Payment.Back")),t.xp6(4),t.Oqu(t.lcZ(10,15,"AccountHost.Calendar")),t.xp6(3),t.Q6J("nzXs",t.DdM(23,dt))("nzLg",t.DdM(24,pt)),t.xp6(1),t.s9C("nzPlaceHolder",t.lcZ(14,17,"AccountHost.ChooseProperty")),t.Q6J("ngModel",o.selectedProperty),t.xp6(2),t.Q6J("ngForOf",o.listingData),t.xp6(2),t.Oqu(t.lcZ(18,19,"AccountHost.AddBlockedDate")),t.xp6(2),t.Q6J("ngIf",(null==o.blockedDates?null:o.blockedDates.length)&&!o.loading),t.xp6(1),t.Q6J("ngIf",!(null!=o.blockedDates&&o.blockedDates.length||o.loading)),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[m.SK,m.t3,l.rH,x.w,Z.Ls,y.Vq,p.JJ,p.On,u.sg,y.Ip,M.ix,z.dQ,u.O5,A.bd,nt.s,k.W],pipes:[d.X$,u.uU],styles:["#calender[_ngcontent-%COMP%]{padding:50px 24px 20px;margin-bottom:2em}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]{cursor:pointer;color:var(--bs-blue);font-size:18px;line-height:20px;font-weight:500}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-inline-end:6px}#calender[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:30px;color:var(--bs-dark)}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}@media (max-width: 768px){#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px}}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]{min-height:50vh;display:flex;flex-direction:row;flex-wrap:wrap}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;margin-bottom:1em;margin-inline-end:1em;display:inline-block}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:red;margin-inline-start:1em;cursor:pointer;vertical-align:baseline}  .notification-item .ant-row-bottom{align-items:center!important}@media (max-width: 575px){  .notification-item .ant-card-body{padding:15px}}  .ant-pagination-next .ant-pagination-item-link,   .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  .ant-pagination-item a,   .ant-pagination-item:focus-visible a,   .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}"]}),e})()}];let ut=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(gt)],l.Bz]}),e})();var mt=c(978),ht=c(5326);let _t=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,ht.m,p.u5,p.UX,ut,d.aw,mt.P]]}),e})()}}]);