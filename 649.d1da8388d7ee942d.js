"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[649],{4649:(I,O,r)=>{r.r(O),r.d(O,{AccountHostModule:()=>yt});var a=r(9808),C=r(727),p=r(2340),t=r(5e3),D=r(6952),x=r(6010),P=r(9592),u=r(4239),m=r(1894),M=r(6042),z=r(2643),s=r(2683),_=r(7484),d=r(3087),h=r(9590),g=r(1062);function Z(e,i){if(1&e&&t._UZ(0,"img",28),2&e){const n=t.oxw(2);t.Q6J("src",null==n.profileData?null:n.profileData.avatar,t.LSH)}}function J(e,i){if(1&e&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.profileData.first_name[0]+n.profileData.last_name[0]," ")}}function Y(e,i){1&e&&(t.TgZ(0,"span",30),t._uU(1," (TRAVELLER) "),t.qZA())}function E(e,i){1&e&&(t.TgZ(0,"span",30),t._uU(1," (HOSTING) "),t.qZA())}function B(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToHosting()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToHosting")," "))}function H(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).switchToTraveller()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.SwitchToTraveller")," "))}function Q(e,i){1&e&&t._UZ(0,"i",32)}function R(e,i){1&e&&t._UZ(0,"i",33)}function F(e,i){1&e&&t._UZ(0,"i",32)}function X(e,i){1&e&&t._UZ(0,"i",33)}function j(e,i){1&e&&t._UZ(0,"i",32)}function q(e,i){1&e&&t._UZ(0,"i",33)}function G(e,i){1&e&&t._UZ(0,"i",32)}function W(e,i){1&e&&t._UZ(0,"i",33)}function $(e,i){1&e&&t._UZ(0,"i",32)}function K(e,i){1&e&&t._UZ(0,"i",33)}function V(e,i){1&e&&t._UZ(0,"i",32)}function tt(e,i){1&e&&t._UZ(0,"i",33)}const b=function(){return{span:24}},T=function(){return{span:7}},A=function(){return{span:11}};function nt(e,i){if(1&e&&(t.TgZ(0,"div",34)(1,"nz-card",23)(2,"div",16),t._UZ(3,"img",35),t.qZA(),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.YNc(7,G,1,0,"i",19),t.YNc(8,W,1,0,"i",20),t.qZA(),t.TgZ(9,"p",37),t._uU(10),t.ALo(11,"translate"),t.YNc(12,$,1,0,"i",19),t.YNc(13,K,1,0,"i",20),t.qZA(),t.TgZ(14,"p",38),t._uU(15),t.ALo(16,"translate"),t.YNc(17,V,1,0,"i",19),t.YNc(18,tt,1,0,"i",20),t.qZA()()()),2&e){const n=t.oxw(2);t.Q6J("nzXs",t.DdM(18,b))("nzLg",t.DdM(19,T))("nzMd",t.DdM(20,A)),t.xp6(5),t.hij(" ",t.lcZ(6,12,"AccountHost.Calendar")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.hij(" ",t.lcZ(11,14,"AccountHost.BlockDate")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.hij(" ",t.lcZ(16,16,"AccountHost.Specific")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang)}}const et=function(){return{span:23}},ot=function(){return{span:20}},at=function(){return{span:6}},k=function(){return{span:4}},it=function(){return{span:16}},L=function(){return{span:10}};function ct(e,i){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,Z,1,1,"img",7),t.YNc(8,J,2,1,"div",8),t.qZA(),t.TgZ(9,"div",9),t._uU(10),t.YNc(11,Y,2,0,"span",10),t.YNc(12,E,2,0,"span",10),t.TgZ(13,"div",11),t.YNc(14,B,3,3,"button",12),t.YNc(15,H,3,3,"button",12),t.qZA()()(),t.TgZ(16,"div",13)(17,"div",14)(18,"nz-card",15)(19,"div",16),t._UZ(20,"img",17),t.qZA(),t.TgZ(21,"h4",18),t._uU(22),t.ALo(23,"translate"),t.YNc(24,Q,1,0,"i",19),t.YNc(25,R,1,0,"i",20),t.qZA(),t.TgZ(26,"p",21),t._uU(27),t.ALo(28,"translate"),t.qZA()()(),t.TgZ(29,"div",22)(30,"nz-card",23)(31,"div",16),t._UZ(32,"img",24),t.qZA(),t.TgZ(33,"h4",18),t._uU(34),t.ALo(35,"translate"),t.YNc(36,F,1,0,"i",19),t.YNc(37,X,1,0,"i",20),t.qZA(),t.TgZ(38,"p",21),t._uU(39),t.ALo(40,"translate"),t.qZA()()(),t.TgZ(41,"div",25)(42,"nz-card",23)(43,"div",16),t._UZ(44,"img",26),t.qZA(),t.TgZ(45,"h4",18),t._uU(46),t.ALo(47,"translate"),t.YNc(48,j,1,0,"i",19),t.YNc(49,q,1,0,"i",20),t.qZA(),t.TgZ(50,"p",21),t._uU(51),t.ALo(52,"translate"),t.qZA()()(),t.YNc(53,nt,19,21,"div",27),t.qZA()()),2&e){const n=t.oxw();t.Q6J("nzXs",t.DdM(53,et))("nzLg",t.DdM(54,ot)),t.xp6(3),t.Oqu(t.lcZ(4,39,"AccountHost.Account")),t.xp6(3),t.Q6J("nzXs",t.DdM(55,at))("nzLg",t.DdM(56,k))("nzMd",t.DdM(57,k)),t.xp6(1),t.Q6J("ngIf",null==n.profileData?null:n.profileData.avatar),t.xp6(1),t.Q6J("ngIf",!(null!=n.profileData&&n.profileData.avatar)),t.xp6(1),t.Q6J("nzXs",t.DdM(58,it))("nzLg",t.DdM(59,L))("nzMd",t.DdM(60,L)),t.xp6(1),t.AsE(" ",null==n.profileData?null:n.profileData.first_name," ",null==n.profileData?null:n.profileData.last_name," "),t.xp6(1),t.Q6J("ngIf","TRAVELLER"===n.userRole),t.xp6(1),t.Q6J("ngIf","HOST"===n.userRole),t.xp6(2),t.Q6J("ngIf","TRAVELLER"===n.userRole),t.xp6(1),t.Q6J("ngIf","HOST"===n.userRole),t.xp6(2),t.Q6J("nzXs",t.DdM(61,b))("nzLg",t.DdM(62,T))("nzMd",t.DdM(63,A)),t.xp6(5),t.hij(" ",t.lcZ(23,41,"AccountHost.Personal")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(28,43,"AccountHost.PersonalDesc")),t.xp6(2),t.Q6J("nzMd",t.DdM(64,A))("nzXs",t.DdM(65,b))("nzLg",t.DdM(66,T)),t.xp6(5),t.hij(" ",t.lcZ(35,45,"AccountHost.ChangePassword")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(40,47,"AccountHost.ChangeDesc")),t.xp6(2),t.Q6J("nzXs",t.DdM(67,b))("nzLg",t.DdM(68,T))("nzMd",t.DdM(69,A)),t.xp6(5),t.hij(" ",t.lcZ(47,49,"AccountHost.payouts")," "),t.xp6(2),t.Q6J("ngIf","en"==n.lang),t.xp6(1),t.Q6J("ngIf","ar"==n.lang),t.xp6(2),t.Oqu(t.lcZ(52,51,"AccountHost.payoutsDesc")),t.xp6(2),t.Q6J("ngIf","HOST"===n.userRole)}}function rt(e,i){1&e&&t._UZ(0,"span",42)}function lt(e,i){if(1&e&&(t.TgZ(0,"div",39),t.YNc(1,rt,1,0,"ng-template",null,40,t.W1O),t._UZ(3,"nz-spin",41),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}let st=(()=>{class e{constructor(n,o,c,l){this.authService=n,this.commonService=o,this.cookieService=c,this.router=l,this.userRole=p.N.userRole,this.subscriptions=new C.w0,this.lang=this.cookieService.get("lang")}ngOnInit(){this.fetchUserData()}fetchUserData(){this.loading=!0,this.subscriptions.add(this.authService.getProfileData().subscribe(n=>{this.profileData=null==n?void 0:n.data[0],this.loading=!1,this.cookieService.put("userData",JSON.stringify(null==n?void 0:n.data[0]))},n=>{this.loading=!1,this.commonService.showErrorAlert("Error","Failed to get cities, Please try again")}))}switchToHosting(){this.cookieService.put("userRole","HOST"),this.commonService.userRole.next("HOST"),p.N.userRole="HOST",this.userRole="HOST",this.router.navigateByUrl("/host/listing")}switchToTraveller(){this.cookieService.put("userRole","TRAVELLER"),this.commonService.userRole.next("TRAVELLER"),p.N.userRole="TRAVELLER",this.userRole="TRAVELLER",this.router.navigateByUrl("/")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(D.e),t.Y36(x.v),t.Y36(P.N_),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],decls:3,vars:2,consts:[["nz-row","","id","account-host"],["class","m-auto","nz-col","",3,"nzXs","nzLg",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[1,"title","mb-3"],["nz-row","","nzAlign","middle",1,"account-details"],["nz-col","",1,"img-account",3,"nzXs","nzLg","nzMd"],["class","rounded-circle","alt","","width","100px",3,"src",4,"ngIf"],["class","img avatar","nz-page-header-avatar","",4,"ngIf"],["nz-col","",1,"name-account",3,"nzXs","nzLg","nzMd"],["class","type",4,"ngIf"],[1,"btns"],["nz-button","",3,"click",4,"ngIf"],["nz-row","","nzAlign","middle","nzJustify","space-between",1,"account-cards"],["nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["nzHoverable","","routerLink","/personal-info"],[1,"icon"],["src","../../../../../../assets/imgs/account-host/personal_info.svg","alt","personal info"],[1,"title-card","d-flex","mt-3","align-items-center"],["nz-icon","","nzType","right","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","left","nzTheme","outline",4,"ngIf"],[1,"desc"],["routerLink","/change-password","nz-col","",1,"item-card","mt-5",3,"nzMd","nzXs","nzLg"],["nzHoverable",""],["src","../../../../../../assets/imgs/account-host/change-password.svg","alt","personal info"],["routerLink","/host/payment","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","../../../../../../assets/imgs/account-host/payment.svg","alt","personal info"],["routerLink","/profile/calender","class","item-card mt-5","nz-col","",3,"nzXs","nzLg","nzMd",4,"ngIf"],["alt","","width","100px",1,"rounded-circle",3,"src"],["nz-page-header-avatar","",1,"img","avatar"],[1,"type"],["nz-button","",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],["nz-icon","","nzType","left","nzTheme","outline"],["routerLink","/profile/calender","nz-col","",1,"item-card","mt-5",3,"nzXs","nzLg","nzMd"],["src","../../../../../../assets/imgs/account-host/calendar 1.svg","alt","personal info"],[1,"title-card","d-flex","my-3","align-items-center"],[1,"desc-calendar","d-flex","align-items-center"],[1,"desc-calendar","mb-0","d-flex","align-items-center"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,o){1&n&&(t.TgZ(0,"section",0),t.YNc(1,ct,54,70,"div",1),t.YNc(2,lt,4,1,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[m.SK,a.O5,m.t3,M.ix,z.dQ,s.w,_.bd,u.rH,d.Ls,h.W],pipes:[g.X$],styles:["#account-host[_ngcontent-%COMP%]{padding:50px 24px 20px}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]{padding:20px 24px 0}}#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:45px;color:var(--bs-dark)}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:19px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]{margin-block-end:1em}@media (max-width: 400px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]{justify-content:space-between}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{text-align:center}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .img-account[_ngcontent-%COMP%]{margin-inline-end:15px}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .switch-btn[_ngcontent-%COMP%]{display:block}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:var(--bs-primary);color:var(--bs-white);text-align:center;line-height:3em;font-size:2em}@media (max-width: 1024px){#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:90px;height:90px;line-height:2.7em}}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--bs-dark)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]{margin-top:1em;border-color:var(--bs-primary)!important;font-size:14px;height:2.5em;color:var(--bs-primary)}#account-host[_ngcontent-%COMP%]   .account-details[_ngcontent-%COMP%]   .name-account[_ngcontent-%COMP%]   .ant-btn[_ngcontent-%COMP%]:hover{color:var(--bs-white)!important;background-color:var(--bs-primary)!important}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{margin-bottom:2em}@media (max-width: 575px){#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]{justify-content:center}}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{height:195px;line-height:20px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:scale-down}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;padding-inline-start:10px}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .title-card[_ngcontent-%COMP%]{color:var(--bs-dark);font-size:15px;font-weight:500}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-gray-600)}#account-host[_ngcontent-%COMP%]   .account-cards[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .desc-calendar[_ngcontent-%COMP%]{font-size:14px;color:var(--bs-dark);margin-bottom:10px}  .account-cards .ant-card{border-radius:5px}  .account-cards .ant-card-body{height:195px;display:flex;flex-direction:column;justify-content:space-between}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center;width:100%}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}"]}),e})();var y=r(5439),w=r(3640),dt=r(520);let S=(()=>{class e{constructor(n){this.http=n}getBlockedDates(n){return this.http.get(`${p.N.endPointUrl}/user/travelling/property-details/${n}`)}addBlockedDate(n,o){return this.http.put(`${p.N.endPointUrl}/user/hosting/list-property/blocked-dates/${n}`,o)}removeBlockedDate(n){return this.http.delete(`${p.N.endPointUrl}/user/hosting/remove-block-date/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(dt.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var pt=r(2905),v=r(3075);function gt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",3)(1,"button",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCancel()}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().onConfirm()}),t._uU(6),t.ALo(7,"translate"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"General.Cancel")),t.xp6(2),t.Q6J("nzLoading",n.loading),t.xp6(1),t.hij(" ",t.lcZ(7,5,"General.Confirm")," ")}}let ut=(()=>{class e{constructor(n,o,c,l){this.modal=n,this.commonService=o,this.translateService=c,this.calenderService=l,this.loading=!1,this.blockedDates=[],this.subscriptions=new C.w0,this.disabledDate=f=>f<new Date||this.isDateIncluded(f)}ngOnInit(){}onDateChange(n){console.log(n),this.selectedDate=n}onConfirm(){this.loading=!0,this.subscriptions.add(this.calenderService.addBlockedDate(this.propertyId,{blocked_dates:[y(this.selectedDate).format("DD-MM-YYYY")]}).subscribe(n=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==n?void 0:n.message),this.modal.close({added:!0})},n=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)}))}isDateIncluded(n){let o=this.blockedDates.map(c=>y(new Date(c)).format("DD-MM-YYYY"));return!!(null==o?void 0:o.includes(y(n).format("DD-MM-YYYY")))}onCancel(){this.modal.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(w.Lf),t.Y36(x.v),t.Y36(g.sK),t.Y36(S))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blocked-date-popup"]],decls:3,vars:2,consts:[[1,"date-picker-wrapper"],["nzInline","","nzSize","large",3,"nzDisabledDate","ngModel","ngModelChange"],["class","modal-footer",4,"nzModalFooter"],[1,"modal-footer"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"nz-date-picker",1),t.NdJ("ngModelChange",function(l){return o.selectedDate=l})("ngModelChange",function(l){return o.onDateChange(l)}),t.qZA()(),t.YNc(2,gt,8,7,"div",2)),2&n&&(t.xp6(1),t.Q6J("nzDisabledDate",o.disabledDate)("ngModel",o.selectedDate))},directives:[pt.uw,v.JJ,v.On,w.Uh,M.ix,s.w,z.dQ],pipes:[g.X$],styles:[".date-picker-wrapper[_ngcontent-%COMP%]{text-align:center}  .date-picker-wrapper .ant-picker-panel-container{box-shadow:none!important;border:1px solid #ddd}  .date-picker-wrapper nz-date-picker,   .date-picker-wrapper .ant-picker-dropdown,   .date-picker-wrapper .ant-picker-panel,   .date-picker-wrapper .ant-picker-date-panel,   .date-picker-wrapper .ant-picker-body,   .date-picker-wrapper .ant-picker-content{width:100%!important}"]}),e})();var _t=r(3501),N=r(8054),mt=r(5181);function ht(e,i){if(1&e&&t._UZ(0,"nz-option",14),2&e){const n=i.$implicit;t.Q6J("nzValue",n.id)("nzLabel",n.name)}}function vt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"nz-card",17)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"span",18),t.NdJ("click",function(){const c=t.CHM(n),l=c.$implicit,f=c.index;return t.oxw(2).removeBlockedDate(null==l?null:l.id,f)}),t.qZA()()}if(2&e){const n=i.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,null==n?null:n.blocked_date,"dd-MMM-YYYY"))}}function ft(e,i){if(1&e&&(t.TgZ(0,"div",15),t.YNc(1,vt,5,4,"nz-card",16),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.blockedDates)}}function Ct(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",19)(1,"app-empty-state",20),t.NdJ("btnClicked",function(){return t.CHM(n),t.oxw().onBrowseBtnClicked()}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("title",n.emptyData.title)("text",n.emptyData.text)("icon",n.emptyData.icon)("withBtn",n.emptyData.withBtn)("btnText",n.emptyData.btnText)}}function xt(e,i){1&e&&t._UZ(0,"span",24)}function Mt(e,i){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,xt,1,0,"ng-template",null,22,t.W1O),t._UZ(3,"nz-spin",23),t.qZA()),2&e){const n=t.MAs(2);t.xp6(3),t.Q6J("nzIndicator",n)}}const zt=function(){return{span:24}},Ot=function(){return{span:20}},Pt=function(){return{span:11}},bt=function(){return{span:6}},Tt=[{path:"",component:st},{path:"calender",component:(()=>{class e{constructor(n,o,c,l,f,U,wt){this.commonService=n,this.translateService=o,this.listingService=c,this.cookieService=l,this.calenderService=f,this.router=U,this.modal=wt,this.lang=p.N.lang,this.filterCriteria={page:1,pageSize:1e3},this.subscriptions=new C.w0,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.loading=!1,this.listingData=[],this.blockedDates=[]}ngOnInit(){this.getUserData()}getUserData(){this.cookieService.get("userData")?(this.userData=JSON.parse(this.cookieService.get("userData")),this.fetchListingData()):this.handleNotAuthorized()}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("AccountHost.NoBlockedDates"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!1,btnText:this.translateService.instant("General.Browse")}}onBrowseBtnClicked(){var n;(null===(n=this.userData)||void 0===n?void 0:n.id)?this.router.navigateByUrl("/"):this.router.navigateByUrl("auth/sign-up")}handleNotAuthorized(){this.emptyData={title:this.translateService.instant("General.NotLoggedIn"),text:this.translateService.instant("General.PleaseLogin"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.LoginOrSignup")}}fetchListingData(){this.loading=!0,this.subscriptions.add(this.listingService.getListings(this.filterCriteria).subscribe(n=>{var o,c;(null==n?void 0:n.successful)&&(this.loading=!1,this.listingData=null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.data,this.selectedProperty=null===(c=this.listingData[0])||void 0===c?void 0:c.id,this.fetchBlockedDates())},n=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)}))}fetchBlockedDates(){this.loading=!0,this.subscriptions.add(this.calenderService.getBlockedDates(this.selectedProperty).subscribe(n=>{var o,c;this.blockedDates=null===(o=null==n?void 0:n.data[0])||void 0===o?void 0:o.blocked_dates,(null===(c=this.blockedDates)||void 0===c?void 0:c.length)||this.handleEmptyData(),this.loading=!1}))}onPropertyChange(n){this.selectedProperty=n,this.fetchBlockedDates()}onAddBlockedDate(){this.modal.create({nzTitle:this.translateService.instant("AccountHost.AddBlockedDate"),nzContent:ut,nzComponentParams:{propertyId:this.selectedProperty,blockedDates:this.blockedDates.map(o=>o.blocked_date)}}).afterClose.subscribe(o=>{(null==o?void 0:o.added)&&this.fetchBlockedDates()})}removeBlockedDate(n,o){this.subscriptions.add(this.calenderService.removeBlockedDate(n).subscribe(c=>{var l;this.loading=!1,(null==c?void 0:c.successful)&&(this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==c?void 0:c.message),this.blockedDates.splice(o,1),(null===(l=this.blockedDates)||void 0===l?void 0:l.length)||this.handleEmptyData())},c=>{var l;this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(l=null==c?void 0:c.error)||void 0===l?void 0:l.message)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.v),t.Y36(g.sK),t.Y36(_t.o),t.Y36(P.N_),t.Y36(S),t.Y36(u.F0),t.Y36(w.Sf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-calender"]],decls:22,vars:27,consts:[["nz-row","","id","calender"],["nz-col","",1,"m-auto",3,"nzXs","nzLg"],[1,"back"],["routerLink","/profile",1,"back-route","d-flex","align-items-center"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"title","mt-2","mb-5"],[1,"top-row"],["nz-col","",3,"nzXs","nzLg"],["nzAllowClear","false","nzShowSearch","","nzServerSearch","",1,"city-select",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",1,"btn",3,"click"],["class","dates-data mt-5",4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"dates-data","mt-5"],["class","date-item",4,"ngFor","ngForOf"],[1,"date-item"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon",3,"click"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(n,o){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",5)(8,"h2"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",6)(12,"div",7)(13,"nz-select",8),t.NdJ("ngModelChange",function(l){return o.onPropertyChange(l)})("ngModelChange",function(l){return o.selectedProperty=l}),t.ALo(14,"translate"),t.YNc(15,ht,1,2,"nz-option",9),t.qZA()(),t.TgZ(16,"button",10),t.NdJ("click",function(){return o.onAddBlockedDate()}),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.YNc(19,ft,2,1,"div",11),t.YNc(20,Ct,2,5,"div",12),t.YNc(21,Mt,4,1,"div",13),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("nzXs",t.DdM(23,zt))("nzLg",t.DdM(24,Ot)),t.xp6(4),t.Oqu(t.lcZ(6,15,"Payment.Back")),t.xp6(4),t.Oqu(t.lcZ(10,17,"AccountHost.Calendar")),t.xp6(3),t.Q6J("nzXs",t.DdM(25,Pt))("nzLg",t.DdM(26,bt)),t.xp6(1),t.ekj("ant-select-rtl","ar"==o.lang),t.s9C("nzPlaceHolder",t.lcZ(14,19,"AccountHost.ChooseProperty")),t.Q6J("ngModel",o.selectedProperty),t.xp6(2),t.Q6J("ngForOf",o.listingData),t.xp6(2),t.Oqu(t.lcZ(18,21,"AccountHost.AddBlockedDate")),t.xp6(2),t.Q6J("ngIf",(null==o.blockedDates?null:o.blockedDates.length)&&!o.loading),t.xp6(1),t.Q6J("ngIf",!(null!=o.blockedDates&&o.blockedDates.length||o.loading)),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[m.SK,m.t3,u.rH,s.w,d.Ls,N.Vq,v.JJ,v.On,a.sg,N.Ip,M.ix,z.dQ,a.O5,_.bd,mt.s,h.W],pipes:[g.X$,a.uU],styles:["#calender[_ngcontent-%COMP%]{padding:50px 24px 20px;margin-bottom:2em}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]{cursor:pointer;color:var(--bs-blue);font-size:18px;line-height:20px;font-weight:500}#calender[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .back-route[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-inline-end:6px}#calender[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:30px;color:var(--bs-dark)}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;font-size:16px;height:2.5em;color:var(--bs-white)!important;background-color:var(--bs-primary)!important}@media (max-width: 768px){#calender[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px}}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]{min-height:50vh;display:flex;flex-direction:row;flex-wrap:wrap}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;margin-bottom:1em;margin-inline-end:1em;display:inline-block}#calender[_ngcontent-%COMP%]   .dates-data[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:red;margin-inline-start:1em;cursor:pointer;vertical-align:baseline}  #calender .notification-item .ant-row-bottom{align-items:center!important}@media (max-width: 575px){  #calender .notification-item .ant-card-body{padding:15px}}  #calender .ant-pagination-next .ant-pagination-item-link,   #calender .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #calender .ant-pagination-item a,   #calender .ant-pagination-item:focus-visible a,   #calender .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}"]}),e})()}];let At=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Tt)],u.Bz]}),e})();var Dt=r(978),Zt=r(5326);let yt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez,Zt.m,v.u5,v.UX,At,g.aw,Dt.P]]}),e})()},5181:(I,O,r)=>{r.d(O,{s:()=>z});var a=r(5e3),C=r(685),p=r(9808),t=r(6042),D=r(2643),x=r(2683),P=r(1062);function u(s,_){if(1&s&&(a.TgZ(0,"h5",3),a._uU(1),a.ALo(2,"translate"),a.qZA(),a.TgZ(3,"p",4),a._uU(4),a.ALo(5,"translate"),a.qZA()),2&s){const d=a.oxw();a.xp6(1),a.Oqu(a.lcZ(2,2,d.title)),a.xp6(3),a.Oqu(a.lcZ(5,4,d.text))}}function m(s,_){if(1&s){const d=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){return a.CHM(d),a.oxw(2).onButtonClicked()}),a._uU(1),a.ALo(2,"translate"),a.qZA()}if(2&s){const d=a.oxw(2);a.xp6(1),a.Oqu(a.lcZ(2,1,d.btnText))}}function M(s,_){if(1&s&&a.YNc(0,m,3,3,"button",5),2&s){const d=a.oxw();a.Q6J("ngIf",d.withBtn)}}let z=(()=>{class s{constructor(){this.title="",this.text="",this.icon="",this.btnText="",this.btnClicked=new a.vpe}ngOnInit(){}onButtonClicked(){this.btnClicked.emit()}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-empty-state"]],inputs:{title:"title",text:"text",icon:"icon",withBtn:"withBtn",btnText:"btnText"},outputs:{btnClicked:"btnClicked"},decls:5,vars:3,consts:[[1,"empty-wrapper","pt-5","pb-5",3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],[1,"title"],[1,"description"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"]],template:function(d,h){if(1&d&&(a.TgZ(0,"nz-empty",0),a.YNc(1,u,6,6,"ng-template",null,1,a.W1O),a.YNc(3,M,1,1,"ng-template",null,2,a.W1O),a.qZA()),2&d){const g=a.MAs(2),Z=a.MAs(4);a.Q6J("nzNotFoundImage",h.icon?h.icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg")("nzNotFoundContent",g)("nzNotFoundFooter",Z)}},directives:[C.p9,p.O5,t.ix,D.dQ,x.w],pipes:[P.X$],styles:[".title[_ngcontent-%COMP%]{font-weight:600;margin-top:1em;margin-bottom:1em;color:var(--bs-dark)}.description[_ngcontent-%COMP%]{width:50%;margin:auto;color:var(--bs-gray-600)}"]}),s})()}}]);