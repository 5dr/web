"use strict";(self.webpackChunkroomz_web_app=self.webpackChunkroomz_web_app||[]).push([[699],{7699:(W,z,r)=>{r.r(z),r.d(z,{BookingModule:()=>Vt});var l=r(9808),d=r(1062),B=r(5858),y=r(5326),f=r(727),n=r(5e3),m=r(3640),v=r(9113),C=r(6010),u=r(1894),w=r(6761),g=r(3075),p=r(6042),b=r(2683),_=r(2643);function Z(e,i){1&e&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"ReservationPage.RateTraveller")))}function D(e,i){1&e&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"ReservationPage.RateHost")))}function L(e,i){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,Z,3,3,"p",4),n.YNc(2,D,3,3,"p",4),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf","TRAVELLER"==t.userRole),n.xp6(1),n.Q6J("ngIf","HOST"==t.userRole)}}const c=function(){return{span:24}};function V(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"h4",8),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.communication=a}),n.qZA()()(),n.TgZ(7,"div",6)(8,"div",7)(9,"h4",8),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.TgZ(12,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.accuracy_of_listing=a}),n.qZA()()(),n.TgZ(13,"div",6)(14,"div",7)(15,"h4",8),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.cleanliness=a}),n.qZA()()(),n.TgZ(19,"div",6)(20,"div",7)(21,"h4",8),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.check_in_process=a}),n.qZA()()(),n.TgZ(25,"div",6)(26,"div",7)(27,"h4",8),n._uU(28),n.ALo(29,"translate"),n.qZA(),n.TgZ(30,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.value=a}),n.qZA()()(),n.TgZ(31,"div",6)(32,"div",7)(33,"h4",8),n._uU(34),n.ALo(35,"translate"),n.qZA(),n.TgZ(36,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueHost.overall_experience=a}),n.qZA()()()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzXs",n.DdM(48,c))("nzLg",n.DdM(49,c))("nzMd",n.DdM(50,c)),n.xp6(3),n.Oqu(n.lcZ(5,36,"ReservationPage.Communication")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.communication)("nzTooltips",t.tooltipsCommunicationHost),n.xp6(1),n.Q6J("nzXs",n.DdM(51,c))("nzLg",n.DdM(52,c))("nzMd",n.DdM(53,c)),n.xp6(3),n.Oqu(n.lcZ(11,38,"ReservationPage.Accuracy")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.accuracy_of_listing)("nzTooltips",t.tooltipsAccuracyHost),n.xp6(1),n.Q6J("nzXs",n.DdM(54,c))("nzLg",n.DdM(55,c))("nzMd",n.DdM(56,c)),n.xp6(3),n.Oqu(n.lcZ(17,40,"ReservationPage.Cleanliness")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.cleanliness)("nzTooltips",t.tooltipsCleanlinessHost),n.xp6(1),n.Q6J("nzXs",n.DdM(57,c))("nzLg",n.DdM(58,c))("nzMd",n.DdM(59,c)),n.xp6(3),n.Oqu(n.lcZ(23,42,"ReservationPage.CheckInProcess")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.check_in_process)("nzTooltips",t.tooltipsCheckInProcessHost),n.xp6(1),n.Q6J("nzXs",n.DdM(60,c))("nzLg",n.DdM(61,c))("nzMd",n.DdM(62,c)),n.xp6(3),n.Oqu(n.lcZ(29,44,"ReservationPage.Value")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.value)("nzTooltips",t.tooltipsValueStarHost),n.xp6(1),n.Q6J("nzXs",n.DdM(63,c))("nzLg",n.DdM(64,c))("nzMd",n.DdM(65,c)),n.xp6(3),n.Oqu(n.lcZ(35,46,"ReservationPage.OverallExperience")),n.xp6(2),n.Q6J("ngModel",t.rateValueHost.overall_experience)("nzTooltips",t.tooltipsOverallExperienceHost)}}function X(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"h4",8),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueTraveller.communication=a}),n.qZA()()(),n.TgZ(7,"div",6)(8,"div",7)(9,"h4",8),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.TgZ(12,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueTraveller.cleanliness=a}),n.qZA()()(),n.TgZ(13,"div",6)(14,"div",7)(15,"h4",8),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueTraveller.adherence_to_rules=a}),n.qZA()()(),n.TgZ(19,"div",6)(20,"div",7)(21,"h4",8),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueTraveller.check_out_process=a}),n.qZA()()(),n.TgZ(25,"div",6)(26,"div",7)(27,"h4",8),n._uU(28),n.ALo(29,"translate"),n.qZA(),n.TgZ(30,"nz-rate",9),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().rateValueTraveller.overall_experience=a}),n.qZA()()()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzXs",n.DdM(40,c))("nzLg",n.DdM(41,c))("nzMd",n.DdM(42,c)),n.xp6(3),n.Oqu(n.lcZ(5,30,"ReservationPage.Communication")),n.xp6(2),n.Q6J("ngModel",t.rateValueTraveller.communication)("nzTooltips",t.tooltipsCommunicationTraveller),n.xp6(1),n.Q6J("nzXs",n.DdM(43,c))("nzLg",n.DdM(44,c))("nzMd",n.DdM(45,c)),n.xp6(3),n.Oqu(n.lcZ(11,32,"ReservationPage.Cleanliness")),n.xp6(2),n.Q6J("ngModel",t.rateValueTraveller.cleanliness)("nzTooltips",t.tooltipsCleanlinessTraveller),n.xp6(1),n.Q6J("nzXs",n.DdM(46,c))("nzLg",n.DdM(47,c))("nzMd",n.DdM(48,c)),n.xp6(3),n.Oqu(n.lcZ(17,34,"ReservationPage.AdherenceRules")),n.xp6(2),n.Q6J("ngModel",t.rateValueTraveller.adherence_to_rules)("nzTooltips",t.tooltipsAdherenceRulesTraveller),n.xp6(1),n.Q6J("nzXs",n.DdM(49,c))("nzLg",n.DdM(50,c))("nzMd",n.DdM(51,c)),n.xp6(3),n.Oqu(n.lcZ(23,36,"ReservationPage.CheckOutProcess")),n.xp6(2),n.Q6J("ngModel",t.rateValueTraveller.check_out_process)("nzTooltips",t.tooltipsCheckOutProcessTraveller),n.xp6(1),n.Q6J("nzXs",n.DdM(52,c))("nzLg",n.DdM(53,c))("nzMd",n.DdM(54,c)),n.xp6(3),n.Oqu(n.lcZ(29,38,"ReservationPage.OverallExperience")),n.xp6(2),n.Q6J("ngModel",t.rateValueTraveller.overall_experience)("nzTooltips",t.tooltipsOverallExperienceTraveller)}}function G(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"button",10),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"translate"),n.qZA()(),n.TgZ(5,"button",11),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleOk()}),n._uU(6),n.ALo(7,"translate"),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,3,"ReservationPage.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.hij(" ",n.lcZ(7,5,"ReservationPage.ConfirmBtn")," ")}}let K=(()=>{class e{constructor(t,o,a,s){this.modalRef=t,this.bookingsService=o,this.commonService=a,this.translateService=s,this.loading=!1,this.tooltipsCommunicationHost=[],this.tooltipsAccuracyHost=[],this.tooltipsCleanlinessHost=[],this.tooltipsCheckInProcessHost=[],this.tooltipsValueStarHost=[],this.tooltipsOverallExperienceHost=[],this.tooltipsCommunicationTraveller=[],this.tooltipsCleanlinessTraveller=[],this.tooltipsOverallExperienceTraveller=[],this.tooltipsCheckOutProcessTraveller=[],this.tooltipsAdherenceRulesTraveller=[],this.rateValueTraveller={communication:0,cleanliness:0,overall_experience:0,check_out_process:0,adherence_to_rules:0},this.rateValueHost={communication:0,accuracy_of_listing:0,cleanliness:0,value:0,overall_experience:0,check_in_process:0},this.subscriptions=new f.w0}ngOnInit(){"HOST"==this.userRole?this.tooltipsHost():this.tooltipsTraveller()}tooltipsHost(){this.translateService.get(["ReservationPage.CommunicationStar","ReservationPage.AccuracyStar","ReservationPage.CleanlinessStar","ReservationPage.CheckInProcessStar","ReservationPage.ValueStar","ReservationPage.OverallExperienceStar"]).subscribe({next:t=>{this.tooltipsCommunicationHost=Object.values(t["ReservationPage.CommunicationStar"]),this.tooltipsAccuracyHost=Object.values(t["ReservationPage.AccuracyStar"]),this.tooltipsCleanlinessHost=Object.values(t["ReservationPage.CleanlinessStar"]),this.tooltipsCheckInProcessHost=Object.values(t["ReservationPage.CheckInProcessStar"]),this.tooltipsValueStarHost=Object.values(t["ReservationPage.ValueStar"]),this.tooltipsOverallExperienceHost=Object.values(t["ReservationPage.OverallExperienceStar"])}})}tooltipsTraveller(){this.translateService.get(["ReservationPage.CommunicationTravellerStar","ReservationPage.AdherenceStar","ReservationPage.CleanlinessTravellerStar","ReservationPage.CheckOutProcessStar","ReservationPage.OverallExperienceTravellerStar"]).subscribe({next:t=>{this.tooltipsCommunicationTraveller=Object.values(t["ReservationPage.CommunicationTravellerStar"]),this.tooltipsAdherenceRulesTraveller=Object.values(t["ReservationPage.AdherenceStar"]),this.tooltipsCleanlinessTraveller=Object.values(t["ReservationPage.CleanlinessTravellerStar"]),this.tooltipsCheckOutProcessTraveller=Object.values(t["ReservationPage.CheckOutProcessStar"]),this.tooltipsOverallExperienceTraveller=Object.values(t["ReservationPage.OverallExperienceTravellerStar"])}})}handleOk(){this.subscriptions.add(this.bookingsService.addUserRate("HOST"===this.userRole?this.rateValueHost:this.rateValueTraveller,this.userId).subscribe({next:t=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({sent:!0})},error:t=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.message)}}))}handleCancel(){this.modalRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(m.Lf),n.Y36(v.F),n.Y36(C.v),n.Y36(d.sK))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-traveller-host-review"]],inputs:{userId:"userId",userRole:"userRole"},decls:5,vars:2,consts:[[4,"nzModalTitle"],["id","traveller-host-review-modal"],["nz-row","","nzJustify","space-between",4,"ngIf"],[4,"nzModalFooter"],[4,"ngIf"],["nz-row","","nzJustify","space-between"],["nz-col","",1,"mb-3",3,"nzXs","nzLg","nzMd"],[1,"d-flex","align-items-center","justify-content-between","px-2"],[1,"title-rate"],[3,"ngModel","nzTooltips","ngModelChange"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,o){1&t&&(n.YNc(0,L,3,2,"div",0),n.TgZ(1,"section",1),n.YNc(2,V,37,66,"div",2),n.YNc(3,X,31,55,"div",2),n.YNc(4,G,8,7,"div",3),n.qZA()),2&t&&(n.xp6(2),n.Q6J("ngIf","HOST"==o.userRole),n.xp6(1),n.Q6J("ngIf","TRAVELLER"==o.userRole))},directives:[m.h1,l.O5,u.SK,u.t3,w.sn,g.JJ,g.On,m.Uh,p.ix,b.w,_.dQ],pipes:[d.X$],styles:["#traveller-host-review-modal[_ngcontent-%COMP%]   .title-rate[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--bs-dark);margin-bottom:0}#traveller-host-review-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:10em!important}"]}),e})();var A=r(3087),h=r(4546),M=r(1047);function $(e,i){1&e&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.ALo(3,"translate"),n._UZ(4,"br"),n._uU(5),n.ALo(6,"translate"),n.qZA()()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,2,"CreateListing.FlexiblePointOne")," "),n.xp6(3),n.hij(" ",n.lcZ(6,4,"CreateListing.FlexiblePointTwo")," "))}function nn(e,i){1&e&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.ALo(3,"translate"),n._UZ(4,"br"),n._uU(5),n.ALo(6,"translate"),n.qZA()()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,2,"CreateListing.ModeratePointOne")," "),n.xp6(3),n.hij(" ",n.lcZ(6,4,"CreateListing.ModeratePointTwo")," "))}function tn(e,i){1&e&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.ALo(3,"translate"),n._UZ(4,"br"),n._uU(5),n.ALo(6,"translate"),n.qZA()()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,2,"CreateListing.StrictPointOne")," "),n.xp6(3),n.hij(" ",n.lcZ(6,4,"CreateListing.StrictPointTwo")," "))}function en(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"button",8),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"translate"),n.qZA()(),n.TgZ(5,"button",9),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleOk()}),n._uU(6),n.ALo(7,"translate"),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,3,"ReservationPage.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.hij(" ",n.lcZ(7,5,"ReservationPage.ConfirmBtn")," ")}}let on=(()=>{class e{constructor(t,o,a,s){this.bookingsService=t,this.commonService=o,this.translateService=a,this.modalRef=s,this.reason="",this.loading=!1,this.subscriptions=new f.w0}ngOnInit(){}handleCancel(){this.modalRef.close()}handleOk(){this.reason.length&&(this.loading=!0,this.subscriptions.add(this.bookingsService.cancelBooking(this.bookingId,{cancel_reason:this.reason}).subscribe({next:t=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({canceled:!0})},error:t=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.message)}})))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(v.F),n.Y36(C.v),n.Y36(d.sK),n.Y36(m.Lf))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cancel-booking"]],inputs:{bookingId:"bookingId",cancellationPolicy:"cancellationPolicy"},decls:15,vars:8,consts:[[1,"control-wrapper"],[1,"alert-reason","d-flex","justify-content-between"],["nz-icon","","nzType","exclamation-circle","nzTheme","fill"],[4,"ngIf"],[1,"title"],[3,"nzMaxCharacterCount"],["rows","5","nz-input","",3,"ngModel","ngModelChange"],[4,"nzModalFooter"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,o){1&t&&(n.TgZ(0,"div")(1,"div",0)(2,"div",1),n._UZ(3,"span",2),n.YNc(4,$,7,6,"div",3),n.YNc(5,nn,7,6,"div",3),n.YNc(6,tn,7,6,"div",3),n.qZA(),n.TgZ(7,"p",4),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"nz-form-item")(11,"nz-form-control")(12,"nz-textarea-count",5)(13,"textarea",6),n.NdJ("ngModelChange",function(s){return o.reason=s}),n.qZA()()()()(),n.YNc(14,en,8,7,"div",7),n.qZA()),2&t&&(n.xp6(4),n.Q6J("ngIf","1"==o.cancellationPolicy),n.xp6(1),n.Q6J("ngIf","2"==o.cancellationPolicy),n.xp6(1),n.Q6J("ngIf","3"==o.cancellationPolicy),n.xp6(2),n.hij(" ",n.lcZ(9,6,"ReservationPage.CancellationReason")," "),n.xp6(4),n.Q6J("nzMaxCharacterCount",500),n.xp6(1),n.Q6J("ngModel",o.reason))},directives:[b.w,A.Ls,l.O5,u.SK,h.Nx,u.t3,h.Fd,M.w,M.Zp,g.Fj,g.JJ,g.On,m.Uh,p.ix,_.dQ],pipes:[d.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none;width:100%}.control-wrapper[_ngcontent-%COMP%]{text-align:start}.alert-reason[_ngcontent-%COMP%]{background-color:#fff3cd;padding:1rem;margin-bottom:20px}.alert-reason[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-inline-start:15px;font-size:13px;color:#856404}.alert-reason[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{line-height:23px;font-size:20px;color:#856404}"]}),e})();var R=r(5439),an=r(3900);function ln(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"button",11),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"button",12),n.NdJ("click",function(){return n.CHM(t),n.oxw().onAddReview()}),n._uU(5),n.ALo(6,"translate"),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,3,"General.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.Oqu(n.lcZ(6,5,"General.Send"))}}const x=function(){return{span:24}};let sn=(()=>{class e{constructor(t,o,a,s,k){this.fB=t,this.bookingsService=o,this.modalRef=a,this.commonService=s,this.translateService=k,this.tooltips=[this.translateService.instant("PlaceDetails.Terrible"),this.translateService.instant("PlaceDetails.Bad"),this.translateService.instant("PlaceDetails.Normal"),this.translateService.instant("PlaceDetails.Good"),this.translateService.instant("PlaceDetails.Wonderful")],this.rateValue={rate1:0,rate2:0,rate3:0},this.loading=!1,this.subscriptions=new f.w0}ngOnInit(){this.initFeedBackForm()}initFeedBackForm(){this.formFeedBack=this.fB.group({feedback:[null,[g.kI.maxLength(100)]]})}handleCancel(){this.modalRef.close({})}submitRate(){this.loading=!0,this.subscriptions.add(this.bookingsService.addRate({rate:.33*(this.rateValue.rate1+this.rateValue.rate2+this.rateValue.rate3)},this.bookingId).subscribe({next:o=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==o?void 0:o.message),this.modalRef.close({sent:!0})},error:o=>{var a;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)}}))}addFeedBack(){this.formFeedBack.valid&&this.subscriptions.add(this.bookingsService.addFeedBack(this.formFeedBack.value,4).subscribe({next:t=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({sent:!0})},error:t=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.message)}}))}onAddReview(){this.loading=!0,this.subscriptions.add(this.bookingsService.addRate({rate:(.33*(this.rateValue.rate1+this.rateValue.rate2+this.rateValue.rate3)).toFixed(2)},this.bookingId).pipe((0,an.w)(()=>this.bookingsService.addFeedBack(this.bookingId,this.formFeedBack.value))).subscribe({next:o=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==o?void 0:o.message),console.log(o),this.modalRef.close({sent:!0})},error:o=>{var a;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.qu),n.Y36(v.F),n.Y36(m.Lf),n.Y36(C.v),n.Y36(d.sK))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-leave-review"]],inputs:{bookingId:"bookingId"},decls:31,vars:41,consts:[["nz-row","","nzJustify","space-between",1,"review-modal"],["nz-col","",1,"mb-3",3,"nzXs","nzLg","nzMd"],[1,"d-flex","align-items-center","justify-content-between","px-2"],[1,"title-rate"],[3,"ngModel","nzTooltips","ngModelChange"],["nz-form","","nzLayout","vertical",1,"p-2",3,"formGroup"],[1,"title-rate","mb-3"],[1,"small","text-black-50"],[3,"nzMaxCharacterCount"],["rows","4","formControlName","feedback","nz-input",""],[4,"nzModalFooter"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,o){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h4",3),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"nz-rate",4),n.NdJ("ngModelChange",function(s){return o.rateValue.rate1=s}),n.qZA()()(),n.TgZ(7,"div",1)(8,"div",2)(9,"h4",3),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.TgZ(12,"nz-rate",4),n.NdJ("ngModelChange",function(s){return o.rateValue.rate2=s}),n.qZA()()(),n.TgZ(13,"div",1)(14,"div",2)(15,"h4",3),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"nz-rate",4),n.NdJ("ngModelChange",function(s){return o.rateValue.rate3=s}),n.qZA()()(),n.TgZ(19,"form",5)(20,"h4",6),n._uU(21),n.ALo(22,"translate"),n.TgZ(23,"span",7),n._uU(24),n.ALo(25,"translate"),n.qZA()(),n.TgZ(26,"nz-form-item")(27,"nz-form-control")(28,"nz-textarea-count",8),n._UZ(29,"textarea",9),n.qZA()()()(),n.YNc(30,ln,7,7,"div",10),n.qZA()),2&t&&(n.xp6(1),n.Q6J("nzXs",n.DdM(32,x))("nzLg",n.DdM(33,x))("nzMd",n.DdM(34,x)),n.xp6(3),n.Oqu(n.lcZ(5,22,"PlaceDetails.Cleanness")),n.xp6(2),n.Q6J("ngModel",o.rateValue.rate1)("nzTooltips",o.tooltips),n.xp6(1),n.Q6J("nzXs",n.DdM(35,x))("nzLg",n.DdM(36,x))("nzMd",n.DdM(37,x)),n.xp6(3),n.Oqu(n.lcZ(11,24,"PlaceDetails.Accuracy")),n.xp6(2),n.Q6J("ngModel",o.rateValue.rate2)("nzTooltips",o.tooltips),n.xp6(1),n.Q6J("nzXs",n.DdM(38,x))("nzLg",n.DdM(39,x))("nzMd",n.DdM(40,x)),n.xp6(3),n.Oqu(n.lcZ(17,26,"PlaceDetails.Host")),n.xp6(2),n.Q6J("ngModel",o.rateValue.rate3)("nzTooltips",o.tooltips),n.xp6(1),n.Q6J("formGroup",o.formFeedBack),n.xp6(2),n.Oqu(n.lcZ(22,28,"PlaceDetails.LeaveComment")),n.xp6(3),n.Oqu(n.lcZ(25,30,"PlaceDetails.Optional")),n.xp6(4),n.Q6J("nzMaxCharacterCount",100))},directives:[u.SK,u.t3,w.sn,g.JJ,g.On,g._Y,g.JL,h.Lr,g.sg,h.Nx,h.Fd,M.w,g.Fj,M.Zp,g.u,m.Uh,p.ix,_.dQ,b.w],pipes:[d.X$],styles:[".review-modal[_ngcontent-%COMP%]   .title-rate[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--bs-dark);margin-bottom:0}form[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{resize:none;height:10em!important}  .review-modal .ant-modal-title{font-weight:600;font-size:18px}"]}),e})();var J=r(2340);function rn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"button",7),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"button",8),n.NdJ("click",function(){return n.CHM(t),n.oxw().onAddReason()}),n._uU(5),n.ALo(6,"translate"),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,3,"General.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.Oqu(n.lcZ(6,5,"General.Send"))}}const S=function(){return{span:24}};let cn=(()=>{class e{constructor(t,o,a,s,k){this.fB=t,this.bookingsService=o,this.modalRef=a,this.commonService=s,this.translateService=k,this.loading=!1,this.subscriptions=new f.w0,this.reason=""}ngOnInit(){this.initReasonForm()}initReasonForm(){this.formReason=this.fB.group({reason:[null,[g.kI.maxLength(200)]]})}handleCancel(){this.modalRef.close(!1)}onAddReason(){this.reason.length&&(this.loading=!0,this.subscriptions.add(this.bookingsService.rejectBooking({status:9,reason:this.reason}).subscribe({next:t=>{this.loading=!1,this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),null==t?void 0:t.message),this.modalRef.close({rejected:!0})},error:t=>{var o;this.loading=!1,this.commonService.showErrorAlert(this.translateService.instant("General.Error"),null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.message)}})))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.qu),n.Y36(v.F),n.Y36(m.Lf),n.Y36(C.v),n.Y36(d.sK))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-reason-refuse-booking"]],inputs:{bookingId:"bookingId"},decls:11,vars:12,consts:[["nz-row","","nzJustify","space-between",1,"reason-modal"],["nz-col","",1,"mb-3",3,"nzXs","nzLg","nzMd"],["nz-form","","nzLayout","vertical",1,"p-2",3,"formGroup"],[1,"title-rate","mb-3"],[3,"nzMaxCharacterCount"],["rows","4","nz-input","",3,"ngModel","ngModelChange"],[4,"nzModalFooter"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,o){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"form",2)(3,"h4",3),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"nz-form-item")(7,"nz-form-control")(8,"nz-textarea-count",4)(9,"textarea",5),n.NdJ("ngModelChange",function(s){return o.reason=s}),n.qZA()()()()(),n.YNc(10,rn,7,7,"div",6),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("nzXs",n.DdM(9,S))("nzLg",n.DdM(10,S))("nzMd",n.DdM(11,S)),n.xp6(1),n.Q6J("formGroup",o.formReason),n.xp6(2),n.hij("",n.lcZ(5,7,"ReservationPage.Reason"),"?"),n.xp6(4),n.Q6J("nzMaxCharacterCount",100),n.xp6(1),n.Q6J("ngModel",o.reason))},directives:[u.SK,u.t3,g._Y,g.JL,h.Lr,g.sg,h.Nx,h.Fd,M.w,M.Zp,g.Fj,g.JJ,g.On,m.Uh,p.ix,_.dQ,b.w],pipes:[d.X$],styles:[".reason-modal[_ngcontent-%COMP%]   .title-rate[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--bs-dark);margin-bottom:0}.reason-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.reason-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:10em!important}  .reason-modal .ant-modal-title{font-weight:600;font-size:18px}"]}),e})();var T=r(4239),Q=r(9592),gn=r(1515),I=r(7484),Y=r(4973),H=r(9590);function pn(e,i){1&e&&(n.TgZ(0,"span",39),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.booked")," "))}function _n(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.paymentPending")," "))}function dn(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.checkedIn")," "))}function un(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.checkedOut")," "))}function mn(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.successFull")," "))}function bn(e,i){1&e&&(n.TgZ(0,"span",41),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.cancelled")," "))}function kn(e,i){1&e&&(n.TgZ(0,"span",41),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.notBooked")," "))}function hn(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.pending")," "))}function vn(e,i){1&e&&(n.TgZ(0,"span",41),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.rejected")," "))}function Cn(e,i){1&e&&(n.TgZ(0,"span",40),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.pendingReview")," "))}function xn(e,i){1&e&&(n.TgZ(0,"span",39),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.finished")," "))}function fn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.ALo(3,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.HOy(" ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.base_price," ",n.lcZ(2,4,"Payment.SAR")," x ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days," ",n.lcZ(3,6,"PlaceDetails.Night")," ")}}function Mn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.ALo(3,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.HOy(" ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.weekend_offer," ",n.lcZ(2,4,"Payment.SAR")," x ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days," ",n.lcZ(3,6,"PlaceDetails.Night")," ")}}function Tn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days," ",n.lcZ(2,2,"CreateListing.SpecialNight")," ")}}function Zn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",n.lcZ(2,2,"PlaceDetails.ServiceFees")," ",t.serviceFees," % ")}}function Dn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",n.lcZ(2,2,"PlaceDetails.Vat")," ",t.vat," % ")}}function On(e,i){1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"PlaceDetails.Insurance")," "))}function Pn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.normal_days_price," ",n.lcZ(2,2,"Payment.SAR")," ")}}function zn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.weekend_days_price," ",n.lcZ(2,2,"Payment.SAR")," ")}}function wn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.special_days_price," ",n.lcZ(2,2,"Payment.SAR")," ")}}function An(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails?null:t.priceDetails.total_service_fee," ",n.lcZ(2,2,"Payment.SAR")," ")}}function Bn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails?null:t.priceDetails.total_vat," ",n.lcZ(2,2,"Payment.SAR")," ")}}function yn(e,i){if(1&e&&(n.TgZ(0,"li",47),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e){const t=n.oxw(3);n.xp6(1),n.AsE(" ",null==t.priceDetails?null:t.priceDetails.insurance_price," ",n.lcZ(2,2,"Payment.SAR")," ")}}function Ln(e,i){if(1&e&&(n.TgZ(0,"div",42)(1,"h3"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",43)(5,"ul",44),n.YNc(6,fn,4,8,"li",45),n.YNc(7,Mn,4,8,"li",45),n.YNc(8,Tn,3,4,"li",45),n.YNc(9,Zn,3,4,"li",45),n.YNc(10,Dn,3,4,"li",45),n.YNc(11,On,3,3,"li",45),n.qZA(),n.TgZ(12,"ul",46),n.YNc(13,Pn,3,4,"li",45),n.YNc(14,zn,3,4,"li",45),n.YNc(15,wn,3,4,"li",45),n.YNc(16,An,3,4,"li",45),n.YNc(17,Bn,3,4,"li",45),n.YNc(18,yn,3,4,"li",45),n.qZA()()()),2&e){const t=n.oxw(2);n.xp6(2),n.Oqu(n.lcZ(3,13,"PlaceDetails.PriceDetails")),n.xp6(4),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days)>0),n.xp6(1),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days)>0),n.xp6(1),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days)>0),n.xp6(1),n.Q6J("ngIf",t.serviceFees&&(null==t.priceDetails?null:t.priceDetails.total_service_fee)>0),n.xp6(1),n.Q6J("ngIf",t.vat&&(null==t.priceDetails?null:t.priceDetails.total_vat)>0),n.xp6(1),n.Q6J("ngIf",null==t.priceDetails?null:t.priceDetails.insurance_price),n.xp6(2),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.normal_days?null:t.priceDetails.normal_days.no_normal_days)>0),n.xp6(1),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.weekend_days?null:t.priceDetails.weekend_days.no_weekend_days)>0),n.xp6(1),n.Q6J("ngIf",(null==t.priceDetails||null==t.priceDetails.special_days?null:t.priceDetails.special_days.no_special_days)>0),n.xp6(1),n.Q6J("ngIf",t.serviceFees&&(null==t.priceDetails?null:t.priceDetails.total_service_fee)>0),n.xp6(1),n.Q6J("ngIf",t.vat&&(null==t.priceDetails?null:t.priceDetails.total_vat)>0),n.xp6(1),n.Q6J("ngIf",null==t.priceDetails?null:t.priceDetails.insurance_price)}}function Rn(e,i){if(1&e&&(n.TgZ(0,"div",48),n._UZ(1,"img",49),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Q6J("src",null==t?null:t.image_url,n.LSH)}}function Jn(e,i){1&e&&(n.TgZ(0,"span"),n._uU(1,"..."),n.qZA())}function Sn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).cancelBooking()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.CancelBooking")," "))}function In(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onLeaveReview()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.LeaveReview")," "))}function Un(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",51),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onRate("TRAVELLER")}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.RateTraveller")," "))}function qn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",51),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onRate("HOST")}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.RateHost")," "))}function Nn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",52),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onAcceptBooking()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.Accept")," "))}function Qn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",53),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onRejectBooking()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"ReservationPage.Reject")," "))}function Yn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",51),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2);return a.onChatClicked(null==a.bookingData?null:a.bookingData.id)}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&e){const t=n.oxw(2);n.xp6(1),n.hij(" ",n.lcZ(2,1,"HOST"===t.userRole?"ReservationPage.ChatWithTraveller":"ReservationPage.ChatWithHost")," ")}}const U=function(){return{span:24}},Hn=function(){return{span:20}},F=function(){return{span:16}},E=function(){return{span:8}},Fn=function(){return["pending","booked"]};function En(e,i){if(1&e&&(n.TgZ(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),n._UZ(6,"i",8),n.qZA(),n.TgZ(7,"div",9)(8,"span",10),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.YNc(11,pn,3,3,"span",11),n.YNc(12,_n,3,3,"span",12),n.YNc(13,dn,3,3,"span",12),n.YNc(14,un,3,3,"span",12),n.YNc(15,mn,3,3,"span",12),n.YNc(16,bn,3,3,"span",13),n.YNc(17,kn,3,3,"span",13),n.YNc(18,hn,3,3,"span",12),n.YNc(19,vn,3,3,"span",13),n.YNc(20,Cn,3,3,"span",12),n.YNc(21,xn,3,3,"span",11),n.qZA()(),n.TgZ(22,"nz-card"),n.YNc(23,Ln,19,15,"div",14),n._UZ(24,"hr"),n.TgZ(25,"div",15)(26,"h3",16),n._uU(27),n.ALo(28,"translate"),n.qZA(),n.TgZ(29,"h3",16),n._uU(30),n.ALo(31,"translate"),n.qZA()()(),n.TgZ(32,"nz-card")(33,"div",17)(34,"h3"),n._uU(35),n.ALo(36,"translate"),n.qZA(),n.TgZ(37,"p",18),n._uU(38),n.ALo(39,"translate"),n.qZA(),n.TgZ(40,"h5",19),n._uU(41),n.qZA(),n.TgZ(42,"p",20),n._uU(43),n.qZA()(),n._UZ(44,"hr"),n.TgZ(45,"div",21)(46,"div",22)(47,"span"),n._uU(48),n.ALo(49,"translate"),n.qZA(),n.TgZ(50,"p"),n._uU(51),n.ALo(52,"date"),n.qZA()(),n.TgZ(53,"div",23)(54,"span"),n._uU(55),n.ALo(56,"translate"),n.qZA()(),n.TgZ(57,"div",24)(58,"span"),n._uU(59),n.ALo(60,"translate"),n.qZA(),n.TgZ(61,"p"),n._uU(62),n.ALo(63,"date"),n.qZA()()()(),n.TgZ(64,"div",25)(65,"p",26),n._uU(66),n.ALo(67,"translate"),n.TgZ(68,"span",27),n._uU(69),n.qZA()(),n.TgZ(70,"p",26),n._uU(71),n.ALo(72,"translate"),n.TgZ(73,"span",27),n._uU(74),n.qZA()()()(),n.TgZ(75,"div",5)(76,"div",28)(77,"div",29)(78,"nz-carousel",30),n.YNc(79,Rn,2,1,"div",31),n.qZA()(),n.TgZ(80,"h5"),n._uU(81),n.qZA(),n.TgZ(82,"p"),n._uU(83),n.ALo(84,"slice"),n.YNc(85,Jn,2,0,"span",32),n.qZA()(),n.TgZ(86,"div",33),n.YNc(87,Sn,3,3,"button",34),n.YNc(88,In,3,3,"button",34),n.YNc(89,Un,3,3,"button",35),n.YNc(90,qn,3,3,"button",35),n.YNc(91,Nn,3,3,"button",36),n.YNc(92,Qn,3,3,"button",37),n.YNc(93,Yn,3,3,"button",38),n.qZA()()()()()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzXs",n.DdM(84,U))("nzLg",n.DdM(85,Hn)),n.xp6(2),n.Q6J("nzXs",n.DdM(86,U))("nzLg",n.DdM(87,F))("nzLg",n.DdM(88,F)),n.xp6(6),n.lnq("",n.lcZ(10,54,"PlaceDetails.Hello")," ",null==t.userData?null:t.userData.first_name," ",null==t.userData?null:t.userData.last_name,""),n.xp6(2),n.Q6J("ngIf",1===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",2===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",3===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",4===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",5===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",6===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",7===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",8===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",9===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",10===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",11===(null==t.bookingData?null:t.bookingData.status)),n.xp6(2),n.Q6J("ngIf",t.priceDetails),n.xp6(4),n.Oqu(n.lcZ(28,56,"PlaceDetails.TotalPrice")),n.xp6(3),n.AsE("",null==t.priceDetails?null:t.priceDetails.total_price," ",n.lcZ(31,58,"Payment.SAR"),""),n.xp6(5),n.Oqu(n.lcZ(36,60,"PlaceDetails.BookingDetails")),n.xp6(3),n.AsE(" ",n.lcZ(39,62,"General.ID")," : ",null==t.bookingData?null:t.bookingData.id,""),n.xp6(3),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(2),n.Oqu(null==t.bookingData?null:t.bookingData.location),n.xp6(5),n.Oqu(n.lcZ(49,64,"PlaceDetails.CheckIn")),n.xp6(3),n.Oqu(n.xi3(52,66,null==t.bookingData?null:t.bookingData.booked_from,"medium")),n.xp6(4),n.AsE(" ",null==t.bookingData?null:t.bookingData.no_of_nights," ",n.lcZ(56,69,"PlaceDetails.Night")," "),n.xp6(4),n.Oqu(n.lcZ(60,71,"PlaceDetails.CheckOut")),n.xp6(3),n.Oqu(n.xi3(63,73,null==t.bookingData?null:t.bookingData.booked_to,"medium")),n.xp6(4),n.hij(" ",n.lcZ(67,76,"PlaceDetails.HostedBy")," : "),n.xp6(3),n.AsE("",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.first_name," ",null==t.bookingData||null==t.bookingData.host?null:t.bookingData.host.last_name,""),n.xp6(2),n.hij(" ",n.lcZ(72,78,"PlaceDetails.Traveller")," : "),n.xp6(3),n.AsE(" ",null==t.bookingData||null==t.bookingData.traveller?null:t.bookingData.traveller.first_name," ",null==t.bookingData||null==t.bookingData.traveller?null:t.bookingData.traveller.last_name,""),n.xp6(1),n.Q6J("nzXs",n.DdM(89,U))("nzLg",n.DdM(90,E))("nzLg",n.DdM(91,E)),n.xp6(4),n.Q6J("ngForOf",null==t.bookingData?null:t.bookingData.images),n.xp6(2),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(2),n.hij(" ",n.Dn7(84,80,null==t.bookingData?null:t.bookingData.description,0,200)," "),n.xp6(2),n.Q6J("ngIf",(null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.length)>200),n.xp6(2),n.Q6J("ngIf",n.DdM(92,Fn).includes(t.bookingStatus)&&t.isComingBooking&&"TRAVELLER"===t.userRole),n.xp6(1),n.Q6J("ngIf","pendingReview"===t.bookingStatus),n.xp6(1),n.Q6J("ngIf","pendingReview"===t.bookingStatus&&"HOST"===t.userRole),n.xp6(1),n.Q6J("ngIf","pendingReview"===t.bookingStatus&&"TRAVELLER"===t.userRole),n.xp6(1),n.Q6J("ngIf","pending"===t.bookingStatus&&"HOST"===t.userRole),n.xp6(1),n.Q6J("ngIf","pending"===t.bookingStatus&&"HOST"===t.userRole),n.xp6(1),n.Q6J("ngIf","booked"===t.bookingStatus&&(t.isComingBooking||t.isOngoingBooking))}}function jn(e,i){1&e&&n._UZ(0,"span",57)}function Wn(e,i){if(1&e&&(n.TgZ(0,"div",54),n.YNc(1,jn,1,0,"ng-template",null,55,n.W1O),n._UZ(3,"nz-spin",56),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}let Vn=(()=>{class e{constructor(t,o,a,s,k,q,N,Xt){this.bookingsService=t,this.commonService=o,this.route=a,this.cookieService=s,this.propertyBookingService=k,this.modal=q,this.translateService=N,this.router=Xt,this.userRole=J.N.userRole,this.isOngoingBooking=!1,this.isComingBooking=!1,this.subscriptions=new f.w0,this.getBookingId()}ngOnInit(){this.getUserData(),this.fetchVatDetails(),this.getUserRole()}getBookingId(){this.route.paramMap.subscribe(t=>{var o,a;(null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.id)&&(this.bookingId=null===(a=null==t?void 0:t.params)||void 0===a?void 0:a.id,this.fetchBookingData())})}getUserData(){this.cookieService.get("userData")&&(this.userData=JSON.parse(this.cookieService.get("userData")))}getUserRole(){this.commonService.userRole.subscribe(t=>{this.userRole=t})}fetchVatDetails(){this.loading=!0,this.subscriptions.add(this.propertyBookingService.fetchVatDetails().subscribe(t=>{var o,a;(null==t?void 0:t.successful)&&(this.serviceFees=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.service_fee,this.vat=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.vat),this.loading=!1}))}fetchBookingData(){this.loading=!0;const t="HOST"===this.userRole?this.bookingsService.getHostBookingDetails(this.bookingId):this.bookingsService.getBookingDetails(this.bookingId);this.subscriptions.add(t.subscribe(o=>{var a,s;this.bookingData=null===(a=null==o?void 0:o.data)||void 0===a?void 0:a.booking,this.priceDetails=null===(s=null==o?void 0:o.data)||void 0===s?void 0:s.priceDetails,this.handleBookingStatus(),this.handleOngoingComingStatus(),console.log(this.bookingData),this.loading=!1}))}handleOngoingComingStatus(){let t=R(this.bookingData.booked_from),o=R(this.bookingData.booked_to),a=R(new Date);t.isAfter(a)&&o.isAfter(a)?this.isComingBooking=!0:t.isBefore(a)&&o.isAfter(a)&&(this.isOngoingBooking=!0)}handleBookingStatus(){switch(this.bookingData.status){case 1:this.bookingStatus="booked";break;case 2:this.bookingStatus="paymentPending";break;case 3:this.bookingStatus="checkedIn";break;case 4:this.bookingStatus="checkedOut";break;case 5:this.bookingStatus="successFull";break;case 6:this.bookingStatus="cancelled";break;case 7:this.bookingStatus="notBooked";break;case 8:this.bookingStatus="pending";break;case 9:this.bookingStatus="rejected";break;case 10:this.bookingStatus="pendingReview";break;case 11:this.bookingStatus="finished"}}onLeaveReview(){this.modal.create({nzTitle:this.translateService.instant("ReservationPage.LeaveReview"),nzContent:sn,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1,nzComponentParams:{bookingId:this.bookingData.property_id}})}cancelBooking(){this.modal.create({nzTitle:this.translateService.instant("ReservationPage.CancelBooking"),nzContent:on,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1,nzComponentParams:{bookingId:this.bookingData.id,cancellationPolicy:this.bookingData.cancellation_policy}}).afterClose.subscribe(o=>{(null==o?void 0:o.canceled)&&this.fetchBookingData()})}onChatClicked(t){this.router.navigateByUrl(`/chat/${t}`)}calculateTotal(){var t,o;let a=0;return a=this.bookingData.base_price*this.bookingData.no_of_nights,this.serviceFees&&(a+=(null===(t=this.bookingData)||void 0===t?void 0:t.base_price)*(this.serviceFees/100)),this.vat&&(a+=(null===(o=this.bookingData)||void 0===o?void 0:o.base_price)*(this.vat/100)),this.bookingData.insurance&&(a+=this.bookingData.insurance),a.toFixed(2)}onAcceptBooking(){this.subscriptions.add(this.bookingsService.acceptBooking(this.bookingId).subscribe({next:t=>{this.commonService.showSuccessAlert(this.translateService.instant("General.Success"),t.message),this.fetchBookingData()},error:t=>{this.commonService.showErrorAlert(this.translateService.instant("General.Success"),t.message)}}))}onRejectBooking(){this.modal.create({nzTitle:this.translateService.instant("ReservationPage.ReasonRefuse"),nzContent:cn,nzClosable:!0,nzCancelDisabled:!0,nzKeyboard:!0,nzMaskClosable:!1,nzOkDisabled:!1,nzComponentParams:{bookingId:this.bookingData.id}}).afterClose.subscribe(o=>{(null==o?void 0:o.rejected)&&this.fetchBookingData()})}onRate(t){var o,a;this.reviewIdUser="TRAVELLER"==t?null===(o=this.bookingData)||void 0===o?void 0:o.traveller.id:null===(a=this.bookingData)||void 0===a?void 0:a.host.id,this.modal.create({nzContent:K,nzClosable:!0,nzComponentParams:{userRole:t,userId:this.reviewIdUser}})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(v.F),n.Y36(C.v),n.Y36(T.gz),n.Y36(Q.N_),n.Y36(gn.v),n.Y36(m.Sf),n.Y36(d.sK),n.Y36(T.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-booking-details"]],decls:2,vars:2,consts:[["nz-row","","id","booking-details",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],["nz-row","","id","booking-details"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],["nz-row","",1,"layout"],["nz-col","",3,"nzXs","nzLg"],[1,"isConfirm","d-flex","justify-content-start","align-items-center","mb-3"],[1,"like-confirm"],["nz-icon","","nzType","like","nzTheme","fill"],[1,"desc","d-flex","justify-content-between","align-items-center","w-100"],[1,"one"],["class","status sucsses",4,"ngIf"],["class","status",4,"ngIf"],["class","status red",4,"ngIf"],["class","price-detail",4,"ngIf"],[1,"total","d-flex","justify-content-between","align-items-center"],[1,"my-0"],[1,"booking-details"],[1,"address","fs-6"],[1,"name-booking"],[1,"address"],[1,"time-booking","d-flex","justify-content-between","align-items-center"],[1,"chech-in"],[1,"nights"],[1,"chech-out"],[1,"more-details"],[1,"info"],[1,"details-info"],[1,"img-booking"],[1,"carousel-wrapper"],["nzAutoPlay","true","nzEffect","scrollx","nzAutoPlaySpeed","4000"],["nz-carousel-content","",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btns-wrapper"],["nz-button","","class","cancel-btn",3,"click",4,"ngIf"],["class","chat-btn","nz-button","",3,"click",4,"ngIf"],["nz-button","","class","accept-btn",3,"click",4,"ngIf"],["nz-button","","class","reject-btn",3,"click",4,"ngIf"],["nz-button","","class","chat-btn",3,"click",4,"ngIf"],[1,"status","sucsses"],[1,"status"],[1,"status","red"],[1,"price-detail"],[1,"d-flex","justify-content-between","align-items-center"],[1,"list-price","first-list","list-unstyled"],["class","item",4,"ngIf"],[1,"list-price","second-list","list-unstyled"],[1,"item"],["nz-carousel-content",""],["alt","",1,"carousel-img",3,"src"],["nz-button","",1,"cancel-btn",3,"click"],["nz-button","",1,"chat-btn",3,"click"],["nz-button","",1,"accept-btn",3,"click"],["nz-button","",1,"reject-btn",3,"click"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"]],template:function(t,o){1&t&&(n.YNc(0,En,94,93,"section",0),n.YNc(1,Wn,4,1,"div",1)),2&t&&(n.Q6J("ngIf",!o.loading),n.xp6(1),n.Q6J("ngIf",o.loading))},directives:[l.O5,u.SK,u.t3,b.w,A.Ls,I.bd,Y.QZ,l.sg,Y.pA,p.ix,_.dQ,H.W],pipes:[d.X$,l.uU,l.OU],styles:['#booking-details[_ngcontent-%COMP%]{padding:30px 24px 20px;margin-bottom:2em}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]{width:80%}@media (max-width: 768px){#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]{width:100%}}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);padding:3px 5px;border-radius:5px;font-size:12px;height:25px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .status.red[_ngcontent-%COMP%]{background-color:#ff3b30}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .status.sucsses[_ngcontent-%COMP%]{background-color:var(--font-success)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .like-confirm[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50px;background-color:#06c800;margin-inline-end:12px;display:flex;justify-content:center;align-items:center}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .like-confirm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-white)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:var(--bs-dark);display:block}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .isConfirm[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-gray-600);display:block}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px;color:var(--bs-dark);margin-block-end:3px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-size:12px;line-height:15px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;font-size:24px;color:var(--bs-primary)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:22px;margin-block-end:15px;text-align:start;color:var(--bs-dark)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.first-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{text-decoration:underline}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.second-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{text-align:end;font-weight:600}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .price-detail[_ngcontent-%COMP%]   .list-price.second-list[_ngcontent-%COMP%]   .item.discount[_ngcontent-%COMP%]{color:#3ba400}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .name-booking[_ngcontent-%COMP%]{font-size:14px;margin-block-end:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{font-size:12px;line-height:15px;color:var(--bs-blue);font-weight:600;padding-inline-end:8px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .booking-details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-weight:400;padding-inline-start:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--bs-gray-600);font-weight:400;font-size:15px;line-height:15px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-block:0;text-align:center}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]{position:relative;z-index:0}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f6f8f8;color:var(--bs-dark);border-radius:5px;padding:8px 11px;border:1px solid #dadada}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .time-booking[_ngcontent-%COMP%]   .nights[_ngcontent-%COMP%]:before{content:"";width:1px;background-color:#73868e;height:50px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--bs-gray-600);line-height:18px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details-info[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:700}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .more-details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details-info.code[_ngcontent-%COMP%]{color:var(--bs-blue)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{height:15em;border-radius:5px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;margin-block:20px 10px;font-weight:700;color:var(--bs-dark)}#booking-details[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .img-booking[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--bs-gray-600);line-height:18px}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{border-color:var(--bs-gray-600);font-size:14px;color:var(--bs-gray-600);background-color:var(--bs-white);margin-top:2em;width:48%;height:3em}@media (max-width: 1024px){#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%], #booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding-right:1em;padding-left:1em;margin-inline-end:10px}}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{color:var(--bs-white);background-color:var(--font-success);border-color:var(--font-success)}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{color:var(--bs-white);background-color:var(--font-danger);border-color:var(--font-danger)}#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .chat-btn[_ngcontent-%COMP%]{border-color:var(--bs-primary);font-size:14px;color:var(--bs-white);background-color:var(--bs-primary);margin-top:2em;width:48%;height:3em}@media (max-width: 1024px){#booking-details[_ngcontent-%COMP%]   .btns-wrapper[_ngcontent-%COMP%]   .chat-btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding-right:1em;padding-left:1em}}  #booking-details .ant-card{width:80%;margin-block-end:25px}@media (max-width: 1024px){  #booking-details .ant-card{width:95%}}@media (max-width: 768px){  #booking-details .ant-card{width:100%}}  #booking-details .ant-card hr{margin-block:20px;background-color:#73868e;opacity:.5;display:block}  #booking-details .ant-card h3,   #booking-details .ant-card h5,   #booking-details .ant-card .time-booking p{font-size:20px;color:var(--bs-dark);line-height:20px;font-weight:600;margin-bottom:1em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}']}),e})();function Xn(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div")(1,"button",4),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleCancel()}),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"translate"),n.qZA()(),n.TgZ(5,"button",5),n.NdJ("click",function(){return n.CHM(t),n.oxw().handleOk()}),n._uU(6),n.ALo(7,"translate"),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,3,"ReservationPage.Cancel")),n.xp6(2),n.Q6J("nzLoading",t.loading),n.xp6(1),n.hij(" ",n.lcZ(7,5,"ReservationPage.ConfirmBtn")," ")}}let Gn=(()=>{class e{constructor(t,o,a,s){this.bookingsService=t,this.commonService=o,this.translateService=a,this.modalRef=s,this.loading=!1,this.helpMassege=""}ngOnInit(){console.log(this.bookingId)}handleOk(){this.helpMassege.length&&(this.loading=!0)}handleCancel(){this.modalRef.close()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(v.F),n.Y36(C.v),n.Y36(d.sK),n.Y36(m.Lf))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-help-booking"]],inputs:{bookingId:"bookingId"},decls:9,vars:5,consts:[[1,"title"],[3,"nzMaxCharacterCount"],["rows","5","nz-input","",3,"ngModel","ngModelChange"],[4,"nzModalFooter"],["nz-button","","nzType","link",1,"clear-btn",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(t,o){1&t&&(n.TgZ(0,"section")(1,"p",0),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"nz-form-item")(5,"nz-form-control")(6,"nz-textarea-count",1)(7,"textarea",2),n.NdJ("ngModelChange",function(s){return o.helpMassege=s}),n.qZA()()()(),n.YNc(8,Xn,8,7,"div",3),n.qZA()),2&t&&(n.xp6(2),n.hij(" ",n.lcZ(3,3,"Booking.Message")," "),n.xp6(4),n.Q6J("nzMaxCharacterCount",500),n.xp6(1),n.Q6J("ngModel",o.helpMassege))},directives:[u.SK,h.Nx,u.t3,h.Fd,M.w,M.Zp,g.Fj,g.JJ,g.On,m.Uh,p.ix,b.w,_.dQ],pipes:[d.X$],styles:["textarea[_ngcontent-%COMP%]{resize:none}"]}),e})();var Kn=r(5113),j=r(868);function $n(e,i){if(1&e&&n._UZ(0,"img",26),2&e){const t=n.oxw(2);n.Q6J("src",null==t.bookingData?null:t.bookingData.cover_photo,n.LSH)}}function nt(e,i){1&e&&n._UZ(0,"img",27)}function tt(e,i){1&e&&(n.TgZ(0,"span",28),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.booked")," "))}function et(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.paymentPending")," "))}function ot(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.checkedIn")," "))}function it(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.checkedOut")," "))}function at(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.successFull")," "))}function lt(e,i){1&e&&(n.TgZ(0,"span",30),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.cancelled")," "))}function st(e,i){1&e&&(n.TgZ(0,"span",30),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.notBooked")," "))}function rt(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.pending")," "))}function ct(e,i){1&e&&(n.TgZ(0,"span",30),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.rejected")," "))}function gt(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.pendingReview")," "))}function pt(e,i){1&e&&(n.TgZ(0,"span",28),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.finished")," "))}function _t(e,i){1&e&&(n.TgZ(0,"span"),n._uU(1,"....."),n.qZA())}function dt(e,i){1&e&&n._UZ(0,"button",31)}function ut(e,i){1&e&&(n.TgZ(0,"button",31),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Booking.ChatHost")," "))}function mt(e,i){1&e&&(n.TgZ(0,"button",31),n._UZ(1,"i",32),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"Booking.LeaveReview")," "))}const O=function(e){return[e]};function bt(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",3)(1,"div",4),n.YNc(2,$n,1,1,"img",5),n.YNc(3,nt,1,0,"img",6),n.qZA(),n.TgZ(4,"div",7)(5,"div",8)(6,"div",9)(7,"h6",10),n._uU(8),n.qZA(),n.YNc(9,tt,3,3,"span",11),n.YNc(10,et,3,3,"span",12),n.YNc(11,ot,3,3,"span",12),n.YNc(12,it,3,3,"span",12),n.YNc(13,at,3,3,"span",12),n.YNc(14,lt,3,3,"span",13),n.YNc(15,st,3,3,"span",13),n.YNc(16,rt,3,3,"span",12),n.YNc(17,ct,3,3,"span",13),n.YNc(18,gt,3,3,"span",12),n.YNc(19,pt,3,3,"span",11),n.qZA(),n.TgZ(20,"button",14),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return a.helpModal(null==a.bookingData?null:a.bookingData.id)}),n._UZ(21,"i",15),n._uU(22),n.ALo(23,"translate"),n.qZA()(),n.TgZ(24,"p",16)(25,"span",17),n._uU(26),n.ALo(27,"date"),n.qZA(),n._uU(28," - "),n.TgZ(29,"span",18),n._uU(30),n.ALo(31,"date"),n.qZA()(),n.TgZ(32,"p",19),n._uU(33),n.YNc(34,_t,2,0,"span",20),n.qZA(),n.TgZ(35,"div",21)(36,"div",22)(37,"p"),n._uU(38),n.ALo(39,"translate"),n.TgZ(40,"span",23),n._uU(41),n.ALo(42,"translate"),n.qZA()()(),n.YNc(43,dt,1,0,"button",24),n.YNc(44,ut,3,3,"button",24),n.YNc(45,mt,4,3,"button",24),n.TgZ(46,"button",25),n.NdJ("click",function(){return n.CHM(t),n.oxw().onBookAgain()}),n._uU(47),n.ALo(48,"translate"),n.qZA()()()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("routerLink",n.VKq(45,O,"/booking/booking-details/"+(null==t.bookingData?null:t.bookingData.id))),n.xp6(1),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.cover_photo),n.xp6(1),n.Q6J("ngIf",!(null!=t.bookingData&&t.bookingData.cover_photo)),n.xp6(4),n.Q6J("routerLink",n.VKq(47,O,"/booking/booking-details/"+(null==t.bookingData?null:t.bookingData.id))),n.xp6(1),n.Oqu(null==t.bookingData?null:t.bookingData.property_name),n.xp6(1),n.Q6J("ngIf",1===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",2===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",3===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",4===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",5===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",6===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",7===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",8===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",9===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",10===(null==t.bookingData?null:t.bookingData.status)),n.xp6(1),n.Q6J("ngIf",11===(null==t.bookingData?null:t.bookingData.status)),n.xp6(3),n.hij(" ",n.lcZ(23,31,"Booking.help")," "),n.xp6(2),n.Q6J("routerLink",n.VKq(49,O,"/booking/booking-details/"+(null==t.bookingData?null:t.bookingData.id))),n.xp6(2),n.hij(" ",n.xi3(27,33,null==t.bookingData?null:t.bookingData.booked_from,"dd-MM-YYYY"),""),n.xp6(4),n.Oqu(n.xi3(31,36,null==t.bookingData?null:t.bookingData.booked_to,"dd-MM-YYYY")),n.xp6(2),n.Q6J("routerLink",n.VKq(51,O,"/booking/booking-details/"+(null==t.bookingData?null:t.bookingData.id))),n.xp6(1),n.hij(" ",null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.slice(0,50)," "),n.xp6(1),n.Q6J("ngIf",(null==t.bookingData||null==t.bookingData.description?null:t.bookingData.description.length)>50),n.xp6(2),n.Q6J("routerLink",n.VKq(53,O,"/booking/booking-details/"+(null==t.bookingData?null:t.bookingData.id))),n.xp6(2),n.hij(" ",n.lcZ(39,39,"Booking.Amount:")," "),n.xp6(3),n.AsE("",null==t.bookingData?null:t.bookingData.price_total," ",n.lcZ(42,41,"Booking.SAR"),""),n.xp6(2),n.Q6J("ngIf",null==t.bookingData?null:t.bookingData.cancel),n.xp6(1),n.Q6J("ngIf",t.chatHostStatus.includes(null==t.bookingData?null:t.bookingData.status)&&!1===(null==t.bookingData?null:t.bookingData.cancel)),n.xp6(1),n.Q6J("ngIf",10===(null==t.bookingData?null:t.bookingData.status)&&!1===(null==t.bookingData?null:t.bookingData.cancel)),n.xp6(2),n.hij(" ",n.lcZ(48,43,"Booking.BookAgain")," ")}}let kt=(()=>{class e{constructor(t){this.router=t,this.chatHostStatus=[1,3,5,10],this.helpClicked=new n.vpe}ngOnInit(){}helpModal(t){this.helpClicked.emit(t)}onBookAgain(){var t,o;(null===(t=this.bookingData)||void 0===t?void 0:t.property_id)&&this.router.navigateByUrl(`/book-place/${null===(o=this.bookingData)||void 0===o?void 0:o.property_id}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(T.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-booking-card"]],inputs:{bookingData:"bookingData"},outputs:{helpClicked:"helpClicked"},decls:4,vars:1,consts:[["id","booking-card",1,"booking-card"],[3,"nzDescription"],["descriptionTemplate",""],[1,"body-wrapper"],[1,"img-wrapper",3,"routerLink"],["class","booking-img","alt","example",3,"src",4,"ngIf"],["class","booking-img","alt","example","src","assets/imgs/booking-card-placeholder.png",4,"ngIf"],[1,"content-wrapper"],[1,"name-row"],[1,"d-flex","align-items-center"],[1,"booking-name",3,"routerLink"],["class","status sucsses",4,"ngIf"],["class","status",4,"ngIf"],["class","status red",4,"ngIf"],["nz-button","","nzType","link",1,"help-btn",3,"click"],["nz-icon","","nzType","question-circle","nzTheme","outline"],[1,"meta-info",3,"routerLink"],[1,"from"],[1,"to"],[1,"description",3,"routerLink"],[4,"ngIf"],[1,"booking-card-footer"],[1,"amount-part",3,"routerLink"],[1,"amount"],["nz-button","","class","book-btn",4,"ngIf"],["nz-button","",1,"book-btn",3,"click"],["alt","example",1,"booking-img",3,"src"],["alt","example","src","assets/imgs/booking-card-placeholder.png",1,"booking-img"],[1,"status","sucsses"],[1,"status"],[1,"status","red"],["nz-button","",1,"book-btn"],[1,"fa-solid","fa-thumbs-up",2,"padding-inline-end","10px"]],template:function(t,o){if(1&t&&(n.TgZ(0,"nz-card",0),n._UZ(1,"nz-card-meta",1),n.qZA(),n.YNc(2,bt,49,55,"ng-template",null,2,n.W1O)),2&t){const a=n.MAs(3);n.xp6(1),n.Q6J("nzDescription",a)}},directives:[I.bd,I.l7,T.rH,l.O5,p.ix,b.w,A.Ls,_.dQ],pipes:[d.X$,l.uU],styles:[".booking-card[_ngcontent-%COMP%]{padding:15px;border-radius:5px;margin-block-end:20px;width:600px;cursor:pointer}@media (max-width: 768px){.booking-card[_ngcontent-%COMP%]{width:96%;margin-inline:auto}}@media (max-width: 575px){.booking-card[_ngcontent-%COMP%]{width:100%;margin-inline:0;padding:8px}}  #booking-card .ant-card-body{padding:0!important}.booking-img-wrapper[_ngcontent-%COMP%]{position:relative}.booking-img-wrapper[_ngcontent-%COMP%]   .booking-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.booking-img-wrapper[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]{position:absolute;z-index:1;inset-block-start:5%;inset-inline-end:5%;width:36px;height:36px;border-radius:50%;border-color:var(--bs-primary);background-color:var(--bs-white)}.booking-img-wrapper[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)}.name-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5em}.name-row[_ngcontent-%COMP%]   .booking-name[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:700;margin-block:.5em .5em;margin-inline:0 .5em}.name-row[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:var(--bs-white);padding:3px 5px;border-radius:5px;font-size:12px;height:25px}.name-row[_ngcontent-%COMP%]   .status.red[_ngcontent-%COMP%]{background-color:#ff3b30}.name-row[_ngcontent-%COMP%]   .status.sucsses[_ngcontent-%COMP%]{background-color:var(--font-success)}@media (max-width: 575px){.name-row[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{inset-inline-start:10px;inset-block-start:10px;position:absolute}}.name-row[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]{color:#0473f2;display:flex;justify-content:space-between;align-items:center}.name-row[_ngcontent-%COMP%]   .help-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:5px;margin-left:5px}.meta-info[_ngcontent-%COMP%]{margin:0 0 .5em;color:var(--bs-blue)}.description[_ngcontent-%COMP%]{font-size:12px;color:var(--bs-gray-700)}@media (max-width: 575px){.description[_ngcontent-%COMP%]{margin:0}}.booking-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--bs-dark);margin:0}.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-inline-start:2px;color:var(--bs-primary);font-weight:600}@media (max-width: 575px){.booking-card-footer[_ngcontent-%COMP%]   .amount-part[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}}.booking-card-footer[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{background-color:var(--bs-primary);border-color:var(--bs-primary);color:var(--bs-white)}@media (max-width: 575px){.booking-card-footer[_ngcontent-%COMP%]   .book-btn[_ngcontent-%COMP%]{padding:4px}}.body-wrapper[_ngcontent-%COMP%]{width:100%;display:block}.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{width:30%;display:inline-block;height:10em;vertical-align:bottom}@media (max-width: 575px){.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{position:relative}}.body-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   .booking-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.body-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:70%;display:inline-block;height:10em;padding-inline-start:12px}"]}),e})();var ht=r(1711),vt=r(5181);function Ct(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"app-booking-card",12),n.NdJ("helpClicked",function(a){return n.CHM(t),n.oxw(2).openModelHelp(a)}),n.qZA()}2&e&&n.Q6J("bookingData",i.$implicit)}function xt(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Ct,1,1,"app-booking-card",9),n.TgZ(5,"div",10)(6,"nz-pagination",11),n.NdJ("nzPageIndexChange",function(a){return n.CHM(t),n.oxw().pageChanged(a)}),n.qZA()(),n.BQk()}if(2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,5,"Booking.Previous")),n.xp6(2),n.Q6J("ngForOf",t.previousBookingsData),n.xp6(2),n.Q6J("nzPageIndex",null==t.bookingsFilterCriteria?null:t.bookingsFilterCriteria.page)("nzTotal",t.totalPreviousBookings)("nzPageSize",10)}}function ft(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Mt(e,i){1&e&&n._UZ(0,"span",18)}function Tt(e,i){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,Mt,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function Zt(e,i){1&e&&n._UZ(0,"app-booking-card",20),2&e&&n.Q6J("bookingData",i.$implicit)}function Dt(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Zt,1,1,"app-booking-card",19),n.BQk()),2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Ongoing")),n.xp6(2),n.Q6J("ngForOf",t.ongoingBookingsData)}}function Ot(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Pt(e,i){1&e&&n._UZ(0,"span",18)}function zt(e,i){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,Pt,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function wt(e,i){1&e&&n._UZ(0,"app-booking-card",20),2&e&&n.Q6J("bookingData",i.$implicit)}function At(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,wt,1,1,"app-booking-card",19),n.BQk()),2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Coming")),n.xp6(2),n.Q6J("ngForOf",t.comingBookingsData)}}function Bt(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function yt(e,i){1&e&&n._UZ(0,"span",18)}function Lt(e,i){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,yt,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function Rt(e,i){1&e&&n._UZ(0,"app-booking-card",20),2&e&&n.Q6J("bookingData",i.$implicit)}function Jt(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Rt,1,1,"app-booking-card",19),n.BQk()),2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Pending")),n.xp6(2),n.Q6J("ngForOf",t.pendingBookingsData)}}function St(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function It(e,i){1&e&&n._UZ(0,"span",18)}function Ut(e,i){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,It,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}function qt(e,i){1&e&&n._UZ(0,"app-booking-card",20),2&e&&n.Q6J("bookingData",i.$implicit)}function Nt(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"p",8),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,qt,1,1,"app-booking-card",19),n.BQk()),2&e){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"Booking.Review")),n.xp6(2),n.Q6J("ngForOf",t.reviewBookingsData)}}function Qt(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13)(1,"app-empty-state",14),n.NdJ("btnClicked",function(){return n.CHM(t),n.oxw().onBrowseBtnClicked()}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("title",t.emptyData.title)("text",t.emptyData.text)("icon",t.emptyData.icon)("withBtn",t.emptyData.withBtn)("btnText",t.emptyData.btnText)}}function Yt(e,i){1&e&&n._UZ(0,"span",18)}function Ht(e,i){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,Yt,1,0,"ng-template",null,16,n.W1O),n._UZ(3,"nz-spin",17),n.qZA()),2&e){const t=n.MAs(2);n.xp6(3),n.Q6J("nzIndicator",t)}}const Ft=function(){return{span:22}},Et=function(){return{span:20}},P=function(){return{span:24}},jt=[{path:"",component:(()=>{class e{constructor(t,o,a,s,k,q,N){this.bookingsService=t,this.commonService=o,this.translateService=a,this.router=s,this.nzModalService=k,this.cookieService=q,this.breakpointObserver=N,this.bookingsFilterCriteria={page:1,pageSize:10,user_type:"",search:1},this.tabPosition="top",this.previousBookingsData=[],this.ongoingBookingsData=[],this.comingBookingsData=[],this.pendingBookingsData=[],this.reviewBookingsData=[],this.loading=!1,this.emptyData={title:"",text:"",icon:"",withBtn:!1,btnText:""},this.selectedTab="previous",this.userRole=J.N.userRole,this.lang=J.N.lang,this.subscriptions=new f.w0}ngOnInit(){this.onWindowResize(),this.getUserData()}getUserData(){this.cookieService.get("userData")?(this.userData=JSON.parse(this.cookieService.get("userData")),this.getUserRole()):this.handleNotAuthorized()}getUserRole(){this.commonService.userRole.subscribe(t=>{this.userRole=t,this.bookingsFilterCriteria.user_type="HOST"===this.userRole?"hosted_by":"booked_by",this.selectTab("previous")})}selectTab(t){var o;this.selectedTab=t,(null===(o=this.userData)||void 0===o?void 0:o.id)?this.fetchBookingsData():this.handleNotAuthorized()}fetchBookingsData(){this.loading=!0,this.subscriptions.add(this.bookingsService.getBookingsData(this.handleCriteria()).subscribe({next:t=>{(null==t?void 0:t.successful)&&(this.loading=!1,this.handleBookingsResponse(t))},error:t=>{this.loading=!1,this.handleEmptyData()}}))}handleCriteria(){var t,o;if("previous"!=this.selectedTab)switch(null===(t=this.bookingsFilterCriteria)||void 0===t||delete t.page,null===(o=this.bookingsFilterCriteria)||void 0===o||delete o.page,this.selectedTab){case"ongoing":this.bookingsFilterCriteria.search=2;break;case"coming":this.bookingsFilterCriteria.search=3;break;case"pending":this.bookingsFilterCriteria.search=4;break;case"pendingReview":this.bookingsFilterCriteria.search=5}else this.bookingsFilterCriteria=Object.assign(Object.assign({},this.bookingsFilterCriteria),{search:1,page:this.bookingsFilterCriteria.page?this.bookingsFilterCriteria.page:1,pageSize:10});return this.bookingsFilterCriteria}handleBookingsResponse(t){var o,a,s,k;switch(this.selectedTab){case"previous":this.previousBookingsData=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.data,this.totalPreviousBookings=null===(s=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.total;break;case"ongoing":this.ongoingBookingsData=null==t?void 0:t.data;break;case"coming":this.comingBookingsData=null==t?void 0:t.data;break;case"pending":this.pendingBookingsData=null==t?void 0:t.data;break;case"pendingReview":this.reviewBookingsData=null==t?void 0:t.data}(null===(k=null==t?void 0:t.data)||void 0===k?void 0:k.length)||this.handleEmptyData()}handleEmptyData(){this.emptyData={title:this.translateService.instant("General.NoData"),text:this.translateService.instant("General.BookingBrowse"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.Browse")}}handleNotAuthorized(){this.emptyData={title:this.translateService.instant("General.NotLoggedIn"),text:this.translateService.instant("General.PleaseLogin"),icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",withBtn:!0,btnText:this.translateService.instant("General.LoginOrSignup")}}pageChanged(t){this.bookingsFilterCriteria.page=t,this.fetchBookingsData()}onBrowseBtnClicked(){var t;(null===(t=this.userData)||void 0===t?void 0:t.id)?this.router.navigateByUrl("/"):this.router.navigateByUrl("auth/sign-up")}openModelHelp(t){this.nzModalService.create({nzTitle:this.translateService.instant("General.SendMassegeRoomz"),nzContent:Gn,nzComponentParams:{bookingId:t}})}onWindowResize(){this.breakpointObserver.observe(["(max-width: 768px)"]).subscribe(t=>{this.tabPosition=t.matches?"left":"top"})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(v.F),n.Y36(C.v),n.Y36(d.sK),n.Y36(T.F0),n.Y36(m.Sf),n.Y36(Q.N_),n.Y36(Kn.Yg))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-booking-wrapper"]],decls:32,vars:48,consts:[["nz-row","","id","booking"],["nz-col","",1,"mx-auto",3,"nzXs","nzLg"],[1,"title","mb-5"],["nz-row","","nzTabPosition","top",3,"nzAnimated"],["nz-col","",3,"nzSm","nzTitle","nzClick"],[4,"ngIf"],["class","empty-state mb-5",4,"ngIf"],["class","loader-wrapper mt-3",4,"ngIf"],[1,"name"],[3,"bookingData","helpClicked",4,"ngFor","ngForOf"],[1,"pagination","mt-2","mb-2"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],[3,"bookingData","helpClicked"],[1,"empty-state","mb-5"],[3,"title","text","icon","withBtn","btnText","btnClicked"],[1,"loader-wrapper","mt-3"],["indicatorTemplate",""],["nzSimple","",3,"nzIndicator"],["nz-icon","","nzType","loading"],[3,"bookingData",4,"ngFor","ngForOf"],[3,"bookingData"]],template:function(t,o){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),n._uU(4),n.ALo(5,"translate"),n.qZA()(),n.TgZ(6,"nz-tabset",3)(7,"nz-tab",4),n.NdJ("nzClick",function(){return o.selectTab("previous")}),n.ALo(8,"translate"),n.YNc(9,xt,7,7,"ng-container",5),n.YNc(10,ft,2,5,"div",6),n.YNc(11,Tt,4,1,"div",7),n.qZA(),n.TgZ(12,"nz-tab",4),n.NdJ("nzClick",function(){return o.selectTab("ongoing")}),n.ALo(13,"translate"),n.YNc(14,Dt,5,4,"ng-container",5),n.YNc(15,Ot,2,5,"div",6),n.YNc(16,zt,4,1,"div",7),n.qZA(),n.TgZ(17,"nz-tab",4),n.NdJ("nzClick",function(){return o.selectTab("coming")}),n.ALo(18,"translate"),n.YNc(19,At,5,4,"ng-container",5),n.YNc(20,Bt,2,5,"div",6),n.YNc(21,Lt,4,1,"div",7),n.qZA(),n.TgZ(22,"nz-tab",4),n.NdJ("nzClick",function(){return o.selectTab("pending")}),n.ALo(23,"translate"),n.YNc(24,Jt,5,4,"ng-container",5),n.YNc(25,St,2,5,"div",6),n.YNc(26,Ut,4,1,"div",7),n.qZA(),n.TgZ(27,"nz-tab",4),n.NdJ("nzClick",function(){return o.selectTab("pendingReview")}),n.ALo(28,"translate"),n.YNc(29,Nt,5,4,"ng-container",5),n.YNc(30,Qt,2,5,"div",6),n.YNc(31,Ht,4,1,"div",7),n.qZA()()()()),2&t&&(n.xp6(1),n.Q6J("nzXs",n.DdM(41,Ft))("nzLg",n.DdM(42,Et)),n.xp6(3),n.Oqu(n.lcZ(5,29,"Booking.Booking")),n.xp6(2),n.Q6J("nzAnimated",!0),n.xp6(1),n.s9C("nzTitle",n.lcZ(8,31,"Booking.Previous")),n.Q6J("nzSm",n.DdM(43,P)),n.xp6(2),n.Q6J("ngIf",(null==o.previousBookingsData?null:o.previousBookingsData.length)&&!o.loading),n.xp6(1),n.Q6J("ngIf",!(null!=o.previousBookingsData&&o.previousBookingsData.length||o.loading)),n.xp6(1),n.Q6J("ngIf",o.loading),n.xp6(1),n.s9C("nzTitle",n.lcZ(13,33,"Booking.Ongoing")),n.Q6J("nzSm",n.DdM(44,P)),n.xp6(2),n.Q6J("ngIf",(null==o.ongoingBookingsData?null:o.ongoingBookingsData.length)&&!o.loading),n.xp6(1),n.Q6J("ngIf",!(null!=o.ongoingBookingsData&&o.ongoingBookingsData.length||o.loading)),n.xp6(1),n.Q6J("ngIf",o.loading),n.xp6(1),n.s9C("nzTitle",n.lcZ(18,35,"Booking.Coming")),n.Q6J("nzSm",n.DdM(45,P)),n.xp6(2),n.Q6J("ngIf",(null==o.comingBookingsData?null:o.comingBookingsData.length)&&!o.loading),n.xp6(1),n.Q6J("ngIf",!(null!=o.comingBookingsData&&o.comingBookingsData.length||o.loading)),n.xp6(1),n.Q6J("ngIf",o.loading),n.xp6(1),n.s9C("nzTitle",n.lcZ(23,37,"Booking.Pending")),n.Q6J("nzSm",n.DdM(46,P)),n.xp6(2),n.Q6J("ngIf",(null==o.pendingBookingsData?null:o.pendingBookingsData.length)&&!o.loading),n.xp6(1),n.Q6J("ngIf",!(null!=o.pendingBookingsData&&o.pendingBookingsData.length||o.loading)),n.xp6(1),n.Q6J("ngIf",o.loading),n.xp6(1),n.s9C("nzTitle",n.lcZ(28,39,"Booking.Review")),n.Q6J("nzSm",n.DdM(47,P)),n.xp6(2),n.Q6J("ngIf",(null==o.reviewBookingsData?null:o.reviewBookingsData.length)&&!o.loading),n.xp6(1),n.Q6J("ngIf",!(null!=o.reviewBookingsData&&o.reviewBookingsData.length||o.loading)),n.xp6(1),n.Q6J("ngIf",o.loading))},directives:[u.SK,u.t3,j.xH,j.xw,l.O5,l.sg,kt,ht.dE,vt.s,b.w,A.Ls,H.W],pipes:[d.X$],styles:["#booking[_ngcontent-%COMP%]{padding:50px 24px 20px;min-height:80vh}@media (max-width: 575px){#booking[_ngcontent-%COMP%]{padding-inline:0}}#booking[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--bs-dark)}@media (max-width: 572px){#booking[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}}#booking[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#5e676a;margin-top:20px}  #booking .ant-tabs-tab{padding:10px;font-size:16px}  #booking .ant-tabs-tab:lang(ar){margin-inline-end:1em}@media (max-width: 724px){  #booking .ant-tabs-tab{margin:0 0 0 5px}}@media (max-width: 572px){  #booking .ant-tabs-tab{margin:0;padding:8px;font-size:14px}}@media (max-width: 452px){  #booking .ant-tabs-tab{margin:0;padding:7px;font-size:12px}}  #booking .ant-tabs-content-holder:lang(ar){direction:ltr}  #booking .ant-tabs-content-holder .ant-tabs-tabpane:lang(ar){direction:rtl}  #booking .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:var(--bs-blue)}  #booking .ant-tabs-ink-bar{background:var(--bs-blue)}  #booking .ant-tabs-tab:hover{color:var(--bs-blue)}  #booking .ant-pagination-next .ant-pagination-item-link,   #booking .ant-pagination-prev .ant-pagination-item-link{line-height:0em}  #booking .ant-pagination-item a,   #booking .ant-pagination-item:focus-visible a,   #booking .ant-pagination-item:hover a{text-decoration:none;line-height:1.9em}.loader-wrapper[_ngcontent-%COMP%]{justify-content:center;text-align:center;min-height:60vh;display:flex;align-items:center}.loader-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2em}.pagination[_ngcontent-%COMP%]{text-align:center;display:block}.pagination[_ngcontent-%COMP%]   nz-pagination[_ngcontent-%COMP%]{text-align:center}"]}),e})()},{path:"booking-details/:id",component:Vn}];let Wt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[T.Bz.forChild(jt)],T.Bz]}),e})(),Vt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[l.ez,Wt,B.P,y.m,d.aw,g.u5,g.UX]]}),e})()},5181:(W,z,r)=>{r.d(z,{s:()=>g});var l=r(5e3),d=r(685),B=r(9808),y=r(6042),f=r(2643),n=r(2683),m=r(1062);function v(p,b){if(1&p&&(l.TgZ(0,"h5",3),l._uU(1),l.ALo(2,"translate"),l.qZA(),l.TgZ(3,"p",4),l._uU(4),l.ALo(5,"translate"),l.qZA()),2&p){const _=l.oxw();l.xp6(1),l.Oqu(l.lcZ(2,2,_.title)),l.xp6(3),l.Oqu(l.lcZ(5,4,_.text))}}function C(p,b){if(1&p){const _=l.EpF();l.TgZ(0,"button",7),l.NdJ("click",function(){return l.CHM(_),l.oxw(2).onButtonClicked()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&p){const _=l.oxw(2);l.xp6(1),l.Oqu(l.lcZ(2,1,_.btnText))}}function u(p,b){if(1&p){const _=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){return l.CHM(_),l.oxw(2).onEditClicked()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&p&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"CreateListing.Edit")))}function w(p,b){if(1&p&&(l.YNc(0,C,3,3,"button",5),l.YNc(1,u,3,3,"button",6)),2&p){const _=l.oxw();l.Q6J("ngIf",_.withBtn),l.xp6(1),l.Q6J("ngIf",_.isPublish)}}let g=(()=>{class p{constructor(){this.title="",this.text="",this.icon="",this.btnText="",this.isPublish=!1,this.btnClicked=new l.vpe,this.editClicked=new l.vpe}ngOnInit(){}onButtonClicked(){this.btnClicked.emit()}onEditClicked(){this.editClicked.emit()}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-empty-state"]],inputs:{title:"title",text:"text",icon:"icon",withBtn:"withBtn",btnText:"btnText",isPublish:"isPublish"},outputs:{btnClicked:"btnClicked",editClicked:"editClicked"},decls:5,vars:3,consts:[[1,"empty-wrapper","pt-5","pb-5",3,"nzNotFoundImage","nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],[1,"title"],[1,"description"],["nz-button","","nzType","primary","class","mr-1 ml-1",3,"click",4,"ngIf"],["nz-button","","class","edit-btn mr-1 ml-1",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"mr-1","ml-1",3,"click"],["nz-button","",1,"edit-btn","mr-1","ml-1",3,"click"]],template:function(_,Z){if(1&_&&(l.TgZ(0,"nz-empty",0),l.YNc(1,v,6,6,"ng-template",null,1,l.W1O),l.YNc(3,w,2,2,"ng-template",null,2,l.W1O),l.qZA()),2&_){const D=l.MAs(2),L=l.MAs(4);l.Q6J("nzNotFoundImage",Z.icon?Z.icon:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg")("nzNotFoundContent",D)("nzNotFoundFooter",L)}},directives:[d.p9,B.O5,y.ix,f.dQ,n.w],pipes:[m.X$],styles:[".title[_ngcontent-%COMP%]{font-weight:600;margin-top:1em;margin-bottom:1em;color:var(--bs-dark)}.description[_ngcontent-%COMP%]{width:50%;margin:auto;color:var(--bs-gray-600)}.edit-btn[_ngcontent-%COMP%]{border-color:var(--bs-gray-300);color:var(--bs-dark);background-color:var(--bs-gray-300)}.mr-1[_ngcontent-%COMP%]{margin-inline-start:5px}.ml-1[_ngcontent-%COMP%]{margin-inline-end:5px}"]}),p})()}}]);